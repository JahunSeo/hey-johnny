{"version":3,"sources":["Page/Navigation/index.module.css","Page/Articles/Quiz/index.module.css","Page/Articles/Bird/index.module.css","Page/index.module.css","Component/Transition/SectionTransition.module.css","Component/Transition/SlowTransition.module.css","Component/Transition/QuoteTransition.module.css","Component/Canvas/index.js","Page/Field/FlappyBird/Brain.js","Page/Field/FlappyBird/Bird.js","Page/Constant.js","Page/Field/FlappyBird/BirdGroup.js","Page/Field/FlappyBird/Pipe.js","Page/Field/FlappyBird/PipeGroup.js","Page/Field/NEAT/Gene.js","Page/Field/NEAT/Activation.js","Page/Field/NEAT/Genome.js","Page/Field/NEAT/Agent.js","Page/Field/NEAT/Species.js","Page/Field/NEAT/Setting.js","Page/Field/NEAT/Generation.js","Page/Field/Tool/Vector2D.js","Page/Field/Particle.js","Page/Field/Fumes.js","Page/Field/Asteroid.js","Page/Field/Generation.js","Page/Field/ScreenGroup.js","Page/Field/SatelliteGroup.js","Page/Field/index.js","Component/Transition/index.js","Page/Navigation/index.js","Page/Articles/Quiz/index.js","Page/Articles/Bird/index.js","Asset/Image/johnny_jobs.jpg","Page/Articles/Midas/index.js","Asset/Video/johnny_wizlab_demo.mp4","Page/Articles/Wizlab/index.js","Page/Articles/XOR/index.js","Page/index.js","App.js","reportWebVitals.js","index.js","Page/Articles/Midas/index.module.css","Page/Articles/Wizlab/index.module.css","Page/Articles/XOR/index.module.css"],"names":["module","exports","Canvas","props","resizeEventHandler","event","_cvs","width","window","innerWidth","document","body","clientWidth","height","innerHeight","clientHeight","mousemoveEventHandler","setMouseLocal","mouseObj","isMouseMoving","clickEventHandler","clicked","clickedFrame","_frameCnt","resetMouseObj","undefined","rect","getBoundingClientRect","scaleX","borderWidth","scaleY","mouseX","clientX","left","mouseY","clientY","top","isMouseOverCanvas","loop","draw","isLooped","_ctx","_frameId","requestAnimationFrame","canvasRef","React","createRef","this","current","getContext","addEventListener","cancelAnimationFrame","removeEventListener","ref","style","display","Component","Brain","model","tf","createModel","add","dense","inputShape","units","activation","input","xs","predict","dataSync","weights","getWeights","copied","forEach","w","push","clone","newBrain","setWeights","rate","mutated","map","weight","shape","array","slice","i","length","Math","random","randNum","arraySync","dispose","Bird","setting","y","x","right","updateTopBottom","velY","accY","jumpForce","maxVelY","score","transplantBrain","brain","copy","pipes","boardWidth","boardHeight","pipe","inputs","bottom","outputs","jump","v","ctx","min","save","originX","originY","translate","strokeStyle","strokeRect","restore","checkX","checkY","PAGES","MAIN","CANDY","QUIZ","XOR","BIRD","MIDAS","WIZLAB","SCREEN_SIZE","ratio","h","max","getScreenRect","stageWidth","stageHeight","currentPage","scrSize","Setting","updateSize","cvsWidth","cvsHeight","boardWidthRadio","groupSize","gravity","BirdGroup","survivors","deads","generationNum","distance","createBirds","bird","getRandomY","floor","pipeGroup","subPipes","getClosestPipesFrom","isDead","collidesWith","isOutOfStage","dropout","splice","addScore","think","applyForceY","update","fillStyle","font","textBaseline","fillText","sum","largest","fitness","Error","pickOne","extractBrain","mutate","child","disposeBrain","idx","r","Pipe","updateLeftRight","outStage","velX","checkEdges","pipeWidth","fillRect","pipeGap","interval","PipeGroup","restart","intervalWidth","startPoint","pipeCnt","ceil","frontIndex","getRandomTop","id","prev","num","Gene","NodeGene","nodeNum","type","layer","fromHereConns","toHereConns","NODE_TYPE","I","initBias","outValue","bias","getInitValue","getDeltaValue","ConnectionGene","invNum","from","to","enabled","initWeight","Activation","identity","sigmoid","pow","E","modifiedSigmoid","step","H","O","CONN_TYPE","Genome","inputSize","outputSize","nodes","nodeMap","connMap","isPrimal","createPrimal","order","node","conn","addLastNodeNum","initNode","j","addLastInvNum","initConn","output","weightedSum","k","func","partner","parent1","parent2","keepStructure","mutateWeight","mutateBias","addNode","addConn","candidates","blockRecurrent","parseInt","toNode","used","fromNode","indexOf","oldInvNum","selectEnabledConn","lowLayer","highLayer","oldConn","invResult","addInvResult","toSplit","spliceIndex","layerDist","getNodeFromNodeIndex","invNum1","invNum2","disable","newConn","selectNewConn","other","matching","myLeft","otherLeft","N","matchingMax","disjointCnt","excessCnt","weightDiff","myWeight","otherWeight","abs","distC1","distC2","distC3","result","Agent","agentId","speciesNum","xor","adjustedScore","genome","crossover","measureDist","frameCnt","ys","local","areaWidth","areaHeight","colCnt","agentX","agentY","layers","layersLength","Object","keys","textAlign","globalCompositeOperation","nodeLocal","layerNodes","nodeX","nodeY","beginPath","arc","PI","stroke","fill","connStyle","moveTo","setLineDash","quadraticCurveTo","lineTo","scoreText","round","alpha","Species","initGenNum","representative","agent","agents","nextAgents","isSorted","avgFitness","isExtinct","ancestors","size","average","sort","a","b","sortByFitness","survivalRate","eliminationRate","limit","criteria","index","GenerationSetting","lastSpeciesNum","lastAgentId","lastNodeNum","lastInvNum","compatibilityThreshold","generationLimit","invResults","rowCnt","curr","Generation","agentMap","speciesMap","initGeneration","species","console","error","primal","addLastAgentId","setId","addLastSpeciesNum","initSpecies","getGenerationNum","setSpecies","asexual","addGenerationNum","avgFitnessTotal","representativeMap","adjustFitness","eliminateLowest","setRepresentative","allotment","proportion","diff","newAgentMap","speciesReproduced","getSingleParent","sexual","geneticDist","keepNextAgent","getSpecies","setExtinction","ancestor","clearRect","run","Vector2D","sqrt","normalize","mult","m","getMag","div","maximum","setMag","dx","dy","Particle","location","angle","xVel","cos","yVel","sin","velocity","acceleration","radius","lifespan","Fumes","origin","particles","p","AGENT_TYPE","Asteroid","agentType","getRandomLocation","maxSpeed","maxForce","defaultAngle","angStep","seekLimit","desiredSeparation","wanderTarget","warderRelocationPct","wanderSpeedRatio","gridLocal","isAccelerated","leftFumes","rightFumes","separation","seek","separate","applyForce","isCandyOn","seekMouse","count","sub","getMagSq","target","desired","dX","dY","angleBase","atan2","d","dLimit","dA","row","col","force","updateFumes","angSize","leftAngle","leftX","leftY","setLocation","rightAngle","rightX","rightY","rotate","getColor","closePath","eyeAngle","eyeStyle","addParticle","canvasWidth","canvas","canvasHeight","gridSize","gridRowCnt","gridColCnt","makeGrid","grid","getGridRowByY","getGridColByX","setGridLocal","subAgents","flock","arrivedLimit","scrW","scrH","scrL","scrT","onLocal","TL","TR","BL","BR","offLocal","ScreenGroup","createAgents","isSpread","isMoving","agentTL","agentTR","agentBL","agentBR","getTargetByLocal","NAV_STATUS","center","radiusLimit","sateRadiusLimit","SatelliteGroup","sates","satesLength","sateAngleDist","sateRadius","angleStep","radiusShrinkSpeed","sateRadiusShrinkSpeed","status","setPage","setStatus","page","sateAngle","checkClick","selected","sateCheck","radiusCheck","getColorByPage","Field","setScreenByPage","isScreenOn","screenGroup","resize","spread","fold","sateGroup","expand","shrink","generation","birdGroup","birdBoardWidthRatio","xorGroup","isArticleOn","drawFlappyBird","drawXOR","toggleArticle","evolveNextGeneration","drawDashboard","nextGeneration","XORGroup","prevProps","CSSTransitionWrapper","children","wrapClassName","classNames","timeout","nodeRef","useRef","enter","exit","SectionTransition","CSSTransition","className","SlowCSSTransitionWrapper","SlowTransition","QuoteCSSTransitionWrapper","QuoteTransition","Navigation","state","sectionIndex","isGuideOn","isBackBtnOn","startGuide","setState","startBackBtn","addSectionIndex","subtractSectionIndex","handleBackBtn","styles","TransitionGroup","component","appear","onEntered","onExited","secText","greeting","guide","btn","onClick","Quiz","inner","secTitle","title","secDesc","desc","sentences","sentenceIndex","sentence","Midas","image","src","JobsImage","alt","imageGuide","btnGuide","playBtn","rel","href","cx","bind","Wizlab","toggleVideoZoom","isVideoZoom","toggleVideoMuted","isVideoMuted","videoRef","setVideoRef","element","video","controls","playsInline","autoPlay","muted","controlsList","onContextMenu","e","preventDefault","wizlabVideo","Page","params","match","scrRect","nextPage","canGoBack","history","goBack","getPageInfo","redirectNeeded","key","NavContainer","FieldContainer","ArticleContainer","path","withRouter","App","exact","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"+GACAA,EAAOC,QAAU,CAAC,KAAO,yBAAyB,SAAW,6BAA6B,MAAQ,0BAA0B,IAAM,wBAAwB,MAAQ,4B,oBCAlKD,EAAOC,QAAU,CAAC,KAAO,mBAAmB,MAAQ,oBAAoB,SAAW,uBAAuB,MAAQ,oBAAoB,QAAU,sBAAsB,MAAQ,oBAAoB,QAAU,sBAAsB,WAAa,yBAAyB,KAAO,mBAAmB,SAAW,uBAAuB,QAAU,wB,oBCA9UD,EAAOC,QAAU,CAAC,KAAO,mBAAmB,MAAQ,oBAAoB,SAAW,uBAAuB,MAAQ,oBAAoB,QAAU,sBAAsB,SAAW,yB,oBCAjLD,EAAOC,QAAU,CAAC,KAAO,mBAAmB,aAAe,2BAA2B,eAAiB,6BAA6B,iBAAmB,iC,oBCAvJD,EAAOC,QAAU,CAAC,OAAS,kCAAkC,aAAe,wCAAwC,WAAa,sCAAsC,MAAQ,iCAAiC,YAAc,uCAAuC,UAAY,qCAAqC,KAAO,gCAAgC,WAAa,sCAAsC,SAAW,sC,oBCA3ZD,EAAOC,QAAU,CAAC,OAAS,+BAA+B,aAAe,qCAAqC,WAAa,mCAAmC,MAAQ,8BAA8B,YAAc,oCAAoC,UAAY,kCAAkC,KAAO,6BAA6B,WAAa,mCAAmC,SAAW,mC,oBCAnYD,EAAOC,QAAU,CAAC,OAAS,gCAAgC,aAAe,sCAAsC,WAAa,oCAAoC,MAAQ,+BAA+B,YAAc,qCAAqC,UAAY,mCAAmC,KAAO,8BAA8B,WAAa,oCAAoC,SAAW,oC,iSCCtXC,E,kDACnB,WAAYC,GAAQ,IAAD,8BACjB,cAAMA,IAsCRC,mBAAqB,SAACC,GAEpB,EAAKC,KAAKC,MAAQC,OAAOC,YAAcC,SAASC,KAAKC,YACrD,EAAKN,KAAKO,OAASL,OAAOM,aAAeJ,SAASC,KAAKI,cA1CtC,EA6CnBC,sBAAwB,SAACX,GAEvB,EAAKY,cAAcZ,GACnB,EAAKa,SAASC,eAAgB,GAhDb,EAmDnBC,kBAAoB,SAACf,GAEnB,EAAKY,cAAcZ,GACnB,EAAKa,SAASG,SAAU,EACxB,EAAKH,SAASI,aAAe,EAAKC,WAvDjB,EA0DnBC,cAAgB,WACd,EAAKN,SAASC,eAAgB,EAC9B,EAAKD,SAASG,SAAU,EACxB,EAAKH,SAASI,kBAAeG,GA7DZ,EAgEnBR,cAAgB,SAACZ,GAEf,IAAIqB,EAAO,EAAKpB,KAAKqB,wBAGjBC,EAAS,EAAKtB,KAAKC,OAASmB,EAAKnB,MAAQsB,GACzCC,EAAS,EAAKxB,KAAKO,QAAUa,EAAKb,OAASgB,GAE3CE,GAAU1B,EAAM2B,SAAWN,EAAKO,KALlB,IAKyCL,EACvDM,GAAU7B,EAAM8B,SAAWT,EAAKU,IANlB,IAMwCN,EAGtDO,EACFN,GAFY,IAGZA,GAAU,EAAKzB,KAAKC,MAHR,IAIZ2B,GAJY,IAKZA,GAAU,EAAK5B,KAAKO,OALR,GAWd,OAJA,EAAKK,SAASa,OAASA,EACvB,EAAKb,SAASgB,OAASA,EACvB,EAAKhB,SAASmB,kBAAoBA,EAE3B,CACLN,SACAG,SACAG,sBAzFe,EA6FnBC,KAAO,WACL,EAAKf,WAAa,EADP,MAEqB,EAAKpB,MAA/BoC,EAFK,EAELA,KAFK,IAECC,gBAFD,SAGXD,EAAK,EAAKE,KAAM,EAAKlB,UAAW,EAAKL,UACrC,EAAKM,gBACDgB,IACF,EAAKE,SAAWlC,OAAOmC,sBAAsB,EAAKL,QAjGpD,EAAKM,UAAYC,IAAMC,YACvB,EAAK5B,SAAW,CACda,YAAQN,EACRS,YAAQT,EACRY,mBAAmB,EACnBlB,eAAe,EACfE,SAAS,EACTC,kBAAcG,GATC,E,qDAanB,WACOsB,KAAKL,WAERK,KAAKzC,KAAOyC,KAAKH,UAAUI,QAC3BD,KAAKN,KAAOM,KAAKzC,KAAK2C,WAAW,MACjCF,KAAKxB,UAAY,EACjBwB,KAAKzC,KAAK4C,iBAAiB,QAASH,KAAK3B,mBAGzC2B,KAAKT,QAEP9B,OAAO0C,iBAAiB,SAAUH,KAAK3C,oBACvC2C,KAAK3C,qBACLM,SAASwC,iBAAiB,YAAaH,KAAK/B,yB,kCAG9C,WAEER,OAAO2C,qBAAqBJ,KAAKL,UACjClC,OAAO4C,oBAAoB,SAAUL,KAAK3C,oBAC1CM,SAAS0C,oBAAoB,YAAaL,KAAK/B,uBAC3C+B,KAAKzC,MACPyC,KAAKzC,KAAK8C,oBAAoB,QAASL,KAAK3B,qB,oBAoEhD,WAAU,IAAD,EAC6B2B,KAAK5C,MADlC,IACDI,aADC,MACO,IADP,MACYM,cADZ,MACqB,IADrB,EAEP,OACE,wBACEwC,IAAKN,KAAKH,UACVrC,MAAOA,EACPM,OAAQA,EACRyC,MAAO,CACLC,QAAS,e,GAhHiBC,a,QCCfC,E,WACnB,WAAYC,GAAQ,oBACdA,aAAiBC,IACnBZ,KAAKW,MAAQA,EAEbX,KAAKW,MAAQX,KAAKa,c,+CAItB,WAEE,IAAMF,EAAQC,MAYd,OATAD,EAAMG,IACJF,IAAUG,MAAM,CAAEC,WAAY,CAAC,GAAIC,MAAO,EAAGC,WAAY,aAI3DP,EAAMG,IAAIF,IAAUG,MAAM,CAAEE,MAAO,EAAGC,WAAY,aAI3CP,I,qBAGT,SAAQQ,GAAQ,IAAD,OACb,OAAOP,KAAQ,WACb,IAAIQ,EAAKR,IAAY,CAACO,IAGtB,OAFS,EAAKR,MAAMU,QAAQD,GACXE,gB,kBAKrB,WAAQ,IAAD,OACL,OAAOV,KAAQ,WACb,IAAIW,EAAU,EAAKZ,MAAMa,aACrBC,EAAS,GACbF,EAAQG,SAAQ,SAACC,GAAD,OAAOF,EAAOG,KAAKD,EAAEE,YAErC,IAAIC,EAAW,IAAIpB,EAEnB,OADAoB,EAASnB,MAAMoB,WAAWN,GACnBK,O,oBAIX,WAAoB,IAAD,OAAZE,EAAY,uDAAL,GACZpB,KAAQ,WACN,IACIqB,EADU,EAAKtB,MAAMa,aACHU,KAAI,SAACC,GAGzB,IAFA,IAAIC,EAAQD,EAAOC,MACfC,EAAQF,EAAOb,WAAWgB,QACrBC,EAAI,EAAGA,EAAIF,EAAMG,OAAQD,IAChC,GAAIE,KAAKC,SAAWV,EAAM,CACxB,IAAIW,EAAU/B,IAAgB,CAAC,IAAIgC,YAAY,GAC/CP,EAAME,IAAMI,EAGhB,OAAO/B,IAAUyB,EAAOD,MAE1B,EAAKzB,MAAMoB,WAAWE,Q,qBAI1B,WACEjC,KAAKW,MAAMkC,c,KClEMC,E,WACnB,aAAyB,IAAb1F,EAAY,uDAAJ,GAAI,oBACtB4C,KAAK+C,QAAU3F,EAAM2F,QACrB/C,KAAKgD,EAAI5F,EAAM4F,EAEfhD,KAAKxC,MAAQ,GACbwC,KAAKlC,OAAS,GAEd,IAAImF,EAAIjD,KAAK+C,QAAQE,EACrBjD,KAAKd,KAAO+D,EACZjD,KAAKkD,MAAQD,EAAIjD,KAAKxC,MACtBwC,KAAKmD,gBAAgBnD,KAAKgD,EAAGhD,KAAKlC,QAElCkC,KAAKoD,KAAO,EACZpD,KAAKqD,KAAO,EACZrD,KAAKsD,WAAa,EAElBtD,KAAKuD,QAAU,GAEfvD,KAAKwD,MAAQ,EAEbxD,KAAKyD,gBAAgBrG,EAAMsG,O,mDAG7B,SAAgBA,GAGZ1D,KAAK0D,MAFHA,aAAiBhD,EAENgD,EAGA,IAAIhD,I,0BAIrB,WACE,OAAOV,KAAK0D,MAAMC,S,0BAGpB,WACE3D,KAAK0D,MAAMb,Y,mBAGb,SAAMe,GAAO,MAIuB5D,KAAK+C,QAAjCc,EAJK,EAILA,WAAYC,EAJP,EAIOA,YACdC,EAAOH,EAAM,GAEbI,EAAS,GACbA,EAAO,GAAKhE,KAAKgD,EAAIc,EACrBE,EAAO,GAAKhE,KAAKoD,KAAOpD,KAAKuD,QAC7BS,EAAO,GAAKD,EAAK7E,KAAO2E,EACxBG,EAAO,GAAKD,EAAKb,MAAQW,EACzBG,EAAO,GAAKD,EAAK1E,IAAMyE,EACvBE,EAAO,GAAKD,EAAKE,OAASH,EAE1B,IAAII,EAAUlE,KAAK0D,MAAMrC,QAAQ2C,GAC7BE,EAAQ,GAAKA,EAAQ,IACvBlE,KAAKmE,S,kBAIT,WACEnE,KAAKqD,MAAQrD,KAAKsD,Y,yBAGpB,SAAYc,GACVpE,KAAKqD,MAAQe,I,oBAGf,SAAOC,GACLrE,KAAKoD,MAAQpD,KAAKqD,KAClBrD,KAAKoD,KAAOX,KAAK6B,IAAItE,KAAKoD,KAAMpD,KAAKuD,SACrCvD,KAAKgD,GAAKhD,KAAKoD,KACfpD,KAAKqD,KAAO,EAEZrD,KAAKmD,oB,sBAIP,WACEnD,KAAKwD,U,qBAGP,SAAQa,GACN,KAAIrE,KAAKX,KAAO,MACZW,KAAKiE,QAAUjE,KAAK+C,QAAQe,aAAhC,CAEAO,EAAIE,OAJO,MAKgBvE,KAAK+C,QAA1ByB,EALK,EAKLA,QAASC,EALJ,EAKIA,QACfJ,EAAIK,UAAUF,EAASC,GACvBJ,EAAIM,YAAJ,mBACAN,EAAIO,WAAW5E,KAAK+C,QAAQE,EAAGjD,KAAKgD,EAAGhD,KAAKxC,MAAOwC,KAAKlC,QACxDuG,EAAIQ,a,6BAGN,WAAmD,IAAnC7B,EAAkC,uDAA9BhD,KAAKgD,EAAGlF,EAAsB,uDAAbkC,KAAKlC,OACxCkC,KAAKX,IAAM2D,EACXhD,KAAKiE,OAASjB,EAAIlF,I,0BAGpB,SAAaiG,GAGX,IAAIe,EAAS9E,KAAKkD,MAAQa,EAAK7E,MAAQc,KAAKd,KAAO6E,EAAKb,MACpD6B,EAAS/E,KAAKX,IAAM0E,EAAK1E,KAAOW,KAAKiE,OAASF,EAAKE,OACvD,SAAIa,IAAUC,K,0BAOhB,SAAaV,GAAM,IACXP,EAAgB9D,KAAK+C,QAArBe,YAMN,OAAI9D,KAAKX,IAAM,GAAKW,KAAKiE,OAASH,M,KC5HzBkB,EAAQ,CACnBC,KAAM,OACNC,MAAO,QACPC,KAAM,OACNC,IAAK,MACLC,KAAM,OACNC,MAAO,QACPC,OAAQ,UAGGC,EACH,CAAEC,MAAO,CAAE9D,EAAG,EAAG+D,EAAG,GAAKC,IAAK,CAAEhE,EAAG,IAAK+D,EAAG,MADxCF,EAEF,CAAEC,MAAO,CAAE9D,EAAG,EAAG+D,EAAG,IAAMC,IAAK,CAAEhE,EAAG,IAAK+D,EAAG,MAF1CF,EAGF,CAAEG,IAAK,CAAED,EAAG,MAIVE,EAAgB,SAACC,EAAYC,EAAaC,GAErD,GAAIA,IAAgBf,EAAMK,KAAM,CAC9B,IAAI7H,EAAqB,EAAbqI,EACR/H,EAAS0H,EAAoBG,IAAID,EAGrC,MAAO,CAAElI,QAAOM,SAAQoB,MAFZ2G,EAAarI,GAAS,EAEJ6B,KADnByG,EAAchI,GAAU,GAIrC,GAAIiI,IAAgBf,EAAMI,IAAK,CAK7B,MAAO,CAAE5H,MAJGqI,EAII/H,OAHHgI,EAGW5G,MAFZ2G,EAFAA,GAEsB,EAEJxG,KADnByG,EAFEA,GAEsB,GAIrC,GAAIC,IAAgBf,EAAMO,OAAQ,CAChC,IACI/H,EAAQiF,KAAK6B,IAAIuB,EADN,KAKf,MAAO,CAAErI,QAAOM,OAHHgI,EAGW5G,MAFZ2G,EAAarI,GAAS,EAEJ6B,KADnByG,EAFEA,GAEsB,GAIrC,IAAIE,EAAUR,GACVO,IAAgBf,EAAMG,MAEfY,IAAgBf,EAAMM,SAD/BU,EAAUR,GAKZ,IACI1H,EAAQN,EADRiI,EAAQO,EAAQP,MAgBpB,OAdII,EAAaC,EAAcL,EAAM9D,EAAI8D,EAAMC,GAE7C5H,EAAuB,GAAdgI,EAETtI,GADAM,EAAS2E,KAAK6B,IAAIxG,EAAQkI,EAAQL,IAAID,KACpBD,EAAM9D,EAAI8D,EAAMC,KAGlClI,EAAqB,GAAbqI,EAER/H,GADAN,EAAQiF,KAAK6B,IAAI9G,EAAOwI,EAAQL,IAAIhE,KAClB8D,EAAMC,EAAID,EAAM9D,IAK7B,CAAEnE,QAAOM,SAAQoB,MAHZ2G,EAAarI,GAAS,EAGJ6B,KAFnByG,EAAchI,GAAU,IC9D/BmI,E,WACJ,aAAyB,IAAb7I,EAAY,uDAAJ,GAAI,oBACtB4C,KAAKkG,WAAW9I,G,8CAGlB,SAAWA,GAET4C,KAAKmG,SAAW/I,EAAM+I,SACtBnG,KAAKoG,UAAYhJ,EAAMgJ,UAEvBpG,KAAKqG,gBAAkBjJ,EAAMiJ,gBAC7BrG,KAAK6D,WAAa7D,KAAKmG,SAAWnG,KAAKqG,gBACvCrG,KAAK8D,YAAc0B,EAAoBG,IAAID,EAG3C1F,KAAKwE,SAAWxE,KAAKmG,SAAWnG,KAAK6D,YAAc,EACnD7D,KAAKyE,SAAWzE,KAAKoG,UAAYpG,KAAK8D,aAAe,EAIrD9D,KAAKiD,EAAI,IACTjD,KAAKsG,UAAY,GACjBtG,KAAKuG,QAAU,O,KAIEC,E,WACnB,WAAYpJ,GAAQ,oBAClB4C,KAAK+C,QAAU,IAAIkD,EAAQ7I,GAC3B4C,KAAKyG,UAAY,GACjBzG,KAAK0G,MAAQ,GAEb1G,KAAK2G,cAAgB,EACrB3G,KAAK4G,SAAW,EAChB5G,KAAK6G,c,0CAGP,SAAOzJ,GACL4C,KAAK+C,QAAQmD,WAAW9I,K,yBAG1B,WACE,IAAK,IAAImF,EAAI,EAAGA,EAAIvC,KAAK+C,QAAQuD,UAAW/D,IAAK,CAC/C,IAAIuE,EAAO,IAAIhE,EAAK,CAClBC,QAAS/C,KAAK+C,QACdC,EAAGhD,KAAK+G,eAEV/G,KAAKyG,UAAU7E,KAAKkF,M,wBAIxB,WAAc,IACNhD,EAAgB9D,KAAK+C,QAArBe,YACFd,EAAkB,GAAdc,EAER,OADAd,GAAKP,KAAKuE,MAAMvE,KAAKC,UAA0B,GAAdoB,M,iBAInC,SAAIO,EAAK4C,GAKP,IAHA,IAAIC,EAAWD,EAAUE,oBAAoBnH,KAAK+C,QAAQE,EAAG,GAGpDV,EAAIvC,KAAKyG,UAAUjE,OAAS,EAAGD,GAAK,EAAGA,IAAK,CACnD,IAAIuE,EAAO9G,KAAKyG,UAAUlE,GAItB6E,EAASN,EAAKO,aAAaH,EAAS,IAExC,GADAE,EAASA,GAAUN,EAAKQ,aAAajD,GACrC,CACE,IAAIkD,EAAUvH,KAAKyG,UAAUe,OAAOjF,EAAG,GACvCvC,KAAK0G,MAAM9E,KAAK2F,EAAQ,SAK1BT,EAAKW,WACLX,EAAKY,MAAMR,GACXJ,EAAKa,YAAY3H,KAAK+C,QAAQwD,SAC9BO,EAAKc,OAAOvD,GACZyC,EAAKtG,QAAQ6D,GAGfrE,KAAK4G,a,2BAGP,SAAcvC,GAEZA,EAAIwD,UAAJ,mBACAxD,EAAIyD,KAAO,oCACXzD,EAAI0D,aAAe,MAEnB,IAAI9E,EAAIjD,KAAK+C,QAAQyB,QAAU,GAC3BxB,EAAIhD,KAAK+C,QAAQ0B,QAAUzE,KAAK+C,QAAQe,YAAc,GAE1DO,EAAI2D,SAAJ,gBAAsBhI,KAAK2G,eAAiB1D,EAAGD,GAC/CqB,EAAI2D,SAAJ,iBACYhI,KAAKyG,UAAUjE,OAD3B,cACuCxC,KAAK+C,QAAQuD,WAClDrD,EACAD,EAAI,IAENqB,EAAI2D,SAAJ,iBAAuBhI,KAAK4G,UAAY3D,EAAGD,EAAI,M,kCAGjD,WAEE,IAAIiF,EAAM,EACNC,EAAU,EAcd,GAbAlI,KAAK0G,MAAMhF,SAAQ,SAACoF,GAClBA,EAAKtD,MAAQsD,EAAKtD,MAAQsD,EAAKtD,MAC/ByE,GAAOnB,EAAKtD,SAEdxD,KAAK0G,MAAMhF,SAAQ,SAACoF,GAClBA,EAAKqB,QAAUrB,EAAKtD,MAAQyE,EACxBnB,EAAKqB,QAAUD,IACjBA,EAAUpB,EAAKqB,YAMfnI,KAAKyG,UAAUjE,OAAS,EAC1B,MAAM,IAAI4F,MAAM,4BAGlB,IAAK,IAAI7F,EAAI,EAAGA,EAAIvC,KAAK+C,QAAQuD,UAAW/D,IAAK,CAE/C,IAEImB,EAFS1D,KAAKqI,UAECC,eAEnB5E,EAAM6E,OAAO,IACb,IAAIC,EAAQ,IAAI1F,EAAK,CACnBC,QAAS/C,KAAK+C,QACdC,EAAGhD,KAAK+G,aACRrD,MAAOA,IAGT1D,KAAKyG,UAAU7E,KAAK4G,GAItB,IAAK,IAAIjG,EAAI,EAAGA,EAAIvC,KAAK0G,MAAMlE,OAAQD,IAAK,CAC/BvC,KAAK0G,MAAMnE,GACjBkG,eAEPzI,KAAK0G,MAAQ,GAEb1G,KAAK2G,gBACL3G,KAAK4G,SAAW,I,qBAGlB,WAGE,IAFA,IAAI8B,EAAM,EACNC,EAAIlG,KAAKC,SACNiG,EAAI,GACTA,GAAK3I,KAAK0G,MAAMgC,GAAKP,QACrBO,IAIF,OAFAA,IACa1I,KAAK0G,MAAMgC,O,KCpKPE,E,WACnB,WAAYxL,GAAQ,oBAClB4C,KAAK+C,QAAU3F,EAAM2F,QACrB/C,KAAKiD,EAAI7F,EAAM6F,EACfjD,KAAKX,IAAMjC,EAAMiC,IAEjBW,KAAKmD,gBAAgBnD,KAAKX,KAC1BW,KAAK6I,gBAAgB7I,KAAKiD,GAE1BjD,KAAK8I,UAAW,E,0CAGlB,SAAOzE,GACLrE,KAAKiD,GAAKjD,KAAK+C,QAAQgG,KACvB/I,KAAK6I,gBAAgB7I,KAAKiD,GAC1BjD,KAAKgJ,WAAW3E,K,qBAGlB,SAAQA,GACNA,EAAIE,OADO,MAGwCvE,KAAK+C,QAAlDyB,EAHK,EAGLA,QAASC,EAHJ,EAGIA,QAASwE,EAHb,EAGaA,UAAWnF,EAHxB,EAGwBA,YACnCO,EAAIK,UAAUF,EAASC,GACvBJ,EAAIwD,UAAY,kBAChBxD,EAAI6E,SAASlJ,KAAKiD,EAAG,EAAGgG,EAAWjJ,KAAKX,KACxCgF,EAAI6E,SAASlJ,KAAKiD,EAAGjD,KAAKiE,OAAQgF,EAAWnF,EAAc9D,KAAKiE,QAEhEI,EAAIQ,Y,wBAGN,SAAWR,GAGLrE,KAAKiD,GAAKjD,KAAK+C,QAAQkG,YACzBjJ,KAAK8I,UAAW,K,6BAIpB,SAAgBzJ,GACdW,KAAKX,IAAMA,EACXW,KAAKiE,OAAS5E,EAAMW,KAAK+C,QAAQoG,U,6BAGnC,SAAgBlG,GACdjD,KAAKd,KAAO+D,EACZjD,KAAKkD,MAAQD,EAAIjD,KAAK+C,QAAQkG,c,KC1C5BhD,E,WACJ,aAAyB,IAAb7I,EAAY,uDAAJ,GAAI,oBACtB4C,KAAKkG,WAAW9I,G,8CAGlB,SAAWA,GAET4C,KAAKmG,SAAW/I,EAAM+I,SACtBnG,KAAKoG,UAAYhJ,EAAMgJ,UAEvBpG,KAAKqG,gBAAkBjJ,EAAMiJ,gBAC7BrG,KAAK6D,WAAa7D,KAAKmG,SAAWnG,KAAKqG,gBACvCrG,KAAK8D,YAAc0B,EAAoBG,IAAID,EAG3C1F,KAAKwE,SAAWxE,KAAKmG,SAAWnG,KAAK6D,YAAc,EACnD7D,KAAKyE,SAAWzE,KAAKoG,UAAYpG,KAAK8D,aAAe,EAGrD9D,KAAKoJ,SAAW,IAChBpJ,KAAKiJ,UAAY,GACjBjJ,KAAKmJ,QAAU,IACfnJ,KAAK+I,MAAQ,M,KAIIM,E,WACnB,WAAYjM,GAAQ,oBAClB4C,KAAK+C,QAAU,IAAIkD,EAAQ7I,GAC3B4C,KAAKsJ,U,0CAGP,SAAOlM,GACL4C,KAAK+C,QAAQmD,WAAW9I,GACxB4C,KAAKsJ,Y,qBAGP,WACEtJ,KAAK4D,MAAQ,GADL,MAEkC5D,KAAK+C,QAAzCc,EAFE,EAEFA,WAEF0F,EAJI,EAEUH,SAFV,EAEoBH,UAIxBO,EAAa3F,EACb4F,EAAUhH,KAAKiH,KAAK7F,EAAa0F,GACrCE,GAAW,EACXzJ,KAAK2J,WAAa,EAGlB,IAAK,IAAIpH,EAAI,EAAGA,EAAIkH,EAASlH,IAAK,CAChC,IAAIU,EAAIuG,EAAaD,EAAgBhH,EACjClD,EAAMW,KAAK4J,eACX7F,EAAO,IAAI6E,EAAK,CAAE7F,QAAS/C,KAAK+C,QAASE,IAAG5D,QAEhD0E,EAAK8F,GAAKtH,EACVvC,KAAK4D,MAAMhC,KAAKmC,M,iBAIpB,SAAIM,GAGF,IAHQ,IAAD,EACgCrE,KAAK+C,QAAtCqG,EADC,EACDA,SAAUH,EADT,EACSA,UAAWE,EADpB,EACoBA,QAElB5G,EAAI,EAAGA,EAAIvC,KAAK4D,MAAMpB,OAAQD,IAAK,CAC1C,IAAIwB,EAAO/D,KAAK4D,MAAMrB,GACtB,GAAIwB,EAAK+E,SAAU,CACjB9I,KAAK2J,WAAapH,EAAIvC,KAAK4D,MAAMpB,OAAS,EAAID,EAAI,EAAI,EACtD,IAAIuH,EAAOvH,EAAI,EAAIA,EAAI,EAAIvC,KAAK4D,MAAMpB,OAAS,EAE/CsH,EAAO9J,KAAK4D,MAAMkG,GAClB/F,EAAKd,EAAI6G,EAAK7G,EAAIgG,EAAYG,EAC9BrF,EAAKZ,gBAAgBnD,KAAK4J,eAAgBT,GAC1CpF,EAAK+E,UAAW,EAElB/E,EAAK6D,OAAOvD,GACZN,EAAKvD,QAAQ6D,M,0BAIjB,WAAgB,IAAD,EACkBrE,KAAK+C,QAA9Be,EADO,EACPA,YAAaqF,EADN,EACMA,QACf9J,EAAM,EAGV,OAFAA,GAAqB,GAAdyE,EACPzE,GAAOoD,KAAKuE,MAAMvE,KAAKC,UAA0B,GAAdoB,EAAoBqF,M,iCAIzD,SAAoBlG,GAAa,IAAV8G,EAAS,uDAAH,EAC3BA,EAAMtH,KAAK6B,IAAIyF,EAAK/J,KAAK4D,MAAMpB,QAC/B,IAAI0E,EAAW,GACXwB,EAAM1I,KAAK2J,WACX3J,KAAK4D,MAAM5D,KAAK2J,YAAYzG,MAAQD,IACtCyF,EAAMA,EAAM1I,KAAK4D,MAAMpB,OAAS,EAAIkG,EAAM,EAAI,GAEhD,IAAK,IAAInG,EAAI,EAAGA,EAAIwH,EAAKxH,IACvB2E,EAAStF,KAAK5B,KAAK4D,MAAM8E,IACzBA,EAAMA,EAAM1I,KAAK4D,MAAMpB,OAAS,EAAIkG,EAAM,EAAI,EAEhD,OAAOxB,M,KClGE8C,EAAb,4FAGE,WAEE,OAAuB,EAAhBvH,KAAKC,SAAe,IAL/B,2BAQE,WAEE,OAAwB,EAAhBD,KAAKC,SAAe,GAAK,MAVrC,KAcauH,EAAb,kDACE,aAAyB,IAAD,EAAZ7M,EAAY,uDAAJ,GAAI,4BACtB,cAAMA,IACD8M,QAAU9M,EAAM8M,QACrB,EAAKC,KAAO/M,EAAM+M,KAClB,EAAKC,MAAQhN,EAAMgN,OAAS,EAE5B,EAAKC,cAAgB,GACrB,EAAKC,YAAc,GAEflN,EAAM+M,OAASI,EAAUC,GAC3B,EAAKC,WAEP,EAAKvJ,WAAa9D,EAAM8D,YAAc,WACtC,EAAKwJ,SAAW,EAbM,EAD1B,4CAiBE,WACE1K,KAAK2K,KAAO3K,KAAK4K,iBAlBrB,wBAqBE,WACMnI,KAAKC,SAAW,GAElB1C,KAAK2K,MAAQ3K,KAAK6K,gBAGlB7K,KAAKyK,aA3BX,8BA+BE,cA/BF,kBAiCE,WACE,IAAIhJ,EAAS,IAAIwI,EAAS,CACxBC,QAASlK,KAAKkK,QACdC,KAAMnK,KAAKmK,KACXC,MAAOpK,KAAKoK,MACZlJ,WAAYlB,KAAKkB,aAOnB,OALAO,EAAO4I,cAAgBrK,KAAKqK,cAAc/H,QAC1Cb,EAAO6I,YAActK,KAAKsK,YAAYhI,QACtCb,EAAOkJ,KAAO3K,KAAK2K,KAGZlJ,MA7CX,GAA8BuI,GAiDjBc,EAAb,kDACE,aAAyB,IAAD,EAAZ1N,EAAY,uDAAJ,GAAI,4BACtB,cAAMA,IACD2N,OAAS3N,EAAM2N,OACpB,EAAKZ,KAAO/M,EAAM+M,KAClB,EAAKa,KAAO5N,EAAM4N,KAClB,EAAKC,GAAK7N,EAAM6N,GAEhB,EAAKC,SAAU,EACf,EAAKC,WAAW/N,EAAM+E,QARA,EAD1B,8CAYE,SAAWA,GACTnC,KAAKmC,OAASA,GAAUnC,KAAK4K,iBAbjC,0BAgBE,WACMnI,KAAKC,SAAW,GAElB1C,KAAKmC,QAAUnC,KAAK6K,gBAGpB7K,KAAKmL,eAtBX,qBA0BE,WACEnL,KAAKkL,SAAU,IA3BnB,kBA8BE,WACE,IAAIzJ,EAAS,IAAIqJ,EAAe,CAC9BC,OAAQ/K,KAAK+K,OACbZ,KAAMnK,KAAKmK,KACXa,KAAMhL,KAAKgL,KACXC,GAAIjL,KAAKiL,KAKX,OAHAxJ,EAAOU,OAASnC,KAAKmC,OACrBV,EAAOyJ,QAAUlL,KAAKkL,QAEfzJ,MAxCX,GAAoCuI,GC1DrBoB,EAPI,CACjBC,SAAU,SAACpI,GAAD,OAAOA,GACjBqI,QAAS,SAACrI,GAAD,OAAO,GAAK,EAAIR,KAAK8I,IAAI9I,KAAK+I,GAAI,EAAIvI,KAC/CwI,gBAAiB,SAACxI,GAAD,OAAO,GAAK,EAAIR,KAAK8I,IAAI9I,KAAK+I,GAAI,IAAMvI,KACzDyI,KAAM,SAACzI,GAAD,OAAQA,EAAI,EAAI,EAAI,ICDfsH,EAAY,CACvBC,EAAG,aACHmB,EAAG,cACHC,EAAG,eAGQC,EACR,eADQA,EAER,iBAGgBC,E,WACnB,WAAY1O,GAAQ,oBAClB4C,KAAK+C,QAAU3F,EAAM2F,QACrB/C,KAAK+L,UAAY/L,KAAK+C,QAAQgJ,UAC9B/L,KAAKgM,WAAahM,KAAK+C,QAAQiJ,WAG/BhM,KAAKiM,MAAQ,GACbjM,KAAKkM,QAAU,GACflM,KAAKmM,QAAU,GAEX/O,EAAMgP,UACRpM,KAAKqM,e,4CAIT,SAASjP,GAAQ,IACT8M,EAAmB9M,EAAnB8M,QAASoC,EAAUlP,EAAVkP,MACXC,EAAO,IAAItC,EAAS7M,GAOxB,YANcsB,IAAV4N,IACFA,EAAQtM,KAAKiM,MAAMzJ,QAErBxC,KAAKiM,MAAMzE,OAAO8E,EAAO,EAAGpC,GAC5BlK,KAAKkM,QAAQhC,GAAWqC,EAEjBA,I,sBAGT,SAASnP,GAAQ,IACT2N,EAAqB3N,EAArB2N,OAAQC,EAAa5N,EAAb4N,KAAMC,EAAO7N,EAAP6N,GAChBuB,EAAO,IAAI1B,EAAe1N,GAM9B,OALA4C,KAAKmM,QAAQpB,GAAUyB,EAEvBxM,KAAKkM,QAAQlB,GAAMX,cAAczI,KAAKmJ,GACtC/K,KAAKkM,QAAQjB,GAAIX,YAAY1I,KAAKmJ,GAE3ByB,I,0BAGT,WACE,IAAK,IAAIjK,EAAI,EAAGA,EAAIvC,KAAK+L,UAAWxJ,IAAK,CACvC,IAAI2H,EAAUlK,KAAK+C,QAAQ0J,iBAC3BzM,KAAK0M,SAAS,CACZxC,UACAC,KAAMI,EAAUC,EAChBJ,MAAO,IAGX,IAAK,IAAI7H,EAAI,EAAGA,EAAIvC,KAAKgM,WAAYzJ,IAAK,CACxC,IAAI2H,EAAUlK,KAAK+C,QAAQ0J,iBAC3BzM,KAAK0M,SAAS,CACZxC,UACAC,KAAMI,EAAUqB,EAChBxB,MAAO,EACPlJ,WAAY,oBAIhB,IAAK,IAAIqB,EAAI,EAAGA,EAAIvC,KAAK+L,UAAWxJ,IAClC,IAAK,IAAIoK,EAAI3M,KAAK+L,UAAWY,EAAI3M,KAAK+L,UAAY/L,KAAKgM,WAAYW,IAAK,CACtE,IAAI5B,EAAS/K,KAAK+C,QAAQ6J,gBAC1B5M,KAAK6M,SAAS,CAAE9B,SAAQZ,KAAM0B,EAAab,KAAMzI,EAAG0I,GAAI0B,O,qBAK9D,SAAQxL,GAIN,IAHA,IAAI2L,EAAS,GAGJvK,EAAI,EAAGA,EAAIvC,KAAKiM,MAAMzJ,OAAQD,IAAK,CAC1C,IAAI2H,EAAUlK,KAAKiM,MAAM1J,GACrBgK,EAAOvM,KAAKkM,QAAQhC,GAExB,GAAIqC,EAAKpC,OAASI,EAAUC,EAA5B,CAMA,IADA,IAAIuC,EAAc,EACTC,EAAI,EAAGA,EAAIT,EAAKjC,YAAY9H,OAAQwK,IAAK,CAChD,IAAIjC,EAASwB,EAAKjC,YAAY0C,GAC1BR,EAAOxM,KAAKmM,QAAQpB,GACpByB,EAAKtB,UACP6B,GAAe/M,KAAKkM,QAAQM,EAAKxB,MAAMN,SAAW8B,EAAKrK,QAG3D,IAAI8K,EAAO7B,EAAWmB,EAAKrL,YAC3BqL,EAAK7B,SAAWuC,EAAKF,EAAcR,EAAK5B,MACpC4B,EAAKpC,OAASI,EAAUqB,GAC1BkB,EAAOlL,KAAK2K,EAAK7B,eAfjB6B,EAAK7B,SAAWvJ,EAAMoB,GAmB1B,OAAOuK,I,kBAGT,WACE,IAAIrL,EAAS,IAAIqK,EAAO,CAAE/I,QAAS/C,KAAK+C,UAGxC,IAAK,IAAImH,KAFTzI,EAAOwK,MAAQjM,KAAKiM,MAAM3J,QAENtC,KAAKkM,QACvBzK,EAAOyK,QAAQhC,GAAWlK,KAAKkM,QAAQhC,GAASvG,OAGlD,IAAK,IAAIoH,KAAU/K,KAAKmM,QACtB1K,EAAO0K,QAAQpB,GAAU/K,KAAKmM,QAAQpB,GAAQpH,OAGhD,OAAOlC,I,8BAGT,c,uBAEA,SAAUyL,GAGR,IAAIC,EAASC,EAETpN,KAAKmI,QAAU+E,EAAQ/E,SACzBgF,EAAUnN,KACVoN,EAAUF,IAEVC,EAAUD,EACVE,EAAUpN,MAGZ,IAAIwI,EAAQ,IAAIsD,EAAO,CAAE/I,QAAS/C,KAAK+C,UAKvC,IAAK,IAAImH,KAJT1B,EAAMyD,MAAQkB,EAAQlB,MAAM3J,QAIR6K,EAAQjB,QAC1B1D,EAAM0D,QAAQhC,GAAWiD,EAAQjB,QAAQhC,GAASvG,OAC9CuG,KAAWkD,EAAQlB,SACjBzJ,KAAKC,SAAW,KAClB8F,EAAM0D,QAAQhC,GAASS,KAAOyC,EAAQlB,QAAQhC,GAASS,MAK7D,IAAK,IAAII,KAAUoC,EAAQhB,QACzB3D,EAAM2D,QAAQpB,GAAUoC,EAAQhB,QAAQpB,GAAQpH,OAC5CoH,KAAUqC,EAAQjB,SAChB1J,KAAKC,SAAW,KAGlB8F,EAAM2D,QAAQpB,GAAUqC,EAAQjB,QAAQpB,GAAQpH,QAKtD,OAAO6E,I,oBAGT,WAA+B,IAAxB6E,EAAuB,wDAC5B,IAAK,IAAItC,KAAU/K,KAAKmM,QAAS,CAC/B,IAAIK,EAAOxM,KAAKmM,QAAQpB,GACpBtI,KAAKC,SAAW,IAAK8J,EAAKc,eAEhC,IAAK,IAAIpD,KAAWlK,KAAKkM,QAAS,CAChC,IAAIK,EAAOvM,KAAKkM,QAAQhC,GACpBzH,KAAKC,SAAW,IAAK6J,EAAKgB,aAI5BF,IACA5K,KAAKC,SAAW,KAAM1C,KAAKwN,UAC3B/K,KAAKC,SAAW,KAAM1C,KAAKyN,a,kCAUjC,SAAqB/E,GACnB,OAAO1I,KAAKkM,QAAQlM,KAAKiM,MAAMvD,M,+BAGjC,WACE,IAAIgF,EAAa,GACjB,IAAK,IAAI3C,KAAU/K,KAAKmM,QAAS,CACpBnM,KAAKmM,QAAQpB,GACfG,SAASwC,EAAW9L,KAAKmJ,GAEpC,KAAI2C,EAAWlL,QAAU,GAGzB,OAAOkL,EAAWjL,KAAKuE,MAAMvE,KAAKC,SAAWgL,EAAWlL,W,2BAG1D,WAAuC,IAAD,OAAxBmL,EAAwB,wDAIhCD,EAAa,GACjB,IAAK,IAAIzC,KAAMjL,KAAKkM,QAAS,CAC3BjB,EAAK2C,SAAS3C,GACd,IAAI4C,EAAS7N,KAAKkM,QAAQjB,GAC1B,GAAqB,IAAjB4C,EAAOzD,MAAX,CACA,IAAI0D,EAAOD,EAAOvD,YAAYpI,KAAI,SAAC6I,GACjC,OAAO,EAAKoB,QAAQpB,GAAQC,QAE9B,IAAK,IAAIA,KAAQhL,KAAKkM,QAAS,CAC7BlB,EAAO4C,SAAS5C,GAChB,IAAI+C,EAAW/N,KAAKkM,QAAQlB,GAC5B,GAAI+C,EAAS3D,QAAUyD,EAAOzD,QACF,IAAxB0D,EAAKE,QAAQhD,GAAc,CAC7B,IAAIb,OAAI,EACR,GAAI0D,EAAOzD,MAAQ2D,EAAS3D,MAC1BD,EAAO0B,MACF,CACL,GAAI8B,EAAgB,SACpBxD,EAAO0B,EAET6B,EAAW9L,KAAK,CAAEoJ,OAAMC,KAAId,YAIlC,KAAIuD,EAAWlL,QAAU,GAGzB,OAAOkL,EAAWjL,KAAKuE,MAAMvE,KAAKC,SAAWgL,EAAWlL,W,qBAG1D,WAME,IAAIyL,EAAYjO,KAAKkO,oBACrB,QAAkBxP,IAAduP,EAAyB,OAAO,EACpC,IAeIE,EAAUC,EAfVC,EAAUrO,KAAKmM,QAAQ8B,GAGvBK,EAAYtO,KAAK+C,QAAQwL,aAAa,CACxCC,QAASH,EAAQtD,OACjBC,KAAMqD,EAAQrD,KACdC,GAAIoD,EAAQpD,KAMV8C,EAAW/N,KAAKkM,QAAQmC,EAAQrD,MAChC6C,EAAS7N,KAAKkM,QAAQmC,EAAQpD,IAG9B4C,EAAOzD,MAAQ2D,EAAS3D,OAE1B+D,EAAWJ,EAAS3D,MACpBgE,EAAYP,EAAOzD,QAGnB+D,EAAWN,EAAOzD,MAClBgE,EAAYL,EAAS3D,OAUvB,IARA,IAOIqE,EAPAC,EAAYN,EAAYD,EACxB/D,EAAQ+D,EAAW,EAOd5L,EAAI,EAAGA,EAAIvC,KAAKiM,MAAMzJ,OAAQD,IAAK,CAE1C,GADWvC,KAAK2O,qBAAqBpM,GAC5B6H,OAASA,EAAO,CACvBqE,EAAclM,EACd,OAIJ,GAAImM,GAAa,EACf,IAAK,IAAInM,EAAIkM,EAAalM,EAAIvC,KAAKiM,MAAMzJ,OAAQD,IAAK,CACzCvC,KAAK2O,qBAAqBpM,GAChC6H,QApDD,IAyDFF,EAA8BoE,EAA9BpE,QAAS0E,EAAqBN,EAArBM,QAASC,EAAYP,EAAZO,QACxB7O,KAAK0M,SAAS,CACZxC,UACAC,KAAMI,EAAUoB,EAChBvB,QACAkC,MAAOmC,EACPvN,WAAY,oBAIdlB,KAAK6M,SAAS,CACZ9B,OAAQ6D,EACRzE,KAAMkE,EAAQlE,KACda,KAAMqD,EAAQrD,KACdC,GAAIf,EACJ/H,OAAQ,IAEVnC,KAAK6M,SAAS,CACZ9B,OAAQ8D,EACR1E,KAAMkE,EAAQlE,KACda,KAAMd,EACNe,GAAIoD,EAAQpD,GACZ9I,OAAQkM,EAAQlM,SAGlBkM,EAAQS,Y,qBAGV,WAEE,IAAIC,EAAU/O,KAAKgP,cAAchP,KAAK+C,QAAQ4K,gBAE9C,QAAgBjP,IAAZqQ,EAAuB,OAAO,EAJ1B,IAKF/D,EAAmB+D,EAAnB/D,KAAMC,EAAa8D,EAAb9D,GAAId,EAAS4E,EAAT5E,KAOVY,EAHU/K,KAAK+C,QAAQwL,aAAa,CAAEvD,OAAMC,OAG5CF,OACN/K,KAAK6M,SAAS,CACZ9B,SACAZ,OACAa,OACAC,S,yBAIJ,SAAYgE,GACV,KAAMA,aAAiBnD,GACrB,MAAM,IAAI1D,MACR,4DAIJ,IAAI8G,EAAW,GACXC,EAAS,GACTC,EAAY,GAChB,IAAK,IAAIrE,KAAU/K,KAAKmM,SACtBpB,EAAS6C,SAAS7C,MACJkE,EAAM9C,QAClB+C,EAAStN,KAAKmJ,GAEdoE,EAAOvN,KAAKmJ,GAGhB,IAAK,IAAIA,KAAUkE,EAAM9C,SACvBpB,EAAS6C,SAAS7C,MACF/K,KAAKmM,SACnBiD,EAAUxN,KAAKmJ,GAQnB,IALA,IAAIsE,EAAIH,EAAS1M,OAASC,KAAKkD,IAAIwJ,EAAO3M,OAAQ4M,EAAU5M,QACxD8M,EAAc7M,KAAKkD,IAAL,MAAAlD,KAAYyM,GAE1BK,EAAc,EACdC,EAAY,EACPjN,EAAI,EAAGA,EAAI4M,EAAO3M,OAAQD,IAAK,CACzB4M,EAAO5M,GACP+M,EAAaC,IACrBC,IAEP,IAAK,IAAIjN,EAAI,EAAGA,EAAI6M,EAAU5M,OAAQD,IAAK,CAC5B6M,EAAU7M,GACV+M,EAAaC,IACrBC,IAIP,IADA,IAAIC,EAAa,EACRlN,EAAI,EAAGA,EAAI2M,EAAS1M,OAAQD,IAAK,CACxC,IAAIwI,EAASmE,EAAS3M,GAClBmN,EAAW1P,KAAKmM,QAAQpB,GAAQ5I,OAChCwN,EAAcV,EAAM9C,QAAQpB,GAAQ5I,OACxCsN,GAAchN,KAAKmN,IAAIF,EAAWC,GA7CnB,MAoDgB3P,KAAK+C,QAAhC8M,EApDW,EAoDXA,OAAQC,EApDG,EAoDHA,OAAQC,EApDL,EAoDKA,OAClBC,EAAUH,EAASL,EAAaH,EAIpC,OAHAW,GAAWF,EAASP,EAAeF,EAC/BH,EAAS1M,OAAS,IAAGwN,GAAWD,EAASN,EAAcP,EAAS1M,QAE7DwN,M,KCnZUC,E,WACnB,WAAY7S,GAAQ,wBACZ2F,EAA8B3F,EAA9B2F,QADW,EACmB3F,EAArBgP,gBADE,SAEjBpM,KAAK+C,QAAUA,EACf/C,KAAKkQ,aAAUxR,EACfsB,KAAKmQ,gBAAazR,EAElBsB,KAAKoQ,IAAM,GACXpQ,KAAKwD,MAAQ,EACbxD,KAAKqQ,mBAAgB3R,EACjB0N,IACFpM,KAAKoM,SAAWA,EAChBpM,KAAKsQ,OAAS,IAAIxE,EAAO,CAAE/I,UAASqJ,c,yCAKxC,SAAMvC,GACJ7J,KAAKkQ,QAAUrG,I,mBAEjB,WACE,OAAO7J,KAAKkQ,U,wBAEd,SAAWC,GACTnQ,KAAKmQ,WAAaA,I,wBAEpB,WACE,OAAOnQ,KAAKmQ,a,qBAGd,WAAgC,IAAxB9C,EAAuB,wDAGzB7E,EAAQ,IAAIyH,EAAM,CAAElN,QAAS/C,KAAK+C,UAGtC,OAFAyF,EAAM8H,OAAStQ,KAAKsQ,OAAO3M,OAC3B6E,EAAM8H,OAAO/H,OAAO8E,GACb7E,I,oBAGT,SAAO0E,GACL,KAAMA,aAAmB+C,GACvB,MAAM,IAAI7H,MAAM,qCAGlB,IAAII,EAAQ,IAAIyH,EAAM,CAAElN,QAAS/C,KAAK+C,UAEtC,OADAyF,EAAM8H,OAAStQ,KAAKsQ,OAAOC,UAAUrD,EAAQoD,QACtC9H,I,yBAGT,SAAYyG,GACV,OAAOjP,KAAKsQ,OAAOE,YAAYvB,EAAMqB,U,mBAGvC,SAAMjM,EAAKoM,GAETzQ,KAAKoQ,IAAI5I,OAAO,EAAGxH,KAAKoQ,IAAI5N,QAC5BxC,KAAKwD,MAAQ,EAUb,IARA,IAAIpC,EAAK,CACP,CAAC,EAAG,GACJ,CAAC,EAAG,GACJ,CAAC,EAAG,GACJ,CAAC,EAAG,IAEFsP,EAAK,CAAC,EAAG,EAAG,EAAG,GAEVnO,EAAI,EAAGA,EAAInB,EAAGoB,OAAQD,IAAK,CAClC,IAAIU,EAAI7B,EAAGmB,GACPS,EAAI0N,EAAGnO,GACPuK,EAAS9M,KAAKsQ,OAAOjP,QAAQ4B,GAAG,GACpCjD,KAAKoQ,IAAIxO,KAAKkL,GACd9M,KAAKwD,OAAS,GAAKR,EAAI8J,IAAW9J,EAAI8J,M,iBAM1C,SAAIzI,EAAKsM,GACP,GAA4B,kBAAjB3Q,KAAKkQ,QAAhB,CAIA7L,EAAIE,OACJ,IAAIV,EAAa7D,KAAK+C,QAAQc,WAC1B+M,EAAY5Q,KAAK+C,QAAQ6N,UACzBC,EAAa7Q,KAAK+C,QAAQ8N,WAE1BC,EAASrO,KAAKuE,MAAMnD,EAAa+M,GAEjCG,EAAUJ,EAAQG,EAAUF,EAC5BI,EAASvO,KAAKuE,MAAM2J,EAAQG,GAAUD,EAE1CxM,EAAIK,UAAUqM,EAAQC,GAGtB,IAAI9E,EAAUlM,KAAKsQ,OAAOpE,QACtBC,EAAUnM,KAAKsQ,OAAOnE,QACtB8E,EAAS,GACb,IAAK,IAAI/G,KAAWgC,EAAS,CAC3B,IAAIK,EAAOL,EAAQhC,GACfE,EAAQmC,EAAKnC,MACXA,KAAS6G,IACbA,EAAO7G,GAAS,IAElB6G,EAAO7G,GAAOxI,KAAK2K,GAErB,IAAI2E,EAAeC,OAAOC,KAAKH,GAAQzO,OAEvC6B,EAAIgN,UAAY,SAChBhN,EAAI0D,aAAe,SACnB1D,EAAIyD,KAAO,MACXzD,EAAIiN,yBAA2B,mBAE/BjN,EAAIM,YAAJ,qBACAN,EAAIO,WAAW,EAAG,EAAGgM,EAAWC,GAEhC,IAAIU,EAAY,GAChB,IAAK,IAAInH,KAAS6G,EAEhB,IADA,IAAIO,EAAaP,EAAO7G,GACf7H,EAAI,EAAGA,EAAIiP,EAAWhP,OAAQD,IAAK,CAC1C,IAAIgK,EAAOiF,EAAWjP,GAClBkP,GAAU7D,SAASxD,GAAS,GAAKwG,GAAcM,EAAe,GAC9DQ,GAAUnP,EAAI,GAAKsO,GAAeW,EAAWhP,OAAS,GACtD4H,EAAQ,IAAM,IAAGsH,GAASb,GAAcW,EAAWhP,OAAS,GAAK,GACrE+O,EAAUhF,EAAKrC,SAAW,CAACuH,EAAOC,GAClCrN,EAAIE,OACJF,EAAIK,UAAU+M,EAAOC,GAErBrN,EAAI2D,SAAJ,UAAgBuE,EAAKrC,SAAW,EAAG,GAEnC7F,EAAIM,YAAJ,mBACAN,EAAIwD,UAAJ,yBACAxD,EAAIsN,YACJtN,EAAIuN,IAAI,EAAG,EAAG,EAAG,EAAa,EAAVnP,KAAKoP,IACzBxN,EAAIyN,SACJzN,EAAI0N,OAEJ1N,EAAIQ,UAKR,IAAK,IAAIkG,KAAUoB,EAAS,CAC1B,IAAIK,EAAOL,EAAQpB,GACnB,GAAKyB,EAAKtB,QAAV,CACA,IAAI6C,EAAWwD,EAAU/E,EAAKxB,MAC1B6C,EAAS0D,EAAU/E,EAAKvB,IACxBuB,EAAKrC,OAAS0B,GAChBxH,EAAIE,OACJF,EAAIM,YAAc3E,KAAKgS,UAAUxF,EAAKrK,QACtCkC,EAAIsN,YACJtN,EAAI4N,OAAOlE,EAAS,GAAIA,EAAS,IACjC1J,EAAI6N,YAAY,CAAC,EAAG,IACpB7N,EAAI8N,kBACDpE,EAAS,GAAKF,EAAO,IAAM,EAC5BA,EAAO,GACPA,EAAO,GACPA,EAAO,IAETxJ,EAAIyN,SACJzN,EAAIQ,YAEJR,EAAIE,OACJF,EAAIM,YAAc3E,KAAKgS,UAAUxF,EAAKrK,QACtCkC,EAAIsN,YACJtN,EAAI4N,OAAOlE,EAAS,GAAIA,EAAS,IACjC1J,EAAI+N,OAAOvE,EAAO,GAAIA,EAAO,IAC7BxJ,EAAIyN,SACJzN,EAAIQ,YAKRR,EAAIgN,UAAY,OAChBhN,EAAI2D,SAAJ,WAAiBhI,KAAKmQ,YAAc,EAAG,IACvC,IAAIkC,EAAY5P,KAAK6P,MAAmB,IAAbtS,KAAKwD,OAAe,IAC/Ca,EAAI2D,SAAJ,UAAgBqK,GAAa,EAAG,IAEhChO,EAAIwD,UAAJ,qBAA8B,GAAM7H,KAAKmQ,WAAa,GAAtD,KACA9L,EAAI6E,SAAS,EAAG,EAAG0H,EAAWC,GAE9BxM,EAAIQ,a,uBAGN,SAAU1C,GACR,IAAIoQ,EAAQ9P,KAAK6B,IAAI7B,KAAKmN,IAAIzN,GAAS,GACvC,OAAIA,EAAS,EACL,oBAAN,OAA2BoQ,EAA3B,KAEM,qBAAN,OAA4BA,EAA5B,O,oBAIJ,SAAOlO,M,qBAEP,SAAQA,Q,KCrMWmO,E,WACnB,WAAYpV,GAAQ,oBAClB4C,KAAK+C,QAAU3F,EAAM2F,QACrB/C,KAAKmQ,WAAa/S,EAAM+S,WACxBnQ,KAAKyS,WAAarV,EAAMqV,WAExBzS,KAAK0S,eAAiBtV,EAAMuV,MAC5B3S,KAAK4S,OAAS,GACd5S,KAAK6S,WAAa,GAClB7S,KAAK8S,UAAW,EAEhB9S,KAAK+S,WAAa,IAClB/S,KAAKgT,WAAY,EAEjBhT,KAAKiT,UAAY,G,iDAGnB,WAGE,IAFA,IAAIC,EAAOlT,KAAK4S,OAAOpQ,OACnB2Q,EAAU,EACL5Q,EAAI,EAAGA,EAAIvC,KAAK4S,OAAOpQ,OAAQD,IAAK,CAC3C,IAAIoQ,EAAQ3S,KAAK4S,OAAOrQ,GACxBoQ,EAAMtC,cAAgBsC,EAAMnP,MAAQ0P,EACpCC,GAAWR,EAAMtC,cAInB,OAFA8C,EAAU1Q,KAAKkD,IAAIwN,EAAS,KAC5BnT,KAAK+S,WAAaI,EACXA,I,2BAGT,WACEnT,KAAK4S,OAAOQ,MAAK,SAACC,EAAGC,GACnB,OAAOA,EAAE9P,MAAQ6P,EAAE7P,SAErBxD,KAAK8S,UAAW,I,6BAGlB,WACE9S,KAAKuT,gBACL,IAAIC,EAAe,EAAIxT,KAAK+C,QAAQ0Q,gBAChCC,EAAQjR,KAAKuE,MAAMhH,KAAK4S,OAAOpQ,OAASgR,GAC5CE,EAAQjR,KAAKkD,IAAI+N,EAAO,GACxB1T,KAAK4S,OAAS5S,KAAK4S,OAAOtQ,MAAM,EAAGoR,K,wBAGrC,WACE,IAAI1T,KAAKgT,UAMT,OAHKhT,KAAK8S,UACR9S,KAAKuT,gBAEAvT,KAAK4S,OAAO,K,4BAGrB,WACE,OAAO5S,KAAK4S,OAAOpQ,S,2BAGrB,WACExC,KAAKgT,WAAY,EACjBhT,KAAK+S,WAAa,I,2BAGpB,SAAc5K,GACZnI,KAAK+S,WAAa5K,I,+BAGpB,WACE,OAAOnI,KAAK0S,iB,+BAGd,SAAkBiB,GAEhB,IAAIC,EAAQnR,KAAKuE,MAAMvE,KAAKC,SAAW1C,KAAK4S,OAAOpQ,QAEnD,OADAxC,KAAK0S,eAAiB1S,KAAK4S,OAAOgB,GAC3B5T,KAAK0S,iB,6BAGd,WACE,IAAIkB,EAAQnR,KAAKuE,MAAMvE,KAAKC,SAAW1C,KAAK4S,OAAOpQ,QACnD,OAAOxC,KAAK4S,OAAOgB,K,2BAGrB,SAAcjB,GAQZ3S,KAAK6S,WAAWjR,KAAK+Q,K,oBAGvB,WAWE3S,KAAK0S,oBAAiBhU,EACtBsB,KAAK4S,OAAS5S,KAAK6S,WACnB7S,KAAK8S,UAAW,EAChB9S,KAAK6S,WAAa,O,KC7GDgB,E,WACnB,aAAyB,IAAbzW,EAAY,uDAAJ,GAAI,oBACtB4C,KAAKsG,UAAY,GACjBtG,KAAK2G,cAAgB,EACrB3G,KAAK8T,eAAiB,EACtB9T,KAAK+T,YAAc,EAEnB/T,KAAK+L,UAAY,EACjB/L,KAAKgM,WAAa,EAClBhM,KAAKgU,aAAe,EACpBhU,KAAKiU,YAAc,EAEnBjU,KAAK2N,gBAAiB,EAEtB3N,KAAK6P,OAAS,EACd7P,KAAK8P,OAAS,EACd9P,KAAK+P,OAAS,GACd/P,KAAKkU,uBAAyB,EAC9BlU,KAAKyT,gBAAkB,GAEvBzT,KAAK4Q,UAAY,IACjB5Q,KAAK6Q,WAAa,GAElB7Q,KAAKmU,gBAAkB,IAGvBnU,KAAKoU,WAAa,GAClBpU,KAAKkG,WAAW9I,G,8CAGlB,SAAWA,GAET4C,KAAKmG,SAAW/I,EAAM+I,SACtBnG,KAAKoG,UAAYhJ,EAAMgJ,UAEvBpG,KAAK6D,WAAa7D,KAAKmG,SAAYnG,KAAKmG,SAAWnG,KAAK4Q,UACxD5Q,KAAK6D,WAAapB,KAAK6B,IAAItE,KAAK6D,WAA6B,EAAjB7D,KAAK4Q,WACjD,IAAIE,EAASrO,KAAKuE,MAAMhH,KAAK6D,WAAa7D,KAAK4Q,WAC/C5Q,KAAK8D,YAAc9D,KAAKoG,UAAapG,KAAKoG,UAAYpG,KAAK6Q,WAC3D,IAAIwD,EAAS5R,KAAKuE,MAAMhH,KAAKsG,UAAYwK,GACzC9Q,KAAK8D,YAAcrB,KAAK6B,IAAItE,KAAK8D,YAAa9D,KAAK6Q,WAAawD,GAGhErU,KAAKwE,SAAWxE,KAAKmG,SAAWnG,KAAK6D,YAAc,EACnD7D,KAAKyE,SAAWzE,KAAKoG,UAAYpG,KAAK8D,aAAe,I,8BAGvD,WACE,OAAO9D,KAAK2G,gB,8BAEd,WAEE,OADA3G,KAAK2G,gBACE3G,KAAK2G,gB,+BAGd,WACE,OAAO3G,KAAK8T,iB,+BAEd,WAA6B,IAAXZ,EAAU,uDAAH,EAEvB,OADAlT,KAAK8T,gBAAkBZ,EAChBlT,KAAK8T,iB,4BAGd,WACE,OAAO9T,KAAK+T,c,4BAEd,WAEE,OADA/T,KAAK+T,cACE/T,KAAK+T,c,4BAGd,WACE,OAAO/T,KAAKgU,c,4BAEd,WAA0B,IAAXd,EAAU,uDAAH,EAEpB,OADAlT,KAAKgU,aAAed,EACblT,KAAKgU,c,2BAGd,WACE,OAAOhU,KAAKiU,a,2BAEd,WAAyB,IAAXf,EAAU,uDAAH,EAEnB,OADAlT,KAAKiU,YAAcf,EACZlT,KAAKiU,a,0BAGd,SAAaK,GAEX,IAAK,IAAI/R,EAAI,EAAGA,EAAIvC,KAAKoU,WAAW5R,OAAQD,IAAK,CAC/C,IAAIuH,EAAO9J,KAAKoU,WAAW7R,GAE3B,GAAIuH,EAAKkB,OAASsJ,EAAKtJ,MAAQlB,EAAKmB,KAAOqJ,EAAKrJ,IAC1CnB,EAAK0E,UAAY8F,EAAK9F,QAExB,OAAO1E,EAiBb,YAZqBpL,IAAjB4V,EAAK9F,SAEP8F,EAAKpK,QAAUlK,KAAKyM,iBACpB6H,EAAK1F,QAAU5O,KAAK4M,gBACpB0H,EAAKzF,QAAU7O,KAAK4M,gBACpB5M,KAAKoU,WAAWxS,KAAK0S,KAGrBA,EAAKvJ,OAAS/K,KAAK4M,gBACnB5M,KAAKoU,WAAWxS,KAAK0S,IAGhBA,M,KC5GUC,E,WACnB,WAAYnX,GAAQ,oBAClB4C,KAAK+C,QAAU,IAAIkD,EAAQ7I,GAC3B4C,KAAKiT,UAAY,GACjBjT,KAAKwU,SAAW,GAChBxU,KAAKyU,WAAa,GAElBzU,KAAK0U,iB,0CAGP,SAAOtX,GACL4C,KAAK+C,QAAQmD,WAAW9I,K,yBAG1B,SAAYA,GAAQ,IACZ+S,EAAe/S,EAAf+S,WACFwE,EAAU,IAAInC,EAAQpV,GAC1B,OAAI+S,KAAcnQ,KAAKyU,YACrBG,QAAQC,MAAR,6CACwC1E,EADxC,uBAGOnQ,KAAKyU,WAAWtE,KAEzBnQ,KAAKyU,WAAWtE,GAAcwE,EAEvBA,K,4BAGT,WACE,IAAIG,EAAS,IAAI7E,EAAM,CAAElN,QAAS/C,KAAK+C,QAASqJ,UAAU,IACtD8D,EAAUlQ,KAAK+C,QAAQgS,iBAC3BD,EAAOE,MAAM9E,GACb,IAAIC,EAAanQ,KAAK+C,QAAQkS,oBAC1BN,EAAU3U,KAAKkV,YAAY,CAC7BnS,QAAS/C,KAAK+C,QACd0P,WAAYzS,KAAK+C,QAAQoS,mBAAqB,EAC9ChF,aACAwC,MAAOmC,IAETA,EAAOM,WAAWjF,GAElB,IAAK,IAAI5N,EAAI,EAAGA,EAAIvC,KAAK+C,QAAQuD,UAAW/D,IAAK,CAC/C,IAAIiG,EAAQsM,EAAOO,SAAQ,GACvBnF,EAAUlQ,KAAK+C,QAAQgS,iBAC3BvM,EAAMwM,MAAM9E,GACZ1H,EAAM4M,WAAWjF,GACjBwE,EAAQ/B,OAAOhR,KAAK4G,GACpBxI,KAAKwU,SAAStE,GAAW1H,EAG3BxI,KAAKyU,WAAWtE,GAAcwE,EAC9B3U,KAAK+C,QAAQuS,qB,4BAMf,WAGE,IAAIC,EAAkB,EAClBC,EAAoB,GACxB,IAAK,IAAIrF,KAAcnQ,KAAKyU,WAAY,CACtC,IAAIE,EAAU3U,KAAKyU,WAAWtE,GAC9B,IAAIwE,EAAQ3B,UAAZ,CAGAuC,GADiBZ,EAAQc,gBAEzBd,EAAQe,kBAGR,IAAIhD,EAAiBiC,EAAQgB,oBAC7BH,EAAkBrF,GAAcuC,GAmBlC,IAAIkD,EAAY,GAChB,IAAK,IAAIzF,KAAcqF,EAAmB,CACxCrF,EAAavC,SAASuC,GAKtB,IAJA,IACI0F,EADU7V,KAAKyU,WAAWtE,GACL4C,WAAawC,EAClCrC,EAAOzQ,KAAKiH,KAAKmM,EAAa7V,KAAK+C,QAAQuD,WAEtC/D,EAAI,EAAGA,EAAI2Q,EAAM3Q,IACxBqT,EAAUhU,KAAKuO,GAInB,GAAIyF,EAAUpT,OAASxC,KAAK+C,QAAQuD,UAElC,IADA,IAAIwP,EAAO9V,KAAK+C,QAAQuD,UAAYsP,EAAUpT,OACrCD,EAAI,EAAGA,EAAIuT,EAAMvT,IAAK,CAC7B,IACI4N,EAAayF,EADLnT,KAAKuE,MAAMvE,KAAKC,SAAWkT,EAAUpT,SAEjDoT,EAAUhU,KAAKuO,QAGjByF,EAAYA,EAAUtT,MAAM,EAAGtC,KAAK+C,QAAQuD,WAO9C,IAFA,IAAIyP,EAAc,GACdC,EAAoB,GACfzT,EAAI,EAAGA,EAAIqT,EAAUpT,OAAQD,IAAK,CAEzC,IAAI4N,EAAayF,EAAUrT,GACvBoS,EAAU3U,KAAKyU,WAAWtE,GAC1BhD,EAAUwH,EAAQsB,kBAClB7I,EAAUuH,EAAQsB,kBAClBzN,OAAK,EAEPA,EADE2E,IAAYC,GAAW3K,KAAKC,SAAW,IACjCyK,EAAQkI,SAAQ,GAEhBlI,EAAQ+I,OAAO9I,GAGzB,IAAI8C,EAAUlQ,KAAK+C,QAAQgS,iBAG3B,IAAK,IAAI5E,KAFT3H,EAAMwM,MAAM9E,GAEWsF,EAAmB,CACxCrF,EAAavC,SAASuC,GACtB,IAAIwE,EAAU3U,KAAKyU,WAAWtE,GAC1BuC,EAAiB8C,EAAkBrF,GAGvC,GAFW3H,EAAM2N,YAAYzD,GAElB1S,KAAK+C,QAAQmR,uBAAwB,CAC9C1L,EAAM4M,WAAWjF,GACjBwE,EAAQyB,cAAc5N,GACtBwN,EAAkB7F,IAAc,EAChC,OAIJ,QAA2BzR,IAAvB8J,EAAM6N,aAA4B,CACpC,IAAIlG,EAAanQ,KAAK+C,QAAQkS,oBAC1BN,EAAU3U,KAAKkV,YAAY,CAC7BnS,QAAS/C,KAAK+C,QACd0P,WAAYzS,KAAK+C,QAAQoS,mBAAqB,EAC9ChF,aACAwC,MAAOnK,IAETA,EAAM4M,WAAWjF,GACjBwE,EAAQyB,cAAc5N,GACtBwN,EAAkB7F,IAAc,EAChCqF,EAAkBrF,GAAc3H,EAChCxI,KAAKyU,WAAWtE,GAAcwE,EAGhCoB,EAAY7F,GAAW1H,EAGzB,IAAK,IAAI2H,KAAcqF,EAChBQ,EAAkB7F,IACrBnQ,KAAKyU,WAAWtE,GAAYmG,gBAKhC,IAAIC,EAAW,CACb5P,cAAe3G,KAAK+C,QAAQoS,mBAC5BX,SAAUxU,KAAKwU,UAIjB,IAAK,IAAIrE,KAFTnQ,KAAKiT,UAAUrR,KAAK2U,GAEGf,EAAmB,CAC1BxV,KAAKyU,WAAWtE,GACtBvI,SAGV5H,KAAK+C,QAAQuS,mBAEbtV,KAAKwU,SAAWuB,I,iBAKlB,SAAI1R,EAAKoM,GACPpM,EAAIE,OADa,MAEUvE,KAAK+C,QAA1ByB,EAFW,EAEXA,QAASC,EAFE,EAEFA,QACfJ,EAAIK,UAAUF,EAASC,GACvBJ,EAAImS,UAAU,EAAG,EAAGxW,KAAK+C,QAAQc,WAAY7D,KAAK+C,QAAQe,aAC1DO,EAAIO,WAAW,EAAG,EAAG5E,KAAK+C,QAAQc,WAAY7D,KAAK+C,QAAQe,aAC3DO,EAAIwD,UAAJ,mBAEAxD,EAAIE,OACJF,EAAIgN,UAAY,SAChBhN,EAAI0D,aAAe,SACnB1D,EAAIwD,UAAJ,mBACAxD,EAAIyD,KAAO,oCACXzD,EAAI2D,SAAJ,MAEEhI,KAAK+C,QAAQc,WAAa,EAC1B7D,KAAK+C,QAAQe,YAAc,EAAI,IAEjCO,EAAI2D,SAAJ,UACKhI,KAAK+C,QAAQ4D,eAChB3G,KAAK+C,QAAQc,WAAa,EAC1B7D,KAAK+C,QAAQe,YAAc,EAAI,IAEjCO,EAAIQ,UAEJ,IAAI8L,EAAQ,EACZ,IAAK,IAAIT,KAAWlQ,KAAKwU,SAAU,CACjC,IAAI7B,EAAQ3S,KAAKwU,SAAStE,GAC1ByC,EAAMjL,MAAMrD,EAAKoM,GACjBkC,EAAM8D,IAAIpS,EAAKsM,GACfA,IAEFtM,EAAIQ,c,KCxFO6R,E,WA1Ib,aAA2B,IAAfzT,EAAc,uDAAV,EAAGD,EAAO,uDAAH,EAAG,oBACxBhD,KAAKiD,EAAIA,EACTjD,KAAKgD,EAAIA,E,uCAGX,SAAIoB,GASF,OARIA,aAAasS,GACf1W,KAAKiD,GAAKmB,EAAEnB,EACZjD,KAAKgD,GAAKoB,EAAEpB,IAGZhD,KAAKiD,GAAKmB,EACVpE,KAAKgD,GAAKoB,GAELpE,O,iBAGT,SAAIoE,GASF,OARIA,aAAasS,GACf1W,KAAKiD,GAAKmB,EAAEnB,EACZjD,KAAKgD,GAAKoB,EAAEpB,IAGZhD,KAAKiD,GAAKmB,EACVpE,KAAKgD,GAAKoB,GAELpE,O,kBAGT,SAAKoE,GASH,OARIA,aAAasS,GACf1W,KAAKiD,GAAKmB,EAAEnB,EACZjD,KAAKgD,GAAKoB,EAAEpB,IAGZhD,KAAKiD,GAAKmB,EACVpE,KAAKgD,GAAKoB,GAELpE,O,iBAGT,SAAIoE,GASF,OARIA,aAAasS,GACf1W,KAAKiD,GAAKmB,EAAEnB,EACZjD,KAAKgD,GAAKoB,EAAEpB,IAGZhD,KAAKiD,GAAKmB,EACVpE,KAAKgD,GAAKoB,GAELpE,O,oBAGT,SAAOoE,GACL,OAAOpE,KAAKiD,IAAMmB,EAAEnB,GAAKjD,KAAKgD,IAAMoB,EAAEpB,I,iBAGxC,SAAIoB,GACF,OAAOpE,KAAKiD,EAAImB,EAAEnB,EAAIjD,KAAKgD,EAAIoB,EAAEpB,I,oBAGnC,WACE,OAAOP,KAAKkU,KAAK3W,KAAKiD,EAAIjD,KAAKiD,EAAIjD,KAAKgD,EAAIhD,KAAKgD,K,sBAGnD,WACE,OAAOhD,KAAKiD,EAAIjD,KAAKiD,EAAIjD,KAAKgD,EAAIhD,KAAKgD,I,oBAGzC,SAAOoB,GAGL,OAFApE,KAAK4W,YACL5W,KAAK6W,KAAKzS,GACHpE,O,uBAGT,WACE,IAAI8W,EAAI9W,KAAK+W,SAOb,OANU,IAAND,GACF9W,KAAKiD,EAAI,EACTjD,KAAKgD,EAAI,GAEThD,KAAKgX,IAAIF,GAEJ9W,O,mBAGT,SAAMiX,GAIJ,OAHIjX,KAAK+W,SAAWE,GAClBjX,KAAKkX,OAAOD,GAEPjX,O,mBAGT,WACE,OAAO,IAAI0W,EAAS1W,KAAKiD,EAAGjD,KAAKgD,M,kBAGnC,SAAWqQ,EAAGC,GACZ,OAAIA,aAAaoD,EACR,IAAIA,EAASrD,EAAEpQ,EAAIqQ,EAAErQ,EAAGoQ,EAAErQ,EAAIsQ,EAAEtQ,GAEhC,IAAI0T,EAASrD,EAAEpQ,EAAIqQ,EAAGD,EAAErQ,EAAIsQ,K,iBAIvC,SAAWD,EAAGC,GACZ,OAAIA,aAAaoD,EACR,IAAIA,EAASrD,EAAEpQ,EAAIqQ,EAAErQ,EAAGoQ,EAAErQ,EAAIsQ,EAAEtQ,GAEhC,IAAI0T,EAASrD,EAAEpQ,EAAIqQ,EAAGD,EAAErQ,EAAIsQ,K,kBAIvC,SAAYD,EAAGC,GACb,OAAIA,aAAaoD,EACR,IAAIA,EAASrD,EAAEpQ,EAAIqQ,EAAErQ,EAAGoQ,EAAErQ,EAAIsQ,EAAEtQ,GAEhC,IAAI0T,EAASrD,EAAEpQ,EAAIqQ,EAAGD,EAAErQ,EAAIsQ,K,iBAIvC,SAAWD,EAAGC,GACZ,OAAIA,aAAaoD,EACR,IAAIA,EAASrD,EAAEpQ,EAAIqQ,EAAErQ,EAAGoQ,EAAErQ,EAAIsQ,EAAEtQ,GAEhC,IAAI0T,EAASrD,EAAEpQ,EAAIqQ,EAAGD,EAAErQ,EAAIsQ,K,kBAIvC,SAAYD,EAAGC,GAGb,IAAI6D,EAAK9D,EAAEpQ,EAAIqQ,EAAErQ,EACbmU,EAAK/D,EAAErQ,EAAIsQ,EAAEtQ,EACjB,OAAOP,KAAKkU,KAAKQ,EAAKA,EAAKC,EAAKA,O,KCrIfC,E,WACnB,WAAYC,EAAUC,GAAQ,oBAC5BvX,KAAKsX,SAAWA,EAASzV,QACzB7B,KAAKuX,MAAQA,EAEb,IAEIC,GAAQ,EAAI/U,KAAKgV,IAAIF,GAFf,GAEsD,GAAvB9U,KAAKC,SAAW,IACrDgV,GAAQ,EAAIjV,KAAKkV,IAAIJ,GAHf,GAGsD,GAAvB9U,KAAKC,SAAW,IAEzD1C,KAAK4X,SAAW,IAAIlB,EAASc,EAAME,GACnC1X,KAAK6X,aAAe,IAAInB,EAAS,EAAG,GACpC1W,KAAK8X,OAAS,EACd9X,KAAK+X,SAAW,G,uCAGlB,SAAI1T,GACFrE,KAAK4H,OAAOvD,GACZrE,KAAKQ,QAAQ6D,K,oBAGf,SAAOA,GACLrE,KAAK4X,SAAS9W,IAAId,KAAK6X,cACvB7X,KAAKsX,SAASxW,IAAId,KAAK4X,UACvB5X,KAAK+X,UAAY,I,qBAGnB,SAAQ1T,GACNA,EAAIE,OACJF,EAAIwD,UAAJ,yBAAkC7H,KAAK+X,SAAW,GAAlD,KACA1T,EAAIsN,YACJtN,EAAIuN,IAAI5R,KAAKsX,SAASrU,EAAGjD,KAAKsX,SAAStU,EAAGhD,KAAK8X,OAAQ,EAAa,EAAVrV,KAAKoP,IAC/DxN,EAAI0N,OACJ1N,EAAIQ,Y,oBAGN,WACE,OAAO7E,KAAK+X,SAAW,M,KCpCNC,E,WACnB,WAAYC,EAAQV,GAAQ,oBAC1BvX,KAAKiY,OAASA,EAAOpW,QACrB7B,KAAKuX,MAAQA,EACbvX,KAAKkY,UAAY,G,+CAGnB,WACElY,KAAKkY,UAAUtW,KAAK,IAAIyV,EAASrX,KAAKiY,OAAQjY,KAAKuX,U,yBAGrD,SAAYtU,EAAGD,EAAGuU,GAChBvX,KAAKiY,OAAOhV,EAAIA,EAChBjD,KAAKiY,OAAOjV,EAAIA,EAChBhD,KAAKuX,MAAQA,I,iBAGf,SAAIlT,GACF,IAAK,IAAI9B,EAAIvC,KAAKkY,UAAU1V,OAAS,EAAGD,GAAK,EAAGA,IAAK,CACnD,IAAI4V,EAAInY,KAAKkY,UAAU3V,GACvB4V,EAAE1B,IAAIpS,GACF8T,EAAE/Q,UACJpH,KAAKkY,UAAU1Q,OAAOjF,EAAG,Q,KCtBpB6V,EACD,iBADCA,EAEH,eAGWC,E,WACnB,aAAyB,IAAbjb,EAAY,uDAAJ,GAAI,oBACtB4C,KAAK+C,QAAU3F,EAAM2F,QACrB/C,KAAKsY,UAAYtY,KAAK+C,QAAQuV,UAC9BtY,KAAKsX,SAAWtX,KAAKuY,oBACrBvY,KAAK4X,SAAW,IAAIlB,EAAS,EAAG,GAChC1W,KAAK6X,aAAe,IAAInB,EAAS,EAAG,GAEhC1W,KAAKsY,YAAcF,GACrBpY,KAAKwY,SAAW,GAChBxY,KAAKyY,SAAW,KAEhBzY,KAAKwY,SAAW,EAChBxY,KAAKyY,SAAW,IAGlBzY,KAAK0Y,cAAgBjW,KAAKoP,GAAK,EAC/B7R,KAAKuX,MAAQvX,KAAK0Y,aAClB1Y,KAAK2Y,QAAU,IAEf3Y,KAAK4Y,UAAY,GACjB5Y,KAAK6Y,kBAAoB,GACzB7Y,KAAK8Y,aAAe9Y,KAAKsX,SAASzV,QAClC7B,KAAK+Y,oBAAsB,IAC3B/Y,KAAKgZ,iBAAmB,GAIxBhZ,KAAKiZ,UAAY,GAEjBjZ,KAAKkZ,eAAgB,EACrBlZ,KAAKmZ,UAAY,IAAInB,EAAMhY,KAAKsX,SAAUtX,KAAKuX,OAC/CvX,KAAKoZ,WAAa,IAAIpB,EAAMhY,KAAKsX,SAAUtX,KAAKuX,O,4CAGlD,WACEvX,KAAKuX,OAASvX,KAAK2Y,U,uBAGrB,WACE3Y,KAAKuX,OAASvX,KAAK2Y,U,yBAGrB,WACE,IACI1V,EADM,GACFR,KAAKgV,IAAIzX,KAAKuX,OAClBvU,EAFM,GAEFP,KAAKkV,IAAI3X,KAAKuX,OACtBvX,KAAK6X,aAAa5U,EAAIA,EACtBjD,KAAK6X,aAAa7U,EAAIA,I,mBAGxB,SAAM4P,EAAQzU,GACZ,IAAIkb,EAAYC,EAGZ1G,EAAOpQ,OAAS,IAClB6W,EAAarZ,KAAKuZ,SAAS3G,GAC3B5S,KAAKwZ,WAAWH,IAGdlb,EAASmB,mBAAqBU,KAAKyZ,WACrCH,EAAOtZ,KAAK0Z,UAAUvb,GACtB6B,KAAKwZ,WAAWF,KAEZ7W,KAAKC,SAAW1C,KAAK+Y,sBACvB/Y,KAAK8Y,aAAe9Y,KAAKuY,sBAE3Be,EAAOtZ,KAAKsZ,KAAKtZ,KAAK8Y,eACjBjC,KAAK7W,KAAKgZ,kBACfhZ,KAAKwZ,WAAWF,M,+BAIpB,WACE,IAAIrW,EAAIR,KAAKuE,MAAMvE,KAAKC,SAAW1C,KAAK+C,QAAQoD,UAC5CnD,EAAIP,KAAKuE,MAAMvE,KAAKC,SAAW1C,KAAK+C,QAAQqD,WAChD,OAAO,IAAIsQ,EAASzT,EAAGD,K,sBAGzB,SAAS4P,GAGP,IAFA,IAAI3K,EAAM,IAAIyO,EACViD,EAAQ,EACHpX,EAAI,EAAGA,EAAIqQ,EAAOpQ,OAAQD,IAAK,CACtC,IAAIoQ,EAAQC,EAAOrQ,GACfuT,EAAOY,EAASkD,IAAI5Z,KAAKsX,SAAU3E,EAAM2E,UACzC1Q,EAAWkP,EAAK+D,WAElBjT,EAAW,GACXA,EAAW5G,KAAK6Y,kBAAoB7Y,KAAK6Y,oBAIzC/C,EAAKoB,OAAO,EAAItQ,GAChBqB,EAAInH,IAAIgV,GACR6D,KAIJ,OAAIA,EAAQ,GAEV1R,EAAIiP,OAAOlX,KAAKwY,UAChBvQ,EAAI2R,IAAI5Z,KAAK4X,UACb3P,EAAIyL,MAAM1T,KAAKwY,UACRvQ,GAEAA,I,kBAIX,SAAK6R,GACH,IAAIC,EAAUrD,EAASkD,IAAIE,EAAQ9Z,KAAKsX,UACpC0C,EAAKha,KAAKsX,SAASrU,EAAI6W,EAAO7W,EAC9BgX,EAAKja,KAAKsX,SAAStU,EAAI8W,EAAO9W,EAC9BkX,EAAYzX,KAAK0X,MAAMF,EAAID,GAAMvX,KAAKoP,GAEtCuI,EAAIL,EAAQhD,SAChBgD,EAAQnD,YACR,IAAIyD,EAASra,KAAK4Y,UAClB,GAAIwB,EAAIC,EAAQ,CACd,IAAIvD,EAAKsD,EAAIC,EAAUra,KAAKwY,SACxB8B,EAAKta,KAAK0Y,aACdqB,EAAQlD,KAAKC,GACb9W,KAAKuX,MAAQ+C,EAAyBF,EAAIC,GAAvBC,EAAKJ,QAExBH,EAAQlD,KAAK7W,KAAKwY,UAClBxY,KAAKuX,MAAQ2C,EAKf,OAHAH,EAAQH,IAAI5Z,KAAK4X,UACjBmC,EAAQrG,MAAM1T,KAAKyY,UAEZsB,I,uBAIT,SAAU5b,GACR,IAAI2b,EAAS,IAAIpD,EAASvY,EAASa,OAAQb,EAASgB,QACpD,OAAOa,KAAKsZ,KAAKQ,K,0BAGnB,SAAaS,EAAKC,GAChBxa,KAAKiZ,UAAUsB,IAAMA,EACrBva,KAAKiZ,UAAUuB,IAAMA,I,wBAGvB,SAAWC,GACTza,KAAK6X,aAAa/W,IAAI2Z,K,oBAGxB,SAAOpW,GACLrE,KAAK4X,SAAS9W,IAAId,KAAK6X,cACvB7X,KAAK4X,SAASlE,MAAM1T,KAAKwY,UACzBxY,KAAK4X,SAASf,KAAK,KACnB7W,KAAKsX,SAASxW,IAAId,KAAK4X,UACvB5X,KAAK6X,aAAahB,KAAK,GAEnB7W,KAAKsY,YAAcF,GACrBpY,KAAKgJ,WAAW3E,GAElBrE,KAAK0a,YAAYrW,K,yBAGnB,SAAYA,GACV,IAAIsW,EAAUlY,KAAKoP,GAAK,EAGpB+I,EAAY5a,KAAKuX,MAAQoD,EACzBE,EAAQ7a,KAAKsX,SAASrU,GAAI,GAAYR,KAAKgV,IAAImD,GAC/CE,EAAQ9a,KAAKsX,SAAStU,GAAI,GAAYP,KAAKkV,IAAIiD,GACnD5a,KAAKmZ,UAAU4B,YAAYF,EAAOC,EAAOF,GAEzC,IAAII,EAAahb,KAAKuX,MAAQoD,EAC1BM,EAASjb,KAAKsX,SAASrU,GAAI,GAAYR,KAAKgV,IAAIuD,GAChDE,EAASlb,KAAKsX,SAAStU,GAAI,GAAYP,KAAKkV,IAAIqD,GACpDhb,KAAKoZ,WAAW2B,YAAYE,EAAQC,EAAQF,K,sBAG9C,WACE,OAAIhb,KAAKsY,YAAcF,EAEf,yBAEA,2B,qBAIV,SAAQ/T,EAAKlG,GACXkG,EAAIE,OACJF,EAAIK,UAAU1E,KAAKsX,SAASrU,EAAGjD,KAAKsX,SAAStU,GAC7CqB,EAAI8W,OAAOnb,KAAKuX,OAGhBlT,EAAIE,OACJF,EAAIwD,UAAY7H,KAAKob,WACrB/W,EAAIM,YAAJ,mBACAN,EAAIsN,YACJtN,EAAI4N,OAAO,GAAI,GACf5N,EAAI+N,QAAQ,GAAI,IAChB/N,EAAI+N,QAAQ,EAAG,IACf/N,EAAIgX,YACJhX,EAAI0N,OACJ1N,EAAIyN,SACJzN,EAAIQ,UAhBiB,IAkBf7F,EAAmBb,EAAnBa,OAAQG,EAAWhB,EAAXgB,OACV6a,EAAKha,KAAKsX,SAASrU,EAAIjE,EACvBib,EAAKja,KAAKsX,SAAStU,EAAI7D,EACvBmc,EAAW7Y,KAAK0X,MAAMF,EAAID,GAAMha,KAAKuX,MAAQ9U,KAAKoP,GAAK,EAIvD0J,EAAQ,yBAIZlX,EAAIE,OACJF,EAAIK,UAAU,IAAK,GACnBL,EAAI8W,OAAOG,GACXjX,EAAIsN,YACJtN,EAAIuN,IAAI,EAAG,EAAG,EAAG,EAAa,EAAVnP,KAAKoP,IACzBxN,EAAIwD,UAAY0T,EAChBlX,EAAI0N,OACJ1N,EAAIyN,SAEJzN,EAAIsN,YACJtN,EAAIuN,IAAI,EAjBI,EAiBM,EAAG,EAAa,EAAVnP,KAAKoP,IAC7BxN,EAAIwD,UAdU,mBAedxD,EAAI0N,OACJ1N,EAAIQ,UAGJR,EAAIE,OACJF,EAAIK,UAAU,GAAI,GAClBL,EAAI8W,OAAOG,GACXjX,EAAIsN,YACJtN,EAAIuN,IAAI,EAAG,EAAG,EAAG,EAAa,EAAVnP,KAAKoP,IACzBxN,EAAIwD,UAAY0T,EAChBlX,EAAI0N,OACJ1N,EAAIyN,SAEJzN,EAAIsN,YACJtN,EAAIuN,IAAI,EAjCI,EAiCM,EAAG,EAAa,EAAVnP,KAAKoP,IAC7BxN,EAAIwD,UAAJ,mBACAxD,EAAI0N,OACJ1N,EAAIQ,UAGA7E,KAAKkZ,cACP7U,EAAIwD,UAAJ,qBAEAxD,EAAIwD,UAAJ,yBAEFxD,EAAIM,YAAJ,mBAEAN,EAAIsN,YACJtN,EAAIuN,IAAI,EAAG,EAAG,EAAG,EAAa,EAAVnP,KAAKoP,IACzBxN,EAAI0N,OACJ1N,EAAIyN,SAEJzN,EAAIsN,YACJtN,EAAIuN,KAAK,GAAI,EAAG,GAAInP,KAAKoP,GAAK,EAAGpP,KAAKoP,GAAK,GAAG,GAC9CxN,EAAI0N,OACJ1N,EAAIyN,SAEJzN,EAAIsN,YACJtN,EAAIuN,KAAK,EAAG,EAAG,GAAInP,KAAKoP,GAAK,EAAGpP,KAAKoP,GAAK,GAAG,GAC7CxN,EAAI0N,OACJ1N,EAAIyN,SAEJzN,EAAIQ,UAEA7E,KAAKkZ,gBACPlZ,KAAKmZ,UAAUqC,cACfxb,KAAKoZ,WAAWoC,eAElBxb,KAAKmZ,UAAU1C,IAAIpS,GACnBrE,KAAKoZ,WAAW3C,IAAIpS,K,wBAGtB,SAAWA,GACT,IAAIoX,EAAcpX,EAAIqX,OAAOle,MACzBme,EAAetX,EAAIqX,OAAO5d,OAC1BmF,EAAIjD,KAAKsX,SAASrU,EAClBD,EAAIhD,KAAKsX,SAAStU,EAElBC,EAAI,EACNjD,KAAKsX,SAASrU,EAAIwY,EACTxY,EAAIwY,IACbzb,KAAKsX,SAASrU,EAAI,GAGhBD,EAAI,EACNhD,KAAKsX,SAAStU,EAAI2Y,EACT3Y,EAAI2Y,IACb3b,KAAKsX,SAAStU,EAAI,O,KC3SlBiD,E,WACJ,aAAyB,IAAb7I,EAAY,uDAAJ,GAAI,oBACtB4C,KAAKsY,UAAYF,EACjBpY,KAAKsG,UAAY,GACjBtG,KAAKkG,WAAW9I,G,8CAGlB,SAAWA,GAET4C,KAAK4b,SAAW,IAChB5b,KAAKmG,SAAW/I,EAAM+I,SACtBnG,KAAKoG,UAAYhJ,EAAMgJ,UACvBpG,KAAK6b,WAAapZ,KAAKiH,KAAK1J,KAAKoG,UAAYpG,KAAK4b,UAClD5b,KAAK8b,WAAarZ,KAAKiH,KAAK1J,KAAKmG,SAAWnG,KAAK4b,c,KAIhCrH,E,WACnB,WAAYnX,GAAQ,oBAClB4C,KAAK+C,QAAU,IAAIkD,EAAQ7I,GAC3B4C,KAAK4S,OAAS,GACd,IAAK,IAAIrQ,EAAI,EAAGA,EAAIvC,KAAK+C,QAAQuD,UAAW/D,IAAK,CAC/C,IAAIoQ,EAAQ,IAAI1C,EAAM,CAAElN,QAAS/C,KAAK+C,UACtC/C,KAAK4S,OAAOhR,KAAK+Q,GAEnB3S,KAAK+b,W,0CAGP,SAAO3e,GACL4C,KAAK+C,QAAQmD,WAAW9I,K,sBAG1B,WAAY,IAAD,EACwB4C,KAAK+C,QAAhC8Y,EADG,EACHA,WAAYC,EADT,EACSA,WAClB9b,KAAKgc,KAAO,GACZ,IAAK,IAAIzZ,EAAI,EAAGA,EAAIsZ,EAAYtZ,IAAK,CAEnC,IADA,IAAIgY,EAAM,GACD5N,EAAI,EAAGA,EAAImP,EAAYnP,IAC9B4N,EAAI3Y,KAAK,IAEX5B,KAAKgc,KAAKpa,KAAK2Y,M,2BAInB,SAAcvX,GACZ,IAAIuX,EAAM9X,KAAKuE,MAAMhE,EAAIhD,KAAK+C,QAAQ6Y,UACtC,OAAOnZ,KAAKkD,IAAI,EAAGlD,KAAK6B,IAAIiW,EAAKva,KAAK+C,QAAQ8Y,WAAa,M,2BAG7D,SAAc5Y,GACZ,IAAIuX,EAAM/X,KAAKuE,MAAM/D,EAAIjD,KAAK+C,QAAQ6Y,UACtC,OAAOnZ,KAAKkD,IAAI,EAAGlD,KAAK6B,IAAIkW,EAAKxa,KAAK+C,QAAQ+Y,WAAa,M,iBAG7D,SAAIzX,EAAKoM,EAAUtS,GACjB6B,KAAK+b,WAEL,IAAK,IAAIxZ,EAAI,EAAGA,EAAIvC,KAAK+C,QAAQuD,UAAW/D,IAAK,CAC/C,IAAIoQ,EAAQ3S,KAAK4S,OAAOrQ,GACpBgY,EAAMva,KAAKic,cAActJ,EAAM2E,SAAStU,GACxCwX,EAAMxa,KAAKkc,cAAcvJ,EAAM2E,SAASrU,GAC5C0P,EAAMwJ,aAAa5B,EAAKC,GACxBxa,KAAKgc,KAAKzB,GAAKC,GAAK5Y,KAAK+Q,GAG3B,IAAK,IAAIpQ,EAAI,EAAGA,EAAIvC,KAAK+C,QAAQuD,UAAW/D,IAAK,CAC/C,IAAIoQ,EAAQ3S,KAAK4S,OAAOrQ,GADuB,EAE5BoQ,EAAMsG,UAAnBsB,EAFyC,EAEzCA,IAAKC,EAFoC,EAEpCA,IACP4B,EAAYpc,KAAKgc,KAAKzB,GAAKC,GAE/B7H,EAAM0J,MAAMD,EAAWje,GACvBwU,EAAM/K,OAAOvD,GACbsO,EAAMnS,QAAQ6D,EAAKlG,Q,KCrEnB8H,E,WACJ,aAAyB,IAAb7I,EAAY,uDAAJ,GAAI,oBACtB4C,KAAKsY,UAAYF,EACjBpY,KAAKsc,aAAe,IACpBtc,KAAKkG,WAAW9I,G,8CAGlB,SAAWA,GAET4C,KAAKmG,SAAW/I,EAAM+I,SACtBnG,KAAKoG,UAAYhJ,EAAMgJ,UACvBpG,KAAK+F,YAAc3I,EAAM2I,YAEzB,IAAIpH,EAAOiH,EAAc5F,KAAKmG,SAAUnG,KAAKoG,UAAWpG,KAAK+F,aAC7D/F,KAAKuc,KAAO5d,EAAKnB,MACjBwC,KAAKwc,KAAO7d,EAAKb,OACjBkC,KAAKyc,KAAO9d,EAAKO,KACjBc,KAAK0c,KAAO/d,EAAKU,IAEjBW,KAAK2c,QAAU,CACbC,GAAI,IAAIlG,EAAS1W,KAAKyc,KAAMzc,KAAK0c,MACjCG,GAAI,IAAInG,EAAS1W,KAAKyc,KAAMzc,KAAK0c,KAAO1c,KAAKwc,MAC7CM,GAAI,IAAIpG,EAAS1W,KAAKyc,KAAOzc,KAAKuc,KAAMvc,KAAK0c,MAC7CK,GAAI,IAAIrG,EAAS1W,KAAKyc,KAAOzc,KAAKuc,KAAMvc,KAAK0c,KAAO1c,KAAKwc,OAE3Dxc,KAAKgd,SAAW,CACdJ,GAAI,IAAIlG,EAAS1W,KAAKmG,SAAW,EAAGnG,KAAKoG,UAAY,GACrDyW,GAAI,IAAInG,EAAS1W,KAAKmG,SAAW,EAAGnG,KAAKoG,UAAY,GACrD0W,GAAI,IAAIpG,EAAS1W,KAAKmG,SAAW,EAAGnG,KAAKoG,UAAY,GACrD2W,GAAI,IAAIrG,EAAS1W,KAAKmG,SAAW,EAAGnG,KAAKoG,UAAY,Q,KAKtC6W,E,WACnB,WAAY7f,GAAQ,oBAClB4C,KAAK+C,QAAU,IAAIkD,EAAQ7I,GAC3B4C,KAAKkd,eACLld,KAAKmd,UAAW,EAChBnd,KAAKod,UAAW,E,0CAGlB,SAAOhgB,GACL4C,KAAK+C,QAAQmD,WAAW9I,K,0BAG1B,WACE4C,KAAKwU,SAAW,GAChBxU,KAAKwU,SAAL,GAAsB,IAAIvE,EAAM,CAAElN,QAAS/C,KAAK+C,UAChD/C,KAAKwU,SAAL,GAAsB,IAAIvE,EAAM,CAAElN,QAAS/C,KAAK+C,UAChD/C,KAAKwU,SAAL,GAAsB,IAAIvE,EAAM,CAAElN,QAAS/C,KAAK+C,UAChD/C,KAAKwU,SAAL,GAAsB,IAAIvE,EAAM,CAAElN,QAAS/C,KAAK+C,Y,8BAGlD,SAAiB4N,GACf,OAAI3Q,KAAKmd,SACAnd,KAAK+C,QAAQ4Z,QAAQhM,GAErB3Q,KAAK+C,QAAQia,SAASrM,K,oBAIjC,WACE3Q,KAAKmd,UAAW,EAChBnd,KAAKod,UAAW,I,kBAGlB,WACEpd,KAAKmd,UAAW,EAChBnd,KAAKod,UAAW,I,iBAGlB,SAAI/Y,EAAKoM,EAAUtS,GAGjB,GAFAkG,EAAIE,OAEAvE,KAAKmd,SAAU,CACjB,IAAIE,EAAUrd,KAAKwU,SAAL,GACV8I,EAAUtd,KAAKwU,SAAL,GACV+I,EAAUvd,KAAKwU,SAAL,GACVgJ,EAAUxd,KAAKwU,SAAL,GACdnQ,EAAIwD,UAAJ,yBACAxD,EAAIM,YAAJ,mBACAN,EAAIsN,YACJtN,EAAI4N,OAAOoL,EAAQ/F,SAASrU,EAAGoa,EAAQ/F,SAAStU,GAChDqB,EAAI+N,OAAOkL,EAAQhG,SAASrU,EAAGqa,EAAQhG,SAAStU,GAChDqB,EAAI+N,OAAOoL,EAAQlG,SAASrU,EAAGua,EAAQlG,SAAStU,GAChDqB,EAAI+N,OAAOmL,EAAQjG,SAASrU,EAAGsa,EAAQjG,SAAStU,GAChDqB,EAAIgX,YAEJhX,EAAIyN,SAENzN,EAAIQ,UAEJR,EAAIE,OACJ,IAAI6Y,GAAW,EACf,IAAK,IAAIzM,KAAS3Q,KAAKwU,SAAU,CAC/B,IAAI7B,EAAQ3S,KAAKwU,SAAS7D,GACtBmJ,EAAS9Z,KAAKyd,iBAAiB9M,GACtB+F,EAASkD,IAAIjH,EAAM2E,SAAUwC,GAAQD,WACrC7Z,KAAK+C,QAAQuZ,eAExBc,GAAW,GAEb,IAAI3C,EAAQ9H,EAAM2G,KAAKQ,GACvBnH,EAAM6G,WAAWiB,GACjB9H,EAAM/K,OAAOvD,GACbsO,EAAMnS,QAAQ6D,EAAKlG,GAErB6B,KAAKod,SAAWA,EAChB/Y,EAAIQ,c,KC/GF6Y,EACM,eADNA,GAEI,aAFJA,GAKI,aALJA,GAMI,aAGJzX,G,WACJ,aAAyB,IAAb7I,EAAY,uDAAJ,GAAI,oBACtB4C,KAAKmG,SAAW/I,EAAM+I,SACtBnG,KAAKoG,UAAYhJ,EAAMgJ,UAEvBpG,KAAK2d,OAAS,IAAIjH,EAAS1W,KAAKmG,SAAW,EAAGnG,KAAKoG,UAAY,GAC/DpG,KAAKkG,WAAW9I,G,8CAGlB,SAAWA,GACT4C,KAAKmG,SAAW/I,EAAM+I,SACtBnG,KAAKoG,UAAYhJ,EAAMgJ,UAEvBpG,KAAK2d,OAAO1a,EAAIjD,KAAKmG,SAAW,EAChCnG,KAAK2d,OAAO3a,EAAIhD,KAAKoG,UAAY,EAGjCpG,KAAK4d,YAAc,IACnB5d,KAAK6d,gBAAkB,O,KAINC,G,WACnB,WAAY1gB,GAAQ,oBAClB4C,KAAK+C,QAAU,IAAIkD,GAAQ7I,GAE3B4C,KAAK+d,MAAQ,CAAC/Y,EAAMO,OAAQP,EAAMM,MAAON,EAAMK,KAAML,EAAMI,KAE3DpF,KAAKge,YAAche,KAAK+d,MAAMvb,OAC9BxC,KAAKie,cAA2B,EAAVxb,KAAKoP,GAAU7R,KAAKge,YAE1Che,KAAK8X,OAAS9X,KAAK+C,QAAQ6a,YAC3B5d,KAAKke,WAAale,KAAK+C,QAAQ8a,gBAE/B7d,KAAKuX,MAAQ,EACbvX,KAAKme,UAAY,KACjBne,KAAKoe,kBAAoB,EACzBpe,KAAKqe,sBAAwB,EAE7Bre,KAAKse,OAASZ,EAEd1d,KAAKue,QAAUnhB,EAAMmhB,Q,0CAGvB,SAAOnhB,GACL4C,KAAK+C,QAAQmD,WAAW9I,K,iBAG1B,SAAIiH,EAAKoM,EAAUtS,GACjB6B,KAAK4H,OAAOvD,EAAKoM,EAAUtS,GAC3B6B,KAAKQ,QAAQ6D,EAAKoM,EAAUtS,K,uBAG9B,SAAUmgB,GACRte,KAAKse,OAASA,I,oBAGhB,WACEte,KAAKwe,UAAUd,M,oBAEjB,WACE1d,KAAKwe,UAAUd,M,wBAGjB,SAAWvf,GAET,GAAI6B,KAAKse,SAAWZ,GAAuBvf,EAASG,QAAS,CAE3D,IAF4D,IACtDU,EAAmBb,EAAnBa,OAAQG,EAAWhB,EAAXgB,OACLoD,EAAI,EAAGA,EAAIvC,KAAKge,YAAazb,IAAK,CACzC,IAAIkc,EAAOze,KAAK+d,MAAMxb,GACtB,GAAKkc,EAAL,CAEA,IAAIC,EAAY1e,KAAKuX,MAAQhV,EAAIvC,KAAKie,cAClCtV,EAAI3I,KAAK8X,OACTX,EAAKxO,EAAIlG,KAAKgV,IAAIiH,GAClBtH,EAAKzO,EAAIlG,KAAKkV,IAAI+G,GAClBf,EAAS3d,KAAK+C,QAAQ4a,OACtB1a,EAAI0a,EAAO1a,EAAIkU,EACfnU,EAAI2a,EAAO3a,EAAIoU,EAEf8G,EAAale,KAAKke,WAEtB,GADa,SAACjb,EAAIjE,EAAW,GAAhB,SAAqBgE,EAAI7D,EAAW,GACpC+e,EAAaA,EAExB,OAAOO,GAGX,OAAO,K,oBAIX,SAAOpa,EAAKoM,EAAUtS,GACpB,GAAI6B,KAAKse,SAAWZ,EAAqB,CACvC,IAAIe,EAAOze,KAAK2e,WAAWxgB,GACvBsgB,IACFze,KAAK4e,SAAWH,EAChBze,KAAKwe,UAAUd,KAGjB1d,KAAKuX,OAASvX,KAAKme,UACnBne,KAAKuX,MAAQvX,KAAKuX,OAAmB,EAAV9U,KAAKoP,IAE5B7R,KAAK8X,OAAS9X,KAAK+C,QAAQ6a,YAC7B5d,KAAK8X,SACI9X,KAAK8X,OAAS9X,KAAK+C,QAAQ6a,aACpC5d,KAAK8X,SAGH9X,KAAKke,WAAale,KAAK+C,QAAQ8a,gBACjC7d,KAAKke,aACIle,KAAKke,WAAale,KAAK+C,QAAQ8a,iBACxC7d,KAAKke,kBAEF,GAAIle,KAAKse,SAAWZ,GACzB1d,KAAKue,QAAQve,KAAK4e,eACb,GAAI5e,KAAKse,SAAWZ,GAAmB,CAC5C1d,KAAK8X,QAAU9X,KAAKoe,kBACpBpe,KAAKke,YAAcle,KAAKqe,sBACxBre,KAAKuX,OAA0B,GAAjBvX,KAAKme,UACnBne,KAAKuX,MAAQvX,KAAKuX,OAAmB,EAAV9U,KAAKoP,IAEhC,IAAIgN,EAAY7e,KAAKke,YAAc,EAC/BY,EAAc9e,KAAK8X,QAAU,EAE7B+G,IAAW7e,KAAKke,WAAa,GAC7BY,IAAa9e,KAAK8X,OAAS,GAC3B+G,GAAaC,GACf9e,KAAKwe,UAAUd,SAEZ,GAAI1d,KAAKse,SAAWZ,GAAmB,CAC5C1d,KAAK8X,QAAU9X,KAAKoe,kBACpBpe,KAAKke,YAAcle,KAAKqe,sBACxBre,KAAKuX,OAA0B,GAAjBvX,KAAKme,UACnBne,KAAKuX,MAAQvX,KAAKuX,OAAmB,EAAV9U,KAAKoP,IAEhC,IAAIgN,EAAY7e,KAAKke,YAAcle,KAAK+C,QAAQ8a,gBAC5CiB,EAAc9e,KAAK8X,QAAU9X,KAAK+C,QAAQ6a,YAE1CiB,IAAW7e,KAAKke,WAAale,KAAK+C,QAAQ8a,iBAC1CiB,IAAa9e,KAAK8X,OAAS9X,KAAK+C,QAAQ6a,aACxCiB,GAAaC,GACf9e,KAAKwe,UAAUd,M,qBAKrB,SAAQrZ,EAAKoM,EAAUtS,GACrBkG,EAAIE,OACJ,IAAIoZ,EAAS3d,KAAK+C,QAAQ4a,OACtB7F,EAAS9X,KAAK8X,OACdoG,EAAale,KAAKke,WACtB7Z,EAAIK,UAAUiZ,EAAO1a,EAAG0a,EAAO3a,GAC/BqB,EAAIsN,YAEJtN,EAAIyN,SAEJzN,EAAIwD,UAAJ,yBACAxD,EAAIM,YAAJ,mBAEA,IAAK,IAAIpC,EAAI,EAAGA,EAAIvC,KAAKge,YAAazb,IAAK,CACzC,IAAIkc,EAAOze,KAAK+d,MAAMxb,GACtB8B,EAAIE,OACJF,EAAI8W,OAAOnb,KAAKuX,MAAQhV,EAAIvC,KAAKie,eACjC5Z,EAAIK,UAAUoT,EAAQ,GACtBzT,EAAIsN,YACJtN,EAAIuN,IAAI,EAAG,EAAGsM,EAAY,EAAa,EAAVzb,KAAKoP,IAClCxN,EAAIwD,UAAY7H,KAAK+e,eAAeN,GACpCpa,EAAI0N,OACJ1N,EAAIyN,SACJzN,EAAIQ,UAGNR,EAAIQ,Y,4BAGN,SAAe4Z,GACb,OAAQA,GACN,KAAKzZ,EAAMO,OACT,MAAO,UACT,KAAKP,EAAMM,MACT,MAAO,UACT,KAAKN,EAAMK,KACT,MAAO,yBACT,QACE,MAAM,8B,KCtLO2Z,G,4MA4DnBC,gBAAkB,WACZ,EAAK7hB,MAAM8hB,YAEb,EAAKC,YAAYC,OAAO,CACtBjZ,SAAU,EAAKN,WACfO,UAAW,EAAKN,YAChBC,YAAa,EAAK3I,MAAM2I,cAE1B,EAAKoZ,YAAYE,UAGjB,EAAKF,YAAYG,OAGf,EAAKliB,MAAM2I,cAAgBf,EAAMC,KACnC,EAAKsa,UAAUC,SAEf,EAAKD,UAAUE,U,EAInBpiB,mBAAqB,SAACC,GAIpB,EAAKuI,WAAapI,OAAOC,YAAcC,SAASC,KAAKC,YACrD,EAAKiI,YAAcrI,OAAOM,aAAeJ,SAASC,KAAKI,kBAE/BU,IAApB,EAAKghB,YACP,EAAKA,WAAWN,OAAO,CACrBjZ,SAAU,EAAKN,WACfO,UAAW,EAAKN,mBAGKpH,IAArB,EAAKygB,aACP,EAAKA,YAAYC,OAAO,CACtBjZ,SAAU,EAAKN,WACfO,UAAW,EAAKN,YAChBC,YAAa,EAAK3I,MAAM2I,mBAGLrH,IAAnB,EAAK6gB,WACP,EAAKA,UAAUH,OAAO,CACpBjZ,SAAU,EAAKN,WACfO,UAAW,EAAKN,mBAGGpH,IAAnB,EAAKihB,WACP,EAAKA,UAAUP,OAAO,CACpBjZ,SAAU,EAAKN,WACfO,UAAW,EAAKN,YAChBO,gBAAiB,EAAKuZ,2BAGHlhB,IAAnB,EAAKuI,WACP,EAAKA,UAAUmY,OAAO,CACpBjZ,SAAU,EAAKN,WACfO,UAAW,EAAKN,YAChBO,gBAAiB,EAAKuZ,2BAGJlhB,IAAlB,EAAKmhB,UACP,EAAKA,SAAST,OAAO,CACnBjZ,SAAU,EAAKN,WACfO,UAAW,EAAKN,e,EAKtBtG,KAAO,SAAC6E,EAAKoM,EAAUtS,GACrB,IAAIgI,EAAW9B,EAAIqX,OAAOle,MACtB4I,EAAY/B,EAAIqX,OAAO5d,OAFO,EAGa,EAAKV,MAA9C2I,EAH4B,EAG5BA,YAAamZ,EAHe,EAGfA,WAAYY,EAHG,EAGHA,iBAGPphB,IAApB,EAAKghB,iBACgBhhB,IAArB,EAAKygB,kBACczgB,IAAnB,EAAK6gB,YAETlb,EAAIE,OAEJF,EAAImS,UAAU,EAAG,EAAGrQ,EAAUC,GAG9B/B,EAAIwD,UAAJ,yBACAxD,EAAI6E,SAAS,EAAG,EAAG/C,EAAUC,GAMzBL,IAAgBf,EAAMC,MACxB,EAAKsa,UAAU9I,IAAIpS,EAAKoM,EAAUtS,GAIhC4H,IAAgBf,EAAMK,MAAQya,GAChC,EAAKC,eAAe1b,EAAKoM,EAAUtS,GAIjC4H,IAAgBf,EAAMI,KAAO0a,GAC/B,EAAKE,QAAQ3b,EAAKoM,EAAUtS,GAI9B,EAAKghB,YAAY1I,IAAIpS,EAAKoM,EAAUtS,IAChC+gB,GAAeY,GAAgB,EAAKX,YAAY/B,UAExC8B,GAAcY,GACxB,EAAK1iB,MAAM6iB,eAAc,GAFzB,EAAK7iB,MAAM6iB,eAAc,GAK3B5b,EAAIQ,Y,EAGNkb,eAAiB,SAAC1b,EAAKoM,EAAUtS,QACRO,IAAnB,EAAKihB,gBACcjhB,IAAnB,EAAKuI,YAET5C,EAAIE,OAEA,EAAKob,UAAUlZ,UAAUjE,QAAU,IAIrC,EAAKyE,UAAUqC,UACf,EAAKqW,UAAUO,wBAUjB,EAAKjZ,UAAUwP,IAAIpS,GAEnB,EAAKsb,UAAUlJ,IAAIpS,EAAK,EAAK4C,WAC7B,EAAK0Y,UAAUQ,cAAc9b,GAE7BA,EAAIQ,Y,EAGNmb,QAAU,SAAC3b,EAAKoM,EAAUtS,QACFO,IAAlB,EAAKmhB,WAETxb,EAAIE,OACJ,EAAKsb,SAASpJ,IAAIpS,EAAKoM,GACnBA,EAAW,IAAM,GAEjB,EAAKoP,SAAS9c,QAAQoS,mBACtB,EAAK0K,SAAS9c,QAAQoR,iBAEtB,EAAK0L,SAASO,iBAGlB/b,EAAIQ,Y,8FArNN,sBAAAwO,EAAA,6DACE5V,OAAO0C,iBAAiB,SAAUH,KAAK3C,oBACvC2C,KAAK3C,qBAEL2C,KAAK0f,WAAa,IAAInL,EAAW,CAC/BpO,SAAUnG,KAAK6F,WACfO,UAAWpG,KAAK8F,cAElB9F,KAAKuf,UAAY,IAAIzB,GAAe,CAClC3X,SAAUnG,KAAK6F,WACfO,UAAWpG,KAAK8F,YAChByY,QAASve,KAAK5C,MAAMmhB,UAEtBve,KAAKmf,YAAc,IAAIlC,EAAY,CACjC9W,SAAUnG,KAAK6F,WACfO,UAAWpG,KAAK8F,YAChBC,YAAa/F,KAAK5C,MAAM2I,cAE1B/F,KAAKif,kBAEW,MApBlB,SAqBQre,IADU,OApBlB,OAwBEZ,KAAK4f,oBAAsB,EAC3B5f,KAAK2f,UAAY,IAAInZ,EAAU,CAC7BL,SAAUnG,KAAK6F,WACfO,UAAWpG,KAAK8F,YAChBO,gBAAiBrG,KAAK4f,sBAExB5f,KAAKiH,UAAY,IAAIoC,EAAU,CAC7BlD,SAAUnG,KAAK6F,WACfO,UAAWpG,KAAK8F,YAChBO,gBAAiBrG,KAAK4f,sBAGxB5f,KAAK6f,SAAW,IAAIQ,EAAS,CAC3Bla,SAAUnG,KAAK6F,WACfO,UAAWpG,KAAK8F,cAtCpB,iD,wFA0CA,WACErI,OAAO4C,oBAAoB,SAAUL,KAAK3C,sB,gCAG5C,SAAmBijB,GAEfA,EAAUpB,aAAelf,KAAK5C,MAAM8hB,YACpCoB,EAAUva,cAAgB/F,KAAK5C,MAAM2I,aAErC/F,KAAKif,oB,oBAqKT,WAGE,OAAO,cAAC,EAAD,CAAQzf,KAAMQ,KAAKR,W,GAhOKiB,a,uGCNtB8f,GAAuB,SAAC,GAM9B,IALLC,EAKI,EALJA,SACAC,EAII,EAJJA,cACAC,EAGI,EAHJA,WACAC,EAEI,EAFJA,QACGvjB,EACC,oEACEwjB,EAAU9gB,IAAM+gB,OAAO,MAY7B,YAVgBniB,IAAZiiB,IACFA,EAAU,CACRG,MAAO,IACPC,KAAM,WAGSriB,IAAfgiB,IACFA,EAAaM,MAIb,cAACC,GAAA,EAAD,2BACEL,QAASA,EACTD,QAASA,EACTD,WAAYM,MACR5jB,GAJN,aAME,qBAAKkD,IAAKsgB,EAASM,UAAWT,EAA9B,SACGD,QAMIW,GAA2B,SAAC/jB,GACvC,OACE,cAAC,GAAD,cACEujB,QAAS,CAAEG,MAAO,IAAMC,KAAM,KAC9BL,WAAYU,MACRhkB,KAKGikB,GAA4B,SAACjkB,GACxC,OACE,cAAC,GAAD,cACEujB,QAAS,CAAEG,MAAO,IAAMC,KAAM,KAC9BL,WAAYY,MACRlkB,K,qBC9CWmkB,G,4MACnBC,MAAQ,CACNC,cAAe,EACfC,WAAW,EACXC,aAAa,G,EAqBfC,WAAa,WACX,EAAKC,SAAS,CACZH,WAAW,EAEXD,aAAc,K,EAIlBK,aAAe,WACb,EAAKD,SAAS,CAEZF,aAAa,EACbF,cAAe,K,EAInBM,gBAAkB,WAChB,EAAKF,UAAS,kBAAuB,CAAEJ,aAAzB,EAAGA,aAAmD,O,EAEtEO,qBAAuB,WACrB,EAAKH,UAAS,kBAAuB,CAAEJ,aAAzB,EAAGA,aAAmD,O,EAGtEQ,cAAgB,WACd,EAAK7kB,MAAMmhB,QAAQvZ,EAAMC,O,uDA1C3B,WACMjF,KAAK5C,MAAM2I,cAAgBf,EAAMC,KACnCjF,KAAK4hB,aAEL5hB,KAAK8hB,iB,gCAIT,SAAmBxB,GACbA,EAAUva,cAAgB/F,KAAK5C,MAAM2I,cACnC/F,KAAK5C,MAAM2I,cAAgBf,EAAMC,KACnCjF,KAAK6hB,SAAS,CAAEF,aAAa,IAE7B3hB,KAAK6hB,SAAS,CAAEH,WAAW,O,oBAgCjC,WAAU,IAAD,EACwC1hB,KAAKwhB,MAA9CG,EADC,EACDA,YAAaD,EADZ,EACYA,UAAWD,EADvB,EACuBA,aAG9B,OACE,qBAAKP,UAAWgB,KAAOtkB,KAAvB,SACE,eAACukB,GAAA,EAAD,CAAiBC,UAAW,KAA5B,UACGV,GAAaD,GAAgB,GAC5B,cAAC,GAAD,CAEEY,QAAQ,EACRC,UAAWtiB,KAAK+hB,gBAChBQ,SAAUviB,KAAK8hB,aACfrB,cAAeyB,KAAOM,QALxB,SAOE,mBAAGtB,UAAWgB,KAAOO,SAArB,8CANK,GASRf,GAAaD,GAAgB,GAC5B,cAAC,GAAD,CAEEY,QAAQ,EAERE,SAAUviB,KAAKgiB,qBACfvB,cAAeyB,KAAOM,QALxB,SAOE,mBAAGtB,UAAWgB,KAAOQ,MAArB,wGANK,GASRf,GACC,cAAC,GAAD,CAEEU,QAAQ,EACRE,SAAUviB,KAAK4hB,WACfnB,cAAeyB,KAAOM,QAJxB,SAME,qBAAKtB,UAAWgB,KAAOS,IAAKC,QAAS5iB,KAAKiiB,iBALrC,Y,GAnFqBxhB,a,qBCLnBoiB,G,4MACnBrB,MAAQ,CACNC,aAAc,G,EAGhBM,gBAAkB,WAChB,EAAKF,UAAS,kBAAuB,CAAEJ,aAAzB,EAAGA,aAAmD,O,EAEtEO,qBAAuB,WACrB,EAAKH,UAAS,kBAAuB,CAAEJ,aAAzB,EAAGA,aAAmD,O,4CAGtE,WAAU,IACFA,EAAiBzhB,KAAKwhB,MAAtBC,aAEN,OACE,qBAAKP,UAAWgB,KAAOtkB,KAAvB,SACE,qBAAKsjB,UAAWgB,KAAOY,MAAvB,SACE,eAACX,GAAA,EAAD,CAAiBC,UAAW,KAA5B,UACGX,GAAgB,GACf,cAAC,GAAD,CAEEY,QAAQ,EACRC,UAAWtiB,KAAK+hB,gBAChBQ,SAAU,aACV9B,cAAeyB,KAAOa,SALxB,SAOE,oBAAI7B,UAAWgB,KAAOc,MAAtB,mBANK,GAURvB,GAAgB,GACf,cAAC,GAAD,CAEEY,QAAQ,EAERE,SAAUviB,KAAKgiB,qBACfvB,cAAeyB,KAAOe,QALxB,SAOE,mBAAG/B,UAAWgB,KAAOgB,KAArB,kCANK,c,GAjCaziB,a,qBCGbqC,G,4MACnB0e,MAAQ,CACNC,aAAc,G,EAGhB0B,UAAY,+3L,EAmBZpB,gBAAkB,WAChB,EAAKF,UAAS,kBAAuB,CAAEJ,aAAzB,EAAGA,aAAmD,O,EAEtEO,qBAAuB,WACrB,EAAKH,UAAS,kBAAuB,CAAEJ,aAAzB,EAAGA,aAAmD,O,4CAGtE,WAAU,IACFA,EAAiBzhB,KAAKwhB,MAAtBC,aACF2B,EAAgB3gB,KAAKuE,MAAMvE,KAAKC,SAAW1C,KAAKmjB,UAAU3gB,QAC1D6gB,EAAWrjB,KAAKmjB,UAAUC,GAE9B,OACE,qBAAKlC,UAAWgB,KAAOtkB,KAAvB,SACE,qBAAKsjB,UAAWgB,KAAOY,MAAvB,SACE,eAACX,GAAA,EAAD,CAAiBC,UAAW,KAA5B,UACGX,GAAgB,GACf,cAAC,GAAD,CAEEY,QAAQ,EACRC,UAAWtiB,KAAK+hB,gBAChBQ,SAAU,aACV9B,cAAeyB,KAAOa,SALxB,SAOE,qBAAI7B,UAAWgB,KAAOc,MAAtB,yBACc,uBADd,kBANK,GAWRvB,GAAgB,GACf,cAAC,GAAD,CAEEY,QAAQ,EACRC,UAAWtiB,KAAKgiB,qBAChBO,SAAUviB,KAAK+hB,gBACftB,cAAeyB,KAAOe,QALxB,SAOE,oBAAG/B,UAAWgB,KAAOmB,SAArB,UAAgCA,EAAhC,QANK,c,GAvDa5iB,a,oBCRnB,OAA0B,wCCOpB6iB,G,4MACnB9B,MAAQ,CACNC,aAAc,G,EAGhBM,gBAAkB,WAChB,EAAKF,UAAS,kBAAuB,CAAEJ,aAAzB,EAAGA,aAAmD,O,EAEtEO,qBAAuB,WACrB,EAAKH,UAAS,kBAAuB,CAAEJ,aAAzB,EAAGA,aAAmD,O,4CAGtE,WAAU,IACFA,EAAiBzhB,KAAKwhB,MAAtBC,aAEN,OACE,qBAAKP,UAAWgB,KAAOtkB,KAAvB,SACE,qBAAKsjB,UAAWgB,KAAOY,MAAvB,SACE,eAACX,GAAA,EAAD,CAAiBC,UAAW,KAA5B,UACGX,GAAgB,GACf,cAAC,GAAD,CAEEY,QAAQ,EACRC,UAAWtiB,KAAK+hB,gBAChBQ,SAAU,aACV9B,cAAeyB,KAAOa,SALxB,SAOE,oBAAI7B,UAAWgB,KAAOc,MAAtB,2BANK,GASRvB,GAAgB,GACf,eAAC,GAAD,CAEEY,QAAQ,EACRC,UAAWtiB,KAAK+hB,gBAChBQ,SAAUviB,KAAKgiB,qBACfvB,cAAeyB,KAAOe,QALxB,UAOE,qBAAK/B,UAAWgB,KAAOqB,MAAOC,IAAKC,GAAWC,IAAI,SAClD,mBAAGxC,UAAWgB,KAAOyB,WAArB,+FAPK,GAYRlC,GAAgB,GACf,cAAC,GAAD,CAEEY,QAAQ,EACRC,UAAWtiB,KAAK+hB,gBAChBQ,SAAUviB,KAAKgiB,qBACfvB,cAAeyB,KAAOe,QALxB,SAOE,oBAAG/B,UAAWgB,KAAOgB,KAArB,iFAEE,uBAFF,qGAIE,uBACA,6DALF,6EANK,GAeRzB,GAAgB,GACf,cAAC,GAAD,CAEEY,QAAQ,EACRC,UAAWtiB,KAAK+hB,gBAChBQ,SAAUviB,KAAKgiB,qBACfvB,cAAeyB,KAAOe,QALxB,SAOE,oBAAG/B,UAAWgB,KAAOgB,KAArB,8CACU,wFACR,uBACA,oIAHF,2BANK,GAaRzB,GAAgB,GACf,cAAC,GAAD,CAEEY,QAAQ,EACRC,UAAWtiB,KAAK+hB,gBAChBQ,SAAUviB,KAAKgiB,qBACfvB,cAAeyB,KAAOe,QALxB,SAOE,oBAAG/B,UAAWgB,KAAOgB,KAArB,8HAEE,uBAFF,2GANK,GAaRzB,GAAgB,GACf,eAAC,GAAD,CAEEY,QAAQ,EAERE,SAAUviB,KAAKgiB,qBACfvB,cAAeyB,KAAOe,QALxB,UAOE,mBAAG/B,UAAWgB,KAAO0B,SAArB,4GAGA,mBACE1C,UAAWgB,KAAO2B,QAClB/J,OAAO,SACPgK,IAAI,sBACJC,KAAM,uDAJR,sDATK,c,GA7FctjB,a,oBCPpB,OAA0B,+C,UCOnCujB,G,QAAKtD,EAAWuD,KAAK/B,MAENgC,G,kDACnB,WAAY9mB,GAAQ,IAAD,8BACjB,cAAMA,IAoBR2kB,gBAAkB,WAChB,EAAKF,UAAS,kBAAuB,CAAEJ,aAAzB,EAAGA,aAAmD,OAtBnD,EAwBnBO,qBAAuB,WACrB,EAAKH,UAAS,kBAAuB,CAAEJ,aAAzB,EAAGA,aAAmD,OAzBnD,EA4BnB0C,gBAAkB,WAChB,EAAKtC,UAAS,SAACL,GAAD,MAAY,CACxB4C,aAAc5C,EAAM4C,iBA9BL,EAkCnBC,iBAAmB,WACjB,EAAKxC,UAAS,SAACL,GAAD,MAAY,CACxB8C,cAAe9C,EAAM8C,kBAlCvB,EAAKC,SAAW,KAChB,EAAKC,YAAc,SAACC,GACbA,IACL,EAAKF,SAAWE,IAIlB,EAAKjD,MAAQ,CACXC,aAAc,EACd6C,cAAc,EACdF,aAAa,GAZE,E,wDAgBnB,c,oBAwBA,WAAU,IAAD,EAC2CpkB,KAAKwhB,MAAjDC,EADC,EACDA,aAAc6C,EADb,EACaA,aAAcF,EAD3B,EAC2BA,YAElC,OACE,qBAAKlD,UAAWgB,KAAOtkB,KAAvB,SACE,qBAAKsjB,UAAW8C,GAAG,QAAS,CAAE,qBAAsBI,IAApD,SACE,eAACjC,GAAA,EAAD,CAAiBC,UAAW,KAA5B,UACGX,GAAgB,GACf,cAAC,GAAD,CAEEY,QAAQ,EACRC,UAAWtiB,KAAK+hB,gBAChBQ,SAAU,aACV9B,cAAeyB,KAAOa,SALxB,SAOE,oBAAI7B,UAAWgB,KAAOc,MAAtB,iCANK,GAURvB,GAAgB,GACf,cAAC,GAAD,CAEEY,QAAQ,EACRC,UAAWtiB,KAAK+hB,gBAChBQ,SAAUviB,KAAKgiB,qBACfvB,cAAeuD,GAAG,WAAY,CAC5B,iBAAkBI,IANtB,SASE,uBACElD,UAAWgB,KAAOwC,MAClBpkB,IAAKN,KAAKwkB,YACVG,UAAQ,EACRC,aAAW,EACXC,UAAU,EACVC,MAAOR,EACPS,aAAa,aACbC,cAAe,SAACC,GAEd,OADAA,EAAEC,kBACK,GAVX,SAaE,wBAAQ1B,IAAK2B,QArBV,GA6CR1D,GAAgB,GACf,cAAC,GAAD,CAEEY,QAAQ,EACRC,UAAWtiB,KAAK+hB,gBAChBQ,SAAUviB,KAAKgiB,qBACfvB,cAAeyB,KAAOe,QALxB,SAOE,oBAAG/B,UAAWgB,KAAOgB,KAArB,uFAEE,uBACA,yDAHF,0DAIE,uBAJF,8HANK,GAeRzB,GAAgB,GACf,cAAC,GAAD,CAEEY,QAAQ,EACRC,UAAWtiB,KAAK+hB,gBAChBQ,SAAUviB,KAAKgiB,qBACfvB,cAAeyB,KAAOe,QALxB,SAOE,oBAAG/B,UAAWgB,KAAOgB,KAArB,UACE,uIADF,SAEE,uBAFF,oIANK,c,GA9HeziB,a,oBCAf2E,G,4MACnBoc,MAAQ,CACNC,aAAc,EACd2B,eAAgB,G,EAGlBD,UAAY,CAAC,qQAAD,wkC,EASZpB,gBAAkB,WAAO,IAAD,EACgB,EAAKP,MAArCC,EADgB,EAChBA,aAAc2B,EADE,EACFA,cAChB3B,GAAgB,GAAK2B,EAAgB,EAAKD,UAAU3gB,OACtD,EAAKqf,SAAS,CACZJ,aAAcA,EAAe,EAC7B2B,cAAeA,EAAgB,IAGjC,EAAKvB,SAAS,CAAEJ,aAAcA,EAAe,K,EAGjDO,qBAAuB,WACrB,EAAKH,UAAS,kBAAuB,CAAEJ,aAAzB,EAAGA,aAAmD,O,4CAGtE,WAAU,IAAD,EAC+BzhB,KAAKwhB,MAArCC,EADC,EACDA,aAAc2B,EADb,EACaA,cAChBC,EAAWrjB,KAAKmjB,UAAUC,GAE9B,OACE,qBAAKlC,UAAWgB,KAAOtkB,KAAvB,SACE,qBAAKsjB,UAAWgB,KAAOY,MAAvB,SACE,eAACX,GAAA,EAAD,CAAiBC,UAAW,KAA5B,UACGX,GAAgB,GACf,cAAC,GAAD,CAEEY,QAAQ,EACRC,UAAWtiB,KAAK+hB,gBAChBQ,SAAU,aACV9B,cAAeyB,KAAOa,SALxB,SAOE,oBAAI7B,UAAWgB,KAAOc,MAAtB,kBANK,GASRvB,GAAgB,GACf,cAAC,GAAD,CAEEY,QAAQ,EACRC,UAAWtiB,KAAK+hB,gBAChBQ,SAAUviB,KAAKgiB,qBACfvB,cAAeyB,KAAOe,QALxB,SAOE,mBAAG/B,UAAWgB,KAAOgB,KAArB,wDANK,GAWRzB,GAAgB,KAAO4B,GACtB,cAAC,GAAD,CAEEhB,QAAQ,EACRC,UAAWtiB,KAAKgiB,qBAChBO,SAAUviB,KAAK+hB,gBACftB,cAAeyB,KAAOe,QALxB,SAOE,mBAAG/B,UAAWgB,KAAOgB,KAArB,SAA4BG,KANvB,c,GAhEY5iB,a,qBCO3B2kB,G,4MACJ5D,MAAQ,CACNtC,YAAY,EACZY,aAAa,G,EAcfziB,mBAAqB,SAACC,GACpB,EAAKuI,WAAapI,OAAOC,YAAcC,SAASC,KAAKC,YACrD,EAAKiI,YAAcrI,OAAOM,aAAeJ,SAASC,KAAKI,aAFzB,IAIxBqnB,EAAW,EAAKjoB,MAAMkoB,MAAtBD,OACFtf,EAAcsf,GAAUA,EAAOxb,GAC/B0b,EAAU3f,EAAc,EAAKC,WAAY,EAAKC,YAAaC,GAC/D,EAAK8b,SAAS,CAAE0D,a,EAGlBhH,QAAU,SAACiH,GAELA,IAAaxgB,EAAMC,MAAQ,EAAKwgB,UAElC,EAAKroB,MAAMsoB,QAAQC,UAGnB,EAAKF,WAAY,EACjB,EAAKroB,MAAMsoB,QAAQ9jB,KAAnB,WAA4B4jB,KAI9B,IAAID,EAAU3f,EAAc,EAAKC,WAAY,EAAKC,YAAa0f,GAC/D,EAAK3D,SAAS,CACZ0D,UACAzF,aAAa,K,EAIjBG,cAAgB,SAACH,GACf,EAAK+B,SAAS,CACZ/B,iB,EAIJ8F,YAAc,WAAO,IACbP,EAAW,EAAKjoB,MAAMkoB,MAAtBD,OACFtf,EAAcsf,GAAUA,EAAOxb,GAC/BqV,GAAa,EAWjB,OATEnZ,IAAgBf,EAAMG,MACtBY,IAAgBf,EAAMI,KACtBW,IAAgBf,EAAMK,MACtBU,IAAgBf,EAAMM,OACtBS,IAAgBf,EAAMO,SAEtB2Z,GAAa,GAGR,CACLnZ,cACAmZ,e,uDA9DJ,WACEzhB,OAAO0C,iBAAiB,SAAUH,KAAK3C,oBACvC2C,KAAK3C,uB,kCAKP,WACEI,OAAO4C,oBAAoB,SAAUL,KAAK3C,sB,oBA0D5C,WAAU,IAAD,EAC2B2C,KAAK4lB,cAAjC7f,EADC,EACDA,YAAamZ,EADZ,EACYA,WADZ,EAEwBlf,KAAKwhB,MAA9B1B,EAFC,EAEDA,YAAayF,EAFZ,EAEYA,QAEfM,GAAiB,EACrB,IAAK,IAAIC,KAAO9gB,EACVe,IAAgBf,EAAM8gB,KAAMD,GAAiB,GAGnD,OAAIA,EACK,cAAC,IAAD,CAAU5a,GAAE,WAAMjG,EAAMC,QAI/B,sBAAKic,UAAWgB,KAAOtkB,KAAvB,UACE,qBAAKsjB,UAAWgB,KAAO6D,aAAvB,SACE,cAAC,GAAD,CAAYhgB,YAAaA,EAAawY,QAASve,KAAKue,YAEtD,qBAAK2C,UAAWgB,KAAO8D,eAAvB,SACE,cAAC,GAAD,CACEjgB,YAAaA,EACbmZ,WAAYA,EACZY,YAAaA,EACbvB,QAASve,KAAKue,QACd0B,cAAejgB,KAAKigB,kBAGvBH,GACC,qBACEvf,MAAO,CAAE/C,MAAO+nB,EAAQ/nB,MAAOM,OAAQynB,EAAQznB,QAC/CojB,UAAWgB,KAAO+D,iBAFpB,SAIE,eAAC,IAAD,WACE,cAAC,IAAD,CAAOC,KAAI,WAAMlhB,EAAMI,KAAvB,SACE,cAAC,GAAD,MAEF,cAAC,IAAD,CAAO8gB,KAAI,WAAMlhB,EAAMM,OAAvB,SACE,cAAC,GAAD,MAEF,cAAC,IAAD,CAAO4gB,KAAI,WAAMlhB,EAAMK,MAAvB,SACE,cAAC,GAAD,MAEF,cAAC,IAAD,CAAO6gB,KAAI,WAAMlhB,EAAMO,QAAvB,SACE,cAAC,GAAD,MAEF,cAAC,IAAD,CAAO2gB,KAAI,WAAMlhB,EAAMG,MAAvB,SACE,cAAC,GAAD,kB,GAtHG1E,aAgIJ0lB,eAAWf,ICtIX,SAASgB,KACtB,OACE,cAAC,IAAD,UACE,eAAC,IAAD,WACE,cAAC,IAAD,CAAOC,OAAK,EAACH,KAAK,OAAlB,SACE,cAAC,GAAD,MAEF,cAAC,IAAD,CAAOA,KAAK,IAAZ,SACE,cAAC,IAAD,CAAUjb,GAAE,WAAMjG,EAAMC,eClBlC,IAYeqhB,GAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,8BAAqBC,MAAK,YAAkD,IAA/CC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,OCDdQ,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAACb,GAAD,MAEFzoB,SAASupB,eAAe,SAM1BZ,M,mBCfArpB,EAAOC,QAAU,CAAC,KAAO,oBAAoB,MAAQ,qBAAqB,SAAW,wBAAwB,MAAQ,qBAAqB,QAAU,uBAAuB,MAAQ,qBAAqB,QAAU,uBAAuB,WAAa,0BAA0B,KAAO,oBAAoB,SAAW,wBAAwB,QAAU,yB,mBCAxVD,EAAOC,QAAU,CAAC,KAAO,qBAAqB,MAAQ,sBAAsB,qBAAqB,mCAAmC,SAAW,yBAAyB,MAAQ,sBAAsB,SAAW,yBAAyB,iBAAiB,+BAA+B,MAAQ,sBAAsB,QAAU,wBAAwB,KAAO,qBAAqB,OAAS,uBAAuB,SAAW,yBAAyB,eAAe,6BAA6B,gBAAgB,gC,mBCAtfD,EAAOC,QAAU,CAAC,KAAO,kBAAkB,MAAQ,mBAAmB,SAAW,sBAAsB,MAAQ,mBAAmB,QAAU,qBAAqB,KAAO,qB","file":"static/js/main.d77826c7.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"body\":\"Navigation_body__2jQwn\",\"greeting\":\"Navigation_greeting__13F-4\",\"guide\":\"Navigation_guide__1F290\",\"btn\":\"Navigation_btn__2sv_P\",\"blink\":\"Navigation_blink__35izJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"body\":\"Quiz_body__sWhre\",\"inner\":\"Quiz_inner__1sMI8\",\"secTitle\":\"Quiz_secTitle__TjhlC\",\"title\":\"Quiz_title__2s4Zy\",\"secDesc\":\"Quiz_secDesc__1t4nJ\",\"image\":\"Quiz_image__3Bufh\",\"scaleUp\":\"Quiz_scaleUp__cgcga\",\"imageGuide\":\"Quiz_imageGuide__2Uh1t\",\"desc\":\"Quiz_desc__4ruEy\",\"btnGuide\":\"Quiz_btnGuide__epWxn\",\"playBtn\":\"Quiz_playBtn__UA_uc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"body\":\"Bird_body__13Yb9\",\"inner\":\"Bird_inner__2Q0Ot\",\"secTitle\":\"Bird_secTitle__i5Jgj\",\"title\":\"Bird_title__2RdDy\",\"secDesc\":\"Bird_secDesc__3eiMS\",\"sentence\":\"Bird_sentence__4Dtw4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"body\":\"Page_body__2POrq\",\"NavContainer\":\"Page_NavContainer__rqFnD\",\"FieldContainer\":\"Page_FieldContainer__10yMo\",\"ArticleContainer\":\"Page_ArticleContainer__3bIfe\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"appear\":\"SectionTransition_appear__2rI5o\",\"appearActive\":\"SectionTransition_appearActive__OV50C\",\"appearDone\":\"SectionTransition_appearDone__1Nr9_\",\"enter\":\"SectionTransition_enter__34y6a\",\"enterActive\":\"SectionTransition_enterActive__3HT0e\",\"enterDone\":\"SectionTransition_enterDone__2Wrju\",\"exit\":\"SectionTransition_exit__2GGKK\",\"exitActive\":\"SectionTransition_exitActive__1GNCu\",\"exitDone\":\"SectionTransition_exitDone__2W372\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"appear\":\"SlowTransition_appear__39OPK\",\"appearActive\":\"SlowTransition_appearActive__3oMTy\",\"appearDone\":\"SlowTransition_appearDone__3wOVs\",\"enter\":\"SlowTransition_enter__3Kyvu\",\"enterActive\":\"SlowTransition_enterActive__-4cde\",\"enterDone\":\"SlowTransition_enterDone__1KwRx\",\"exit\":\"SlowTransition_exit__1FAum\",\"exitActive\":\"SlowTransition_exitActive__1DSQv\",\"exitDone\":\"SlowTransition_exitDone__SJoJR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"appear\":\"QuoteTransition_appear__2Ay5I\",\"appearActive\":\"QuoteTransition_appearActive__2oSYD\",\"appearDone\":\"QuoteTransition_appearDone__yuK93\",\"enter\":\"QuoteTransition_enter__1nwV_\",\"enterActive\":\"QuoteTransition_enterActive__18jKe\",\"enterDone\":\"QuoteTransition_enterDone__2vcZc\",\"exit\":\"QuoteTransition_exit__2C9Wv\",\"exitActive\":\"QuoteTransition_exitActive__2ddwf\",\"exitDone\":\"QuoteTransition_exitDone__1CRpT\"};","import React, { Component } from \"react\";\n\nexport default class Canvas extends Component {\n  constructor(props) {\n    super(props);\n    this.canvasRef = React.createRef();\n    this.mouseObj = {\n      mouseX: undefined,\n      mouseY: undefined,\n      isMouseOverCanvas: false,\n      isMouseMoving: false,\n      clicked: false,\n      clickedFrame: undefined,\n    };\n  }\n\n  componentDidMount() {\n    if (!this._frameId) {\n      // initiate properties\n      this._cvs = this.canvasRef.current;\n      this._ctx = this._cvs.getContext(\"2d\");\n      this._frameCnt = 0;\n      this._cvs.addEventListener(\"click\", this.clickEventHandler);\n      // start loop\n      // console.log(\"start loop\");\n      this.loop();\n    }\n    window.addEventListener(\"resize\", this.resizeEventHandler);\n    this.resizeEventHandler();\n    document.addEventListener(\"mousemove\", this.mousemoveEventHandler);\n  }\n\n  componentWillUnmount() {\n    // console.log(\"cancel loop\");\n    window.cancelAnimationFrame(this._frameId);\n    window.removeEventListener(\"resize\", this.resizeEventHandler);\n    document.removeEventListener(\"mousemove\", this.mousemoveEventHandler);\n    if (this._cvs) {\n      this._cvs.removeEventListener(\"click\", this.clickEventHandler);\n    }\n  }\n\n  resizeEventHandler = (event) => {\n    // console.log(\"canvas, resizeEventHandler\");\n    this._cvs.width = window.innerWidth || document.body.clientWidth;\n    this._cvs.height = window.innerHeight || document.body.clientHeight;\n  };\n\n  mousemoveEventHandler = (event) => {\n    // console.log(\"canvas, mousemove\");\n    this.setMouseLocal(event);\n    this.mouseObj.isMouseMoving = true;\n  };\n\n  clickEventHandler = (event) => {\n    // console.log(\"canvas, mouse click\");\n    this.setMouseLocal(event);\n    this.mouseObj.clicked = true;\n    this.mouseObj.clickedFrame = this._frameCnt;\n  };\n\n  resetMouseObj = () => {\n    this.mouseObj.isMouseMoving = false;\n    this.mouseObj.clicked = false;\n    this.mouseObj.clickedFrame = undefined;\n  };\n\n  setMouseLocal = (event) => {\n    // https://stackoverflow.com/questions/17130395/real-mouse-position-in-canvas\n    let rect = this._cvs.getBoundingClientRect();\n    let borderWidth = 0; // temp\n\n    let scaleX = this._cvs.width / (rect.width - borderWidth * 2);\n    let scaleY = this._cvs.height / (rect.height - borderWidth * 2);\n\n    let mouseX = (event.clientX - (rect.left + borderWidth)) * scaleX;\n    let mouseY = (event.clientY - (rect.top + borderWidth)) * scaleY;\n\n    let padding = 10;\n    let isMouseOverCanvas =\n      mouseX >= padding &&\n      mouseX <= this._cvs.width - padding &&\n      mouseY >= padding &&\n      mouseY <= this._cvs.height - padding;\n\n    this.mouseObj.mouseX = mouseX;\n    this.mouseObj.mouseY = mouseY;\n    this.mouseObj.isMouseOverCanvas = isMouseOverCanvas;\n\n    return {\n      mouseX,\n      mouseY,\n      isMouseOverCanvas,\n    };\n  };\n\n  loop = () => {\n    this._frameCnt += 1;\n    let { draw, isLooped = true } = this.props;\n    draw(this._ctx, this._frameCnt, this.mouseObj);\n    this.resetMouseObj();\n    if (isLooped) {\n      this._frameId = window.requestAnimationFrame(this.loop);\n    }\n  };\n\n  render() {\n    let { width = 300, height = 300 } = this.props;\n    return (\n      <canvas\n        ref={this.canvasRef}\n        width={width}\n        height={height}\n        style={{\n          display: \"block\",\n          // border: \"1px solid black\"\n        }}\n      />\n    );\n  }\n}\n","import * as tf from \"@tensorflow/tfjs\";\n// import * as tfvis from \"@tensorflow/tfjs-vis\";\n\nexport default class Brain {\n  constructor(model) {\n    if (model instanceof tf.Sequential) {\n      this.model = model;\n    } else {\n      this.model = this.createModel();\n    }\n  }\n\n  createModel() {\n    // Create a sequential model\n    const model = tf.sequential();\n\n    // Add a single input layer\n    model.add(\n      tf.layers.dense({ inputShape: [6], units: 8, activation: \"sigmoid\" })\n    );\n\n    // Add an output layer\n    model.add(tf.layers.dense({ units: 2, activation: \"softmax\" }));\n\n    // tfvis.show.modelSummary({ name: \"Model Summary\" }, model);\n\n    return model;\n  }\n\n  predict(input) {\n    return tf.tidy(() => {\n      let xs = tf.tensor2d([input]);\n      let ys = this.model.predict(xs);\n      let outputs = ys.dataSync();\n      return outputs;\n    });\n  }\n\n  copy() {\n    return tf.tidy(() => {\n      let weights = this.model.getWeights();\n      let copied = [];\n      weights.forEach((w) => copied.push(w.clone()));\n\n      let newBrain = new Brain();\n      newBrain.model.setWeights(copied);\n      return newBrain;\n    });\n  }\n\n  mutate(rate = 0.1) {\n    tf.tidy(() => {\n      let weights = this.model.getWeights();\n      let mutated = weights.map((weight) => {\n        let shape = weight.shape;\n        let array = weight.dataSync().slice();\n        for (let i = 0; i < array.length; i++) {\n          if (Math.random() < rate) {\n            let randNum = tf.randomNormal([1]).arraySync()[0];\n            array[i] += randNum;\n          }\n        }\n        return tf.tensor(array, shape);\n      });\n      this.model.setWeights(mutated);\n    });\n  }\n\n  dispose() {\n    this.model.dispose();\n  }\n}\n","// import Vector2D from \"../../Tool/Vector2D\"\nimport Brain from \"./Brain\";\n\nexport default class Bird {\n  constructor(props = {}) {\n    this.setting = props.setting;\n    this.y = props.y;\n\n    this.width = 30;\n    this.height = 15;\n\n    let x = this.setting.x;\n    this.left = x;\n    this.right = x + this.width;\n    this.updateTopBottom(this.y, this.height);\n\n    this.velY = 0;\n    this.accY = 0;\n    this.jumpForce = -1;\n\n    this.maxVelY = 20;\n\n    this.score = 0;\n\n    this.transplantBrain(props.brain);\n  }\n\n  transplantBrain(brain) {\n    if (brain instanceof Brain) {\n      //   console.log(\"transplanted!\");\n      this.brain = brain;\n    } else {\n      //   console.log(\"new brain..\");\n      this.brain = new Brain();\n    }\n  }\n\n  extractBrain() {\n    return this.brain.copy();\n  }\n\n  disposeBrain() {\n    this.brain.dispose();\n  }\n\n  think(pipes) {\n    // todo\n    // make input for neural network\n\n    let { boardWidth, boardHeight } = this.setting;\n    let pipe = pipes[0];\n\n    let inputs = [];\n    inputs[0] = this.y / boardHeight;\n    inputs[1] = this.velY / this.maxVelY;\n    inputs[2] = pipe.left / boardWidth;\n    inputs[3] = pipe.right / boardWidth;\n    inputs[4] = pipe.top / boardHeight;\n    inputs[5] = pipe.bottom / boardHeight;\n\n    let outputs = this.brain.predict(inputs);\n    if (outputs[0] > outputs[1]) {\n      this.jump();\n    }\n  }\n\n  jump() {\n    this.accY += this.jumpForce;\n  }\n\n  applyForceY(v) {\n    this.accY += v;\n  }\n\n  update(ctx) {\n    this.velY += this.accY;\n    this.velY = Math.min(this.velY, this.maxVelY);\n    this.y += this.velY;\n    this.accY = 0;\n\n    this.updateTopBottom();\n    // this.checkEdges(ctx);\n  }\n\n  addScore() {\n    this.score++;\n  }\n\n  display(ctx) {\n    if (this.top <= 0) return;\n    if (this.bottom >= this.setting.boardHeight) return;\n\n    ctx.save();\n    let { originX, originY } = this.setting;\n    ctx.translate(originX, originY);\n    ctx.strokeStyle = `rgba(0, 0, 0, 1)`;\n    ctx.strokeRect(this.setting.x, this.y, this.width, this.height);\n    ctx.restore();\n  }\n\n  updateTopBottom(y = this.y, height = this.height) {\n    this.top = y;\n    this.bottom = y + height;\n  }\n\n  collidesWith(pipe) {\n    // console.log(\"BIRD:\", this.left, this.right, this.top, this.bottom);\n    // console.log(\"PIPE:\", pipe.left, pipe.right, pipe.top, pipe.bottom);\n    let checkX = this.right > pipe.left && this.left < pipe.right;\n    let checkY = this.top < pipe.top || this.bottom > pipe.bottom;\n    if (checkX && checkY) {\n      //   console.log(\"HIT\");\n      return true;\n    }\n    return false;\n  }\n\n  isOutOfStage(ctx) {\n    let { boardHeight } = this.setting;\n\n    // // weaker criteria could be,\n    // this.top < -this.height / 2 ||\n    // this.bottom > boardHeight + this.height / 2\n\n    if (this.top < 0 || this.bottom > boardHeight) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n}\n","export const PAGES = {\n  MAIN: \"main\",\n  CANDY: \"candy\",\n  QUIZ: \"quiz\",\n  XOR: \"xor\",\n  BIRD: \"bird\",\n  MIDAS: \"midas\",\n  WIZLAB: \"wizlab\",\n};\n\nexport const SCREEN_SIZE = {\n  HORI32: { ratio: { w: 3, h: 2 }, max: { w: 840, h: 560 } }, // 3:2\n  VERT169: { ratio: { w: 9, h: 16 }, max: { w: 360, h: 640 } }, // 9:16\n  BIRD400: { max: { h: 400 } },\n  FULL: {},\n};\n\nexport const getScreenRect = (stageWidth, stageHeight, currentPage) => {\n  // bird view\n  if (currentPage === PAGES.BIRD) {\n    let width = stageWidth * 1; // todo: apply birdBoardWidthRatio\n    let height = SCREEN_SIZE.BIRD400.max.h;\n    let left = (stageWidth - width) / 2;\n    let top = (stageHeight - height) / 2;\n    return { width, height, left, top };\n  }\n  // xor view, full screen\n  if (currentPage === PAGES.XOR) {\n    let width = stageWidth;\n    let height = stageHeight;\n    let left = (stageWidth - width) / 2;\n    let top = (stageHeight - height) / 2;\n    return { width, height, left, top };\n  }\n  // wizlab view, vertical\n  if (currentPage === PAGES.WIZLAB) {\n    let widthMax = 840;\n    let width = Math.min(stageWidth, widthMax);\n    let height = stageHeight;\n    let left = (stageWidth - width) / 2;\n    let top = (stageHeight - height) / 2;\n    return { width, height, left, top };\n  }\n  // others\n  let scrSize = SCREEN_SIZE.HORI32;\n  if (currentPage === PAGES.QUIZ) {\n    scrSize = SCREEN_SIZE.VERT169;\n  } else if (currentPage === PAGES.MIDAS) {\n    scrSize = SCREEN_SIZE.VERT169;\n  }\n\n  let ratio = scrSize.ratio;\n  let height, width;\n  if (stageWidth / stageHeight > ratio.w / ratio.h) {\n    // by height\n    height = stageHeight * 0.8;\n    height = Math.min(height, scrSize.max.h);\n    width = height * (ratio.w / ratio.h);\n  } else {\n    // by width\n    width = stageWidth * 0.8;\n    width = Math.min(width, scrSize.max.w);\n    height = width * (ratio.h / ratio.w);\n  }\n  let left = (stageWidth - width) / 2;\n  let top = (stageHeight - height) / 2;\n\n  return { width, height, left, top };\n};\n","import Bird from \"./Bird\";\nimport { SCREEN_SIZE } from \"../../Constant\";\n\nclass Setting {\n  constructor(props = {}) {\n    this.updateSize(props);\n  }\n\n  updateSize(props) {\n    // console.log(\"BirdGroup Setting\", props);\n    this.cvsWidth = props.cvsWidth;\n    this.cvsHeight = props.cvsHeight;\n\n    this.boardWidthRadio = props.boardWidthRadio;\n    this.boardWidth = this.cvsWidth * this.boardWidthRadio;\n    this.boardHeight = SCREEN_SIZE.BIRD400.max.h;\n\n    // warning! originX and Y is just for displaying!\n    this.originX = (this.cvsWidth - this.boardWidth) / 2;\n    this.originY = (this.cvsHeight - this.boardHeight) / 2;\n\n    // todo: to locate bird in center of screen, getClosestPipesFrom logic should be refactored.\n    // this.x = (this.boardWidth) / 2;\n    this.x = 120;\n    this.groupSize = 50;\n    this.gravity = 0.5;\n  }\n}\n\nexport default class BirdGroup {\n  constructor(props) {\n    this.setting = new Setting(props);\n    this.survivors = [];\n    this.deads = [];\n\n    this.generationNum = 1;\n    this.distance = 0;\n    this.createBirds();\n  }\n\n  resize(props) {\n    this.setting.updateSize(props);\n  }\n\n  createBirds() {\n    for (let i = 0; i < this.setting.groupSize; i++) {\n      let bird = new Bird({\n        setting: this.setting,\n        y: this.getRandomY(),\n      });\n      this.survivors.push(bird);\n    }\n  }\n\n  getRandomY() {\n    let { boardHeight } = this.setting;\n    let y = boardHeight * 0.1;\n    y += Math.floor(Math.random() * (boardHeight * 0.8));\n    return y;\n  }\n\n  run(ctx, pipeGroup) {\n    // get the target pipes\n    let subPipes = pipeGroup.getClosestPipesFrom(this.setting.x, 2);\n    // console.log(subPipes[0].id, subPipes[1].id);\n\n    for (let i = this.survivors.length - 1; i >= 0; i--) {\n      let bird = this.survivors[i];\n\n      // check whether the bird is kill by pipes,\n      // and if not dead, return inputs for 'think' method.\n      let isDead = bird.collidesWith(subPipes[0]);\n      isDead = isDead || bird.isOutOfStage(ctx);\n      if (isDead) {\n        let dropout = this.survivors.splice(i, 1);\n        this.deads.push(dropout[0]);\n        continue;\n      }\n\n      // only if the bird survives,\n      bird.addScore();\n      bird.think(subPipes);\n      bird.applyForceY(this.setting.gravity);\n      bird.update(ctx);\n      bird.display(ctx);\n    }\n\n    this.distance++;\n  }\n\n  drawDashboard(ctx) {\n    // guide text\n    ctx.fillStyle = `rgba(0, 0, 0, 1)`;\n    ctx.font = \"12px NanumSquareRound, sans-serif\";\n    ctx.textBaseline = \"top\";\n\n    let x = this.setting.originX + 20;\n    let y = this.setting.originY + this.setting.boardHeight - 50;\n\n    ctx.fillText(`Gen : ${this.generationNum}`, x, y);\n    ctx.fillText(\n      `Bird : ${this.survivors.length} / ${this.setting.groupSize}`,\n      x,\n      y + 12\n    );\n    ctx.fillText(`Dist : ${this.distance}`, x, y + 23);\n  }\n\n  evolveNextGeneration() {\n    // selection: calculate fitness\n    let sum = 0;\n    let largest = 0;\n    this.deads.forEach((bird) => {\n      bird.score = bird.score * bird.score;\n      sum += bird.score;\n    });\n    this.deads.forEach((bird) => {\n      bird.fitness = bird.score / sum;\n      if (bird.fitness > largest) {\n        largest = bird.fitness;\n      }\n    });\n    // console.log(\"FITNESS\", sum, largest);\n\n    // reproduction:\n    if (this.survivors.length > 0) {\n      throw new Error(\"there is a ghost bird!!!\");\n    }\n\n    for (let i = 0; i < this.setting.groupSize; i++) {\n      // pick one parent with probability according to relative fitness\n      let parent = this.pickOne();\n      // and copy it (rather than crossover)\n      let brain = parent.extractBrain(); // get new brain object\n      // mutate\n      brain.mutate(0.1);\n      let child = new Bird({\n        setting: this.setting,\n        y: this.getRandomY(),\n        brain: brain,\n      });\n\n      this.survivors.push(child);\n    }\n\n    // dispose deads\n    for (let i = 0; i < this.deads.length; i++) {\n      let dead = this.deads[i];\n      dead.disposeBrain();\n    }\n    this.deads = [];\n\n    this.generationNum++;\n    this.distance = 0;\n  }\n\n  pickOne() {\n    let idx = 0;\n    let r = Math.random();\n    while (r > 0) {\n      r -= this.deads[idx].fitness;\n      idx++;\n    }\n    idx--;\n    let picked = this.deads[idx];\n    return picked;\n  }\n}\n","export default class Pipe {\n  constructor(props) {\n    this.setting = props.setting;\n    this.x = props.x;\n    this.top = props.top;\n\n    this.updateTopBottom(this.top);\n    this.updateLeftRight(this.x);\n\n    this.outStage = false;\n  }\n\n  update(ctx) {\n    this.x += this.setting.velX;\n    this.updateLeftRight(this.x);\n    this.checkEdges(ctx);\n  }\n\n  display(ctx) {\n    ctx.save();\n\n    let { originX, originY, pipeWidth, boardHeight } = this.setting;\n    ctx.translate(originX, originY);\n    ctx.fillStyle = \"rgba(0,0,0,0.3)\";\n    ctx.fillRect(this.x, 0, pipeWidth, this.top);\n    ctx.fillRect(this.x, this.bottom, pipeWidth, boardHeight - this.bottom);\n\n    ctx.restore();\n  }\n\n  checkEdges(ctx) {\n    // 처음 x 설정 시 originX 없이 0을 기준으로 boardWidth만 사용하기 때문에,\n    // display 할 때만 originX 가 활용되고, checkEdge 할 때는 originX를 고민하지 않아도 됨\n    if (this.x < -this.setting.pipeWidth) {\n      this.outStage = true;\n    }\n  }\n\n  updateTopBottom(top) {\n    this.top = top;\n    this.bottom = top + this.setting.pipeGap;\n  }\n\n  updateLeftRight(x) {\n    this.left = x;\n    this.right = x + this.setting.pipeWidth;\n  }\n}\n","import Pipe from \"./Pipe\";\nimport { SCREEN_SIZE } from \"../../Constant\";\n\nclass Setting {\n  constructor(props = {}) {\n    this.updateSize(props);\n  }\n\n  updateSize(props) {\n    // console.log(\"PipeGroup Setting\", props);\n    this.cvsWidth = props.cvsWidth;\n    this.cvsHeight = props.cvsHeight;\n\n    this.boardWidthRadio = props.boardWidthRadio;\n    this.boardWidth = this.cvsWidth * this.boardWidthRadio;\n    this.boardHeight = SCREEN_SIZE.BIRD400.max.h;\n\n    // warning! originX and Y is just for displaying!\n    this.originX = (this.cvsWidth - this.boardWidth) / 2;\n    this.originY = (this.cvsHeight - this.boardHeight) / 2;\n\n    // todo: update pipe related values by screen size\n    this.interval = 160;\n    this.pipeWidth = 80;\n    this.pipeGap = 100;\n    this.velX = -5;\n  }\n}\n\nexport default class PipeGroup {\n  constructor(props) {\n    this.setting = new Setting(props);\n    this.restart();\n  }\n\n  resize(props) {\n    this.setting.updateSize(props);\n    this.restart();\n  }\n\n  restart() {\n    this.pipes = [];\n    let { boardWidth, interval, pipeWidth } = this.setting;\n\n    let intervalWidth = interval + pipeWidth;\n\n    let startPoint = boardWidth;\n    let pipeCnt = Math.ceil(boardWidth / intervalWidth);\n    pipeCnt += 2;\n    this.frontIndex = 0;\n    // console.log(\"pipeCnt: \", pipeCnt);\n\n    for (let i = 0; i < pipeCnt; i++) {\n      let x = startPoint + intervalWidth * i;\n      let top = this.getRandomTop();\n      let pipe = new Pipe({ setting: this.setting, x, top });\n      // for debug\n      pipe.id = i;\n      this.pipes.push(pipe);\n    }\n  }\n\n  run(ctx) {\n    let { interval, pipeWidth, pipeGap } = this.setting;\n\n    for (let i = 0; i < this.pipes.length; i++) {\n      let pipe = this.pipes[i];\n      if (pipe.outStage) {\n        this.frontIndex = i < this.pipes.length - 1 ? i + 1 : 0;\n        let prev = i > 0 ? i - 1 : this.pipes.length - 1;\n        // console.log(i, prev, this.frontIndex);\n        prev = this.pipes[prev];\n        pipe.x = prev.x + pipeWidth + interval;\n        pipe.updateTopBottom(this.getRandomTop(), pipeGap);\n        pipe.outStage = false;\n      }\n      pipe.update(ctx);\n      pipe.display(ctx);\n    }\n  }\n\n  getRandomTop() {\n    let { boardHeight, pipeGap } = this.setting;\n    let top = 0;\n    top += boardHeight * 0.1;\n    top += Math.floor(Math.random() * (boardHeight * 0.8 - pipeGap));\n    return top;\n  }\n\n  getClosestPipesFrom(x, num = 1) {\n    num = Math.min(num, this.pipes.length);\n    let subPipes = [];\n    let idx = this.frontIndex;\n    if (this.pipes[this.frontIndex].right < x) {\n      idx = idx < this.pipes.length - 1 ? idx + 1 : 0;\n    }\n    for (let i = 0; i < num; i++) {\n      subPipes.push(this.pipes[idx]);\n      idx = idx < this.pipes.length - 1 ? idx + 1 : 0;\n    }\n    return subPipes;\n  }\n}\n","import { NODE_TYPE } from \"./Genome\";\n\nexport class Gene {\n  // constructor() {}\n\n  getInitValue() {\n    // TODO: add option to make value with random gaussian\n    return Math.random() * 2 - 1;\n  }\n\n  getDeltaValue() {\n    // TODO: add option to make value with random gaussian\n    return (Math.random() * 2 - 1) / 5;\n  }\n}\n\nexport class NodeGene extends Gene {\n  constructor(props = {}) {\n    super(props);\n    this.nodeNum = props.nodeNum;\n    this.type = props.type;\n    this.layer = props.layer || 0;\n\n    this.fromHereConns = [];\n    this.toHereConns = [];\n\n    if (props.type !== NODE_TYPE.I) {\n      this.initBias();\n    }\n    this.activation = props.activation || \"identity\";\n    this.outValue = 0;\n  }\n\n  initBias() {\n    this.bias = this.getInitValue();\n  }\n\n  mutateBias() {\n    if (Math.random() < 0.9) {\n      // uniformly perturbed\n      this.bias += this.getDeltaValue();\n    } else {\n      // assigned a new random variable\n      this.initBias();\n    }\n  }\n\n  mutateActivation() {}\n\n  copy() {\n    let copied = new NodeGene({\n      nodeNum: this.nodeNum,\n      type: this.type,\n      layer: this.layer,\n      activation: this.activation,\n    });\n    copied.fromHereConns = this.fromHereConns.slice();\n    copied.toHereConns = this.toHereConns.slice();\n    copied.bias = this.bias;\n    // copied.outValue = this.outValue;\n\n    return copied;\n  }\n}\n\nexport class ConnectionGene extends Gene {\n  constructor(props = {}) {\n    super(props);\n    this.invNum = props.invNum;\n    this.type = props.type;\n    this.from = props.from;\n    this.to = props.to;\n\n    this.enabled = true;\n    this.initWeight(props.weight);\n  }\n\n  initWeight(weight) {\n    this.weight = weight || this.getInitValue();\n  }\n\n  mutateWeight() {\n    if (Math.random() < 0.9) {\n      // uniformly perturbed\n      this.weight += this.getDeltaValue();\n    } else {\n      // assigned a new random variable\n      this.initWeight();\n    }\n  }\n\n  disable() {\n    this.enabled = false;\n  }\n\n  copy() {\n    let copied = new ConnectionGene({\n      invNum: this.invNum,\n      type: this.type,\n      from: this.from,\n      to: this.to,\n    });\n    copied.weight = this.weight;\n    copied.enabled = this.enabled;\n\n    return copied;\n  }\n}\n","const Activation = {\n  identity: (x) => x,\n  sigmoid: (x) => 1 / (1 + Math.pow(Math.E, -1 * x)),\n  modifiedSigmoid: (x) => 1 / (1 + Math.pow(Math.E, -4.9 * x)),\n  step: (x) => (x > 0 ? 1 : 0),\n};\n\nexport default Activation;\n","import { NodeGene, ConnectionGene } from \"./Gene\";\nimport Activation from \"./Activation\";\n\nexport const NODE_TYPE = {\n  I: \"NODE_INPUT\",\n  H: \"NODE_HIDDEN\",\n  O: \"NODE_OUTPUT\",\n};\n\nexport const CONN_TYPE = {\n  F: \"CONN_FORWARD\",\n  R: \"CONN_RECURRENT\",\n};\n\nexport default class Genome {\n  constructor(props) {\n    this.setting = props.setting;\n    this.inputSize = this.setting.inputSize;\n    this.outputSize = this.setting.outputSize;\n\n    // nodes is orders of calculation\n    this.nodes = [];\n    this.nodeMap = {};\n    this.connMap = {};\n\n    if (props.isPrimal) {\n      this.createPrimal();\n    }\n  }\n\n  initNode(props) {\n    let { nodeNum, order } = props;\n    let node = new NodeGene(props);\n    if (order === undefined) {\n      order = this.nodes.length;\n    }\n    this.nodes.splice(order, 0, nodeNum);\n    this.nodeMap[nodeNum] = node;\n\n    return node;\n  }\n\n  initConn(props) {\n    let { invNum, from, to } = props;\n    let conn = new ConnectionGene(props);\n    this.connMap[invNum] = conn;\n\n    this.nodeMap[from].fromHereConns.push(invNum);\n    this.nodeMap[to].toHereConns.push(invNum);\n\n    return conn;\n  }\n\n  createPrimal() {\n    for (let i = 0; i < this.inputSize; i++) {\n      let nodeNum = this.setting.addLastNodeNum();\n      this.initNode({\n        nodeNum,\n        type: NODE_TYPE.I,\n        layer: 0,\n      });\n    }\n    for (let i = 0; i < this.outputSize; i++) {\n      let nodeNum = this.setting.addLastNodeNum();\n      this.initNode({\n        nodeNum,\n        type: NODE_TYPE.O,\n        layer: 1,\n        activation: \"modifiedSigmoid\",\n      });\n    }\n\n    for (let i = 0; i < this.inputSize; i++) {\n      for (let j = this.inputSize; j < this.inputSize + this.outputSize; j++) {\n        let invNum = this.setting.addLastInvNum();\n        this.initConn({ invNum, type: CONN_TYPE.F, from: i, to: j });\n      }\n    }\n  }\n\n  predict(input) {\n    let output = [];\n\n    // make outValue of each node\n    for (let i = 0; i < this.nodes.length; i++) {\n      let nodeNum = this.nodes[i];\n      let node = this.nodeMap[nodeNum];\n\n      if (node.type === NODE_TYPE.I) {\n        node.outValue = input[i];\n        continue;\n      }\n\n      let weightedSum = 0;\n      for (let k = 0; k < node.toHereConns.length; k++) {\n        let invNum = node.toHereConns[k];\n        let conn = this.connMap[invNum];\n        if (conn.enabled) {\n          weightedSum += this.nodeMap[conn.from].outValue * conn.weight;\n        }\n      }\n      let func = Activation[node.activation];\n      node.outValue = func(weightedSum + node.bias);\n      if (node.type === NODE_TYPE.O) {\n        output.push(node.outValue);\n      }\n    }\n\n    return output;\n  }\n\n  copy() {\n    let copied = new Genome({ setting: this.setting });\n    copied.nodes = this.nodes.slice();\n\n    for (let nodeNum in this.nodeMap) {\n      copied.nodeMap[nodeNum] = this.nodeMap[nodeNum].copy();\n    }\n\n    for (let invNum in this.connMap) {\n      copied.connMap[invNum] = this.connMap[invNum].copy();\n    }\n\n    return copied;\n  }\n\n  calculateFitness() {}\n\n  crossover(partner) {\n    // compare the fitness score of this and partner,\n    // and set to parent1 and parent2, where parent1 is more fit one.\n    let parent1, parent2;\n    // console.log(\"crossover:\", this.fitness > partner.fitness);\n    if (this.fitness > partner.fitness) {\n      parent1 = this;\n      parent2 = partner;\n    } else {\n      parent1 = partner;\n      parent2 = this;\n    }\n\n    let child = new Genome({ setting: this.setting });\n    child.nodes = parent1.nodes.slice();\n    // set nodes\n    // just copy from more fit parent\n    // 이 때 layer 복사를 랜덤으로 하면 topology가 꼬인다\n    for (let nodeNum in parent1.nodeMap) {\n      child.nodeMap[nodeNum] = parent1.nodeMap[nodeNum].copy();\n      if (nodeNum in parent2.nodeMap) {\n        if (Math.random() > 0.5) {\n          child.nodeMap[nodeNum].bias = parent2.nodeMap[nodeNum].bias;\n        }\n      }\n    }\n    // set conns\n    for (let invNum in parent1.connMap) {\n      child.connMap[invNum] = parent1.connMap[invNum].copy();\n      if (invNum in parent2.connMap) {\n        if (Math.random() > 0.5) {\n          //   child.connMap[invNum].weight = parent2.connMap[invNum].weight;\n          //   child.connMap[invNum].enabled = parent2.connMap[invNum].enabled;\n          child.connMap[invNum] = parent2.connMap[invNum].copy();\n        }\n      }\n    }\n\n    return child;\n  }\n\n  mutate(keepStructure = false) {\n    for (let invNum in this.connMap) {\n      let conn = this.connMap[invNum];\n      if (Math.random() < 0.8) conn.mutateWeight();\n    }\n    for (let nodeNum in this.nodeMap) {\n      let node = this.nodeMap[nodeNum];\n      if (Math.random() < 0.8) node.mutateBias();\n      //   if (Math.random() < 0.01) node.mutateActivation();\n    }\n\n    if (keepStructure) return;\n    if (Math.random() < 0.03) this.addNode();\n    if (Math.random() < 0.05) this.addConn();\n\n    // // // DEBUG CODE\n    // if (Math.random() < 0.5) this.addNode();\n    // else {\n    //   this.addNode();\n    //   this.addConn();\n    // }\n  }\n\n  getNodeFromNodeIndex(idx) {\n    return this.nodeMap[this.nodes[idx]];\n  }\n\n  selectEnabledConn() {\n    let candidates = [];\n    for (let invNum in this.connMap) {\n      let conn = this.connMap[invNum];\n      if (conn.enabled) candidates.push(invNum);\n    }\n    if (candidates.length <= 0) {\n      return undefined;\n    }\n    return candidates[Math.floor(Math.random() * candidates.length)];\n  }\n\n  selectNewConn(blockRecurrent = false) {\n    // the layers of fromNode and toNode should be different.\n    // and toNode should not be input layer.\n    // check to block recurrent or not\n    let candidates = [];\n    for (let to in this.nodeMap) {\n      to = parseInt(to);\n      let toNode = this.nodeMap[to];\n      if (toNode.layer === 0) continue;\n      let used = toNode.toHereConns.map((invNum) => {\n        return this.connMap[invNum].from;\n      });\n      for (let from in this.nodeMap) {\n        from = parseInt(from);\n        let fromNode = this.nodeMap[from];\n        if (fromNode.layer === toNode.layer) continue;\n        if (used.indexOf(from) === -1) {\n          let type;\n          if (toNode.layer > fromNode.layer) {\n            type = CONN_TYPE.F;\n          } else {\n            if (blockRecurrent) continue;\n            type = CONN_TYPE.R;\n          }\n          candidates.push({ from, to, type });\n        }\n      }\n    }\n    if (candidates.length <= 0) {\n      return undefined;\n    }\n    return candidates[Math.floor(Math.random() * candidates.length)];\n  }\n\n  addNode() {\n    // should report the structural innovation to setting\n    // to check whether the same structural innovation\n    // in the current generation occurs.\n\n    // select an existing conn which is not disabled\n    let oldInvNum = this.selectEnabledConn();\n    if (oldInvNum === undefined) return false;\n    let oldConn = this.connMap[oldInvNum];\n\n    // check the conn is already innovated in current generation\n    let invResult = this.setting.addInvResult({\n      toSplit: oldConn.invNum,\n      from: oldConn.from,\n      to: oldConn.to,\n    });\n    // console.log(\"addNode: invResult\", invResult);\n\n    // // innovate structure\n    // select layer\n    let fromNode = this.nodeMap[oldConn.from];\n    let toNode = this.nodeMap[oldConn.to];\n\n    let lowLayer, highLayer;\n    if (toNode.layer > fromNode.layer) {\n      // oldConn.type === CONN_TYPE.F\n      lowLayer = fromNode.layer;\n      highLayer = toNode.layer;\n    } else {\n      // oldConn.type === CONN_TYPE.R\n      lowLayer = toNode.layer;\n      highLayer = fromNode.layer;\n    }\n    let layerDist = highLayer - lowLayer;\n    let layer = lowLayer + 1; // if this line is changed, many things should be changed.\n\n    // console.log(\"addNode: layerDist\", oldConn.type, layerDist);\n    // console.log(\"addNode: newNodeLayer\", layer);\n\n    // update other nodes' layer\n    let spliceIndex;\n    for (let i = 0; i < this.nodes.length; i++) {\n      let node = this.getNodeFromNodeIndex(i);\n      if (node.layer >= layer) {\n        spliceIndex = i;\n        break;\n      }\n    }\n    // console.log(\"addNode: spliceIndex\", spliceIndex);\n    if (layerDist <= 1) {\n      for (let i = spliceIndex; i < this.nodes.length; i++) {\n        let node = this.getNodeFromNodeIndex(i);\n        node.layer++;\n      }\n    }\n\n    // make Node\n    let { nodeNum, invNum1, invNum2 } = invResult;\n    this.initNode({\n      nodeNum,\n      type: NODE_TYPE.H,\n      layer,\n      order: spliceIndex,\n      activation: \"modifiedSigmoid\",\n    });\n\n    // make Conns\n    this.initConn({\n      invNum: invNum1,\n      type: oldConn.type,\n      from: oldConn.from,\n      to: nodeNum,\n      weight: 1,\n    });\n    this.initConn({\n      invNum: invNum2,\n      type: oldConn.type,\n      from: nodeNum,\n      to: oldConn.to,\n      weight: oldConn.weight,\n    });\n    // disable oldConn\n    oldConn.disable();\n  }\n\n  addConn() {\n    // select new conn\n    let newConn = this.selectNewConn(this.setting.blockRecurrent);\n    // if there is no more room for new conn, return false\n    if (newConn === undefined) return false;\n    let { from, to, type } = newConn;\n    // console.log(\"addConn:\", from, to, type);\n\n    // check the conn is already innovated in current generation\n    let invResult = this.setting.addInvResult({ from, to });\n    // console.log(\"addConn: invResult\", invResult);\n    // innovate structure\n    let { invNum } = invResult;\n    this.initConn({\n      invNum,\n      type,\n      from,\n      to,\n    });\n  }\n\n  measureDist(other) {\n    if (!(other instanceof Genome)) {\n      throw new Error(\n        \"To measure distance, other should be instance of Genome.\"\n      );\n    }\n\n    let matching = [];\n    let myLeft = [];\n    let otherLeft = [];\n    for (let invNum in this.connMap) {\n      invNum = parseInt(invNum);\n      if (invNum in other.connMap) {\n        matching.push(invNum);\n      } else {\n        myLeft.push(invNum);\n      }\n    }\n    for (let invNum in other.connMap) {\n      invNum = parseInt(invNum);\n      if (!(invNum in this.connMap)) {\n        otherLeft.push(invNum);\n      }\n    }\n    let N = matching.length + Math.max(myLeft.length, otherLeft.length);\n    let matchingMax = Math.max(...matching);\n\n    let disjointCnt = 0;\n    let excessCnt = 0;\n    for (let i = 0; i < myLeft.length; i++) {\n      let invNum = myLeft[i];\n      if (invNum < matchingMax) disjointCnt++;\n      else excessCnt++;\n    }\n    for (let i = 0; i < otherLeft.length; i++) {\n      let invNum = otherLeft[i];\n      if (invNum < matchingMax) disjointCnt++;\n      else excessCnt++;\n    }\n\n    let weightDiff = 0;\n    for (let i = 0; i < matching.length; i++) {\n      let invNum = matching[i];\n      let myWeight = this.connMap[invNum].weight;\n      let otherWeight = other.connMap[invNum].weight;\n      weightDiff += Math.abs(myWeight - otherWeight);\n    }\n\n    // console.log(Object.keys(this.connMap), Object.keys(other.connMap));\n    // console.log(\"arrays\", matching, myLeft, otherLeft);\n    // console.log(\"matching\", N, matchingMax, disjointCnt, excessCnt, weightDiff);\n\n    let { distC1, distC2, distC3 } = this.setting;\n    let result = (distC1 * excessCnt) / N;\n    result += (distC2 * disjointCnt) / N;\n    if (matching.length > 0) result += (distC3 * weightDiff) / matching.length;\n    // console.log(\"result\", result);\n    return result;\n  }\n}\n","import Genome, { CONN_TYPE } from \"./Genome\";\n\nexport default class Agent {\n  constructor(props) {\n    let { setting, isPrimal = false } = props;\n    this.setting = setting;\n    this.agentId = undefined;\n    this.speciesNum = undefined;\n\n    this.xor = [];\n    this.score = 0;\n    this.adjustedScore = undefined;\n    if (isPrimal) {\n      this.isPrimal = isPrimal;\n      this.genome = new Genome({ setting, isPrimal });\n      // console.log(\"primal genome\", this.genome);\n    }\n  }\n\n  setId(id) {\n    this.agentId = id;\n  }\n  getId() {\n    return this.agentId;\n  }\n  setSpecies(speciesNum) {\n    this.speciesNum = speciesNum;\n  }\n  getSpecies() {\n    return this.speciesNum;\n  }\n\n  asexual(keepStructure = false) {\n    // asexual reproduction\n    // console.log(\"Agent: reproduce asexually\");\n    let child = new Agent({ setting: this.setting });\n    child.genome = this.genome.copy();\n    child.genome.mutate(keepStructure);\n    return child;\n  }\n\n  sexual(partner) {\n    if (!(partner instanceof Agent)) {\n      throw new Error(\"sexual reproduction needs partner\");\n    }\n    // console.log(\"Agent: reproduce with partner\");\n    let child = new Agent({ setting: this.setting });\n    child.genome = this.genome.crossover(partner.genome);\n    return child;\n  }\n\n  geneticDist(other) {\n    return this.genome.measureDist(other.genome);\n  }\n\n  think(ctx, frameCnt) {\n    // just in case, reset values\n    this.xor.splice(0, this.xor.length);\n    this.score = 0;\n\n    let xs = [\n      [0, 0],\n      [0, 1],\n      [1, 0],\n      [1, 1],\n    ];\n    let ys = [0, 1, 1, 0];\n\n    for (let i = 0; i < xs.length; i++) {\n      let x = xs[i];\n      let y = ys[i];\n      let output = this.genome.predict(x)[0];\n      this.xor.push(output);\n      this.score += 1 - (y - output) * (y - output);\n    }\n\n    // console.log(`Agent ${this.agentId}:`, this.score, this.xor);\n  }\n\n  run(ctx, local) {\n    if (typeof this.agentId !== \"number\") {\n      return; // TODO\n    }\n\n    ctx.save();\n    let boardWidth = this.setting.boardWidth;\n    let areaWidth = this.setting.areaWidth;\n    let areaHeight = this.setting.areaHeight;\n\n    let colCnt = Math.floor(boardWidth / areaWidth);\n\n    let agentX = (local % colCnt) * areaWidth;\n    let agentY = Math.floor(local / colCnt) * areaHeight;\n\n    ctx.translate(agentX, agentY);\n\n    // draw nodes by layer\n    let nodeMap = this.genome.nodeMap;\n    let connMap = this.genome.connMap;\n    let layers = {};\n    for (let nodeNum in nodeMap) {\n      let node = nodeMap[nodeNum];\n      let layer = node.layer;\n      if (!(layer in layers)) {\n        layers[layer] = [];\n      }\n      layers[layer].push(node);\n    }\n    let layersLength = Object.keys(layers).length;\n\n    ctx.textAlign = \"center\";\n    ctx.textBaseline = \"middle\";\n    ctx.font = \"8px\";\n    ctx.globalCompositeOperation = \"destination-over\";\n\n    ctx.strokeStyle = `rgba(0, 0, 0, 0.2)`;\n    ctx.strokeRect(0, 0, areaWidth, areaHeight);\n\n    let nodeLocal = {};\n    for (let layer in layers) {\n      let layerNodes = layers[layer];\n      for (let i = 0; i < layerNodes.length; i++) {\n        let node = layerNodes[i];\n        let nodeX = ((parseInt(layer) + 1) * areaWidth) / (layersLength + 1);\n        let nodeY = ((i + 1) * areaHeight) / (layerNodes.length + 1);\n        if (layer % 2 === 1) nodeY -= areaHeight / (layerNodes.length + 1) / 2;\n        nodeLocal[node.nodeNum] = [nodeX, nodeY];\n        ctx.save();\n        ctx.translate(nodeX, nodeY);\n\n        ctx.fillText(`${node.nodeNum}`, 0, 0);\n\n        ctx.strokeStyle = `rgba(0, 0, 0, 1)`;\n        ctx.fillStyle = `rgba(255, 255, 255, 1)`;\n        ctx.beginPath();\n        ctx.arc(0, 0, 8, 0, Math.PI * 2);\n        ctx.stroke();\n        ctx.fill();\n\n        ctx.restore();\n      }\n    }\n\n    // connect them\n    for (let invNum in connMap) {\n      let conn = connMap[invNum];\n      if (!conn.enabled) continue;\n      let fromNode = nodeLocal[conn.from];\n      let toNode = nodeLocal[conn.to];\n      if (conn.type === CONN_TYPE.R) {\n        ctx.save();\n        ctx.strokeStyle = this.connStyle(conn.weight);\n        ctx.beginPath();\n        ctx.moveTo(fromNode[0], fromNode[1]);\n        ctx.setLineDash([3, 2]);\n        ctx.quadraticCurveTo(\n          (fromNode[0] + toNode[0]) / 2,\n          toNode[1],\n          toNode[0],\n          toNode[1]\n        );\n        ctx.stroke();\n        ctx.restore();\n      } else {\n        ctx.save();\n        ctx.strokeStyle = this.connStyle(conn.weight);\n        ctx.beginPath();\n        ctx.moveTo(fromNode[0], fromNode[1]);\n        ctx.lineTo(toNode[0], toNode[1]);\n        ctx.stroke();\n        ctx.restore();\n      }\n    }\n\n    // console.log(\"Agent run: genome\", this.genome);\n    ctx.textAlign = \"left\";\n    ctx.fillText(`S${this.speciesNum}`, 5, 10);\n    let scoreText = Math.round(this.score * 100) / 100;\n    ctx.fillText(`${scoreText}`, 5, 20);\n\n    ctx.fillStyle = `rgba(0,0,0,${0.1 * this.speciesNum - 0.1})`;\n    ctx.fillRect(0, 0, areaWidth, areaHeight);\n\n    ctx.restore();\n  }\n\n  connStyle(weight) {\n    let alpha = Math.min(Math.abs(weight), 1);\n    if (weight > 0) {\n      return `rgba(235, 0, 74, ${alpha})`;\n    } else {\n      return `rgba(0, 140, 252, ${alpha})`;\n    }\n  }\n\n  update(ctx) {}\n\n  display(ctx) {}\n}\n","export default class Species {\n  constructor(props) {\n    this.setting = props.setting;\n    this.speciesNum = props.speciesNum;\n    this.initGenNum = props.initGenNum;\n\n    this.representative = props.agent;\n    this.agents = [];\n    this.nextAgents = [];\n    this.isSorted = false;\n\n    this.avgFitness = 0.01; // TODO: initial avgFitness\n    this.isExtinct = false;\n\n    this.ancestors = [];\n  }\n\n  adjustFitness() {\n    let size = this.agents.length;\n    let average = 0;\n    for (let i = 0; i < this.agents.length; i++) {\n      let agent = this.agents[i];\n      agent.adjustedScore = agent.score / size;\n      average += agent.adjustedScore;\n    }\n    average = Math.max(average, 0.01); // temp\n    this.avgFitness = average;\n    return average;\n  }\n\n  sortByFitness() {\n    this.agents.sort((a, b) => {\n      return b.score - a.score;\n    });\n    this.isSorted = true;\n  }\n\n  eliminateLowest() {\n    this.sortByFitness();\n    let survivalRate = 1 - this.setting.eliminationRate;\n    let limit = Math.floor(this.agents.length * survivalRate);\n    limit = Math.max(limit, 2);\n    this.agents = this.agents.slice(0, limit);\n  }\n\n  getHighest() {\n    if (this.isExtinct) {\n      return undefined;\n    }\n    if (!this.isSorted) {\n      this.sortByFitness();\n    }\n    return this.agents[0];\n  }\n\n  getSpeciesSize() {\n    return this.agents.length;\n  }\n\n  setExtinction() {\n    this.isExtinct = true;\n    this.avgFitness = 0;\n  }\n\n  setAvgFitness(fitness) {\n    this.avgFitness = fitness;\n  }\n\n  getRepresentative() {\n    return this.representative;\n  }\n\n  setRepresentative(criteria) {\n    // todo: set representative by fitness\n    let index = Math.floor(Math.random() * this.agents.length);\n    this.representative = this.agents[index];\n    return this.representative;\n  }\n\n  getSingleParent() {\n    let index = Math.floor(Math.random() * this.agents.length);\n    return this.agents[index];\n  }\n\n  keepNextAgent(agent) {\n    // console.log(\n    //   \"Species: keepNextAgent,\",\n    //   \"species\",\n    //   this.speciesNum,\n    //   \"agentId\",\n    //   agentId\n    // );\n    this.nextAgents.push(agent);\n  }\n\n  update() {\n    // if (this.initGenNum <= this.setting.getGenerationNum()) {\n    //   let curr = {\n    //     generationNum: this.setting.getGenerationNum(),\n    //     representative: this.representative,\n    //     agents: this.agents.slice(),\n    //     avgFitness: this.avgFitness,\n    //   };\n    //   this.ancestors.push(curr);\n    // }\n\n    this.representative = undefined;\n    this.agents = this.nextAgents;\n    this.isSorted = false;\n    this.nextAgents = [];\n  }\n}\n","export default class GenerationSetting {\n  constructor(props = {}) {\n    this.groupSize = 36;\n    this.generationNum = 0;\n    this.lastSpeciesNum = 0;\n    this.lastAgentId = 0;\n\n    this.inputSize = 2;\n    this.outputSize = 1;\n    this.lastNodeNum = -1;\n    this.lastInvNum = -1;\n\n    this.blockRecurrent = false;\n\n    this.distC1 = 1.0;\n    this.distC2 = 1.0;\n    this.distC3 = 0.4;\n    this.compatibilityThreshold = 3.0;\n    this.eliminationRate = 0.5;\n\n    this.areaWidth = 120;\n    this.areaHeight = 80;\n\n    this.generationLimit = 2000;\n\n    // reset every generation\n    this.invResults = [];\n    this.updateSize(props);\n  }\n\n  updateSize(props) {\n    // console.log(\"BirdGroup Setting\", props);\n    this.cvsWidth = props.cvsWidth;\n    this.cvsHeight = props.cvsHeight;\n\n    this.boardWidth = this.cvsWidth - (this.cvsWidth % this.areaWidth);\n    this.boardWidth = Math.min(this.boardWidth, this.areaWidth * 6);\n    let colCnt = Math.floor(this.boardWidth / this.areaWidth);\n    this.boardHeight = this.cvsHeight - (this.cvsHeight % this.areaHeight);\n    let rowCnt = Math.floor(this.groupSize / colCnt);\n    this.boardHeight = Math.min(this.boardHeight, this.areaHeight * rowCnt);\n\n    // warning! originX and Y is just for displaying!\n    this.originX = (this.cvsWidth - this.boardWidth) / 2;\n    this.originY = (this.cvsHeight - this.boardHeight) / 2;\n  }\n\n  getGenerationNum() {\n    return this.generationNum;\n  }\n  addGenerationNum() {\n    this.generationNum++;\n    return this.generationNum;\n  }\n\n  getLastSpeciesNum() {\n    return this.lastSpeciesNum;\n  }\n  addLastSpeciesNum(size = 1) {\n    this.lastSpeciesNum += size;\n    return this.lastSpeciesNum;\n  }\n\n  getLastAgentId() {\n    return this.lastAgentId;\n  }\n  addLastAgentId() {\n    this.lastAgentId++;\n    return this.lastAgentId;\n  }\n\n  getLastNodeNum() {\n    return this.lastNodeNum;\n  }\n  addLastNodeNum(size = 1) {\n    this.lastNodeNum += size;\n    return this.lastNodeNum;\n  }\n\n  getLastInvNum() {\n    return this.lastInvNum;\n  }\n  addLastInvNum(size = 1) {\n    this.lastInvNum += size;\n    return this.lastInvNum;\n  }\n\n  addInvResult(curr) {\n    // check the same location is already innovated.\n    for (let i = 0; i < this.invResults.length; i++) {\n      let prev = this.invResults[i];\n      // if so, return the prev innovation result.\n      if (prev.from === curr.from && prev.to === curr.to) {\n        if (prev.toSplit === curr.toSplit) {\n          // console.log(\"addInvResult, return prev\");\n          return prev;\n        }\n      }\n    }\n    // if not, make and return result with new invNum\n    if (curr.toSplit !== undefined) {\n      // addNode\n      curr.nodeNum = this.addLastNodeNum();\n      curr.invNum1 = this.addLastInvNum();\n      curr.invNum2 = this.addLastInvNum();\n      this.invResults.push(curr);\n    } else {\n      // addConn\n      curr.invNum = this.addLastInvNum();\n      this.invResults.push(curr);\n    }\n\n    return curr;\n  }\n}\n","import Agent from \"./Agent\";\nimport Species from \"./Species\";\nimport Setting from \"./Setting\";\n\nexport default class Generation {\n  constructor(props) {\n    this.setting = new Setting(props);\n    this.ancestors = [];\n    this.agentMap = {};\n    this.speciesMap = {};\n\n    this.initGeneration();\n  }\n\n  resize(props) {\n    this.setting.updateSize(props);\n  }\n\n  initSpecies(props) {\n    let { speciesNum } = props;\n    let species = new Species(props);\n    if (speciesNum in this.speciesMap) {\n      console.error(\n        `Generation initSpecies: speciesNum ${speciesNum} is already taken.`\n      );\n      return this.speciesMap[speciesNum];\n    }\n    this.speciesMap[speciesNum] = species;\n\n    return species;\n  }\n\n  initGeneration() {\n    let primal = new Agent({ setting: this.setting, isPrimal: true });\n    let agentId = this.setting.addLastAgentId();\n    primal.setId(agentId);\n    let speciesNum = this.setting.addLastSpeciesNum();\n    let species = this.initSpecies({\n      setting: this.setting,\n      initGenNum: this.setting.getGenerationNum() + 1,\n      speciesNum,\n      agent: primal,\n    });\n    primal.setSpecies(speciesNum);\n\n    for (let i = 0; i < this.setting.groupSize; i++) {\n      let child = primal.asexual(true); // keepStructure true\n      let agentId = this.setting.addLastAgentId();\n      child.setId(agentId);\n      child.setSpecies(speciesNum);\n      species.agents.push(child);\n      this.agentMap[agentId] = child;\n    }\n\n    this.speciesMap[speciesNum] = species;\n    this.setting.addGenerationNum();\n\n    // console.log(`GENERATION ${this.setting.getGenerationNum()}: reproduced`);\n    // console.log(this.speciesMap);\n  }\n\n  nextGeneration() {\n    // 각 species의 avgFitness 구하기\n    // 이와 더불어 각 species에서 낮은 점수의 agent 탈락\n    let avgFitnessTotal = 0;\n    let representativeMap = {};\n    for (let speciesNum in this.speciesMap) {\n      let species = this.speciesMap[speciesNum];\n      if (species.isExtinct) continue;\n\n      let avgFitness = species.adjustFitness();\n      avgFitnessTotal += avgFitness;\n      species.eliminateLowest();\n\n      // species의 대표 agent를 representativeMap에 저장\n      let representative = species.setRepresentative();\n      representativeMap[speciesNum] = representative;\n    }\n    // console.log(\"nextGeneration: avgFitnessTotal\", avgFitnessTotal);\n    // console.log(representativeMap);\n\n    // for (let speciesNum in representativeMap) {\n    //   let species = this.speciesMap[speciesNum];\n    //   let highest = species.getHighest();\n    //   console.log(\n    //     `GENERATION ${this.setting.getGenerationNum()}: `,\n    //     speciesNum,\n    //     highest.score\n    //   );\n    //   if (highest.score >= 3.9) {\n    //     console.log(\"HIT!\", highest);\n    //   }\n    // }\n\n    // 각 species의 할당량을 구해 allotment 생성\n    let allotment = [];\n    for (let speciesNum in representativeMap) {\n      speciesNum = parseInt(speciesNum);\n      let species = this.speciesMap[speciesNum];\n      let proportion = species.avgFitness / avgFitnessTotal;\n      let size = Math.ceil(proportion * this.setting.groupSize);\n      // allotment에 할당된 수만큼 speciesNum 추가\n      for (let i = 0; i < size; i++) {\n        allotment.push(speciesNum);\n      }\n    }\n    // allotment의 길이가 groupSize에 미치지 못하거나 초과할 시 조정\n    if (allotment.length < this.setting.groupSize) {\n      let diff = this.setting.groupSize - allotment.length;\n      for (let i = 0; i < diff; i++) {\n        let index = Math.floor(Math.random() * allotment.length);\n        let speciesNum = allotment[index];\n        allotment.push(speciesNum);\n      }\n    } else {\n      allotment = allotment.slice(0, this.setting.groupSize);\n    }\n    // console.log(\"nextGeneration: allotment\", allotment);\n\n    // allotment에 맞게 새로운 agent 생성하고, species를 배정\n    let newAgentMap = {};\n    let speciesReproduced = {};\n    for (let i = 0; i < allotment.length; i++) {\n      // speciesNum를 기준으로 child 생성\n      let speciesNum = allotment[i];\n      let species = this.speciesMap[speciesNum];\n      let parent1 = species.getSingleParent();\n      let parent2 = species.getSingleParent();\n      let child;\n      if (parent1 === parent2 || Math.random() < 0.25) {\n        child = parent1.asexual(false);\n      } else {\n        child = parent1.sexual(parent2);\n      }\n      // child에 AgentId 배정\n      let agentId = this.setting.addLastAgentId();\n      child.setId(agentId);\n      // child가 기존 종들 중 어디에 속하는지 결정\n      for (let speciesNum in representativeMap) {\n        speciesNum = parseInt(speciesNum);\n        let species = this.speciesMap[speciesNum];\n        let representative = representativeMap[speciesNum];\n        let dist = child.geneticDist(representative);\n        // console.log(\"DIST\", speciesNum, child.agentId, dist);\n        if (dist < this.setting.compatibilityThreshold) {\n          child.setSpecies(speciesNum);\n          species.keepNextAgent(child);\n          speciesReproduced[speciesNum] = true;\n          break;\n        }\n      }\n      // 배정된 종이 없을 경우, 새로운 종을 생성\n      if (child.getSpecies() === undefined) {\n        let speciesNum = this.setting.addLastSpeciesNum();\n        let species = this.initSpecies({\n          setting: this.setting,\n          initGenNum: this.setting.getGenerationNum() + 1,\n          speciesNum,\n          agent: child,\n        });\n        child.setSpecies(speciesNum);\n        species.keepNextAgent(child);\n        speciesReproduced[speciesNum] = true;\n        representativeMap[speciesNum] = child;\n        this.speciesMap[speciesNum] = species;\n      }\n\n      newAgentMap[agentId] = child;\n    }\n    // 개체를 배정받지 못한 종은 멸종 처리\n    for (let speciesNum in representativeMap) {\n      if (!speciesReproduced[speciesNum]) {\n        this.speciesMap[speciesNum].setExtinction();\n      }\n    }\n\n    // 현재 세대를 ancestor로 넘김\n    let ancestor = {\n      generationNum: this.setting.getGenerationNum(),\n      agentMap: this.agentMap,\n    };\n    this.ancestors.push(ancestor);\n    // species 업데이트\n    for (let speciesNum in representativeMap) {\n      let species = this.speciesMap[speciesNum];\n      species.update();\n    }\n    // generationNum 업데이트\n    this.setting.addGenerationNum();\n    // 새로운 agentMap으로 변경\n    this.agentMap = newAgentMap;\n    // console.log(`GENERATION ${this.setting.getGenerationNum()}: reproduced`);\n    // console.log(this.speciesMap);\n  }\n\n  run(ctx, frameCnt) {\n    ctx.save();\n    let { originX, originY } = this.setting;\n    ctx.translate(originX, originY);\n    ctx.clearRect(0, 0, this.setting.boardWidth, this.setting.boardHeight);\n    ctx.strokeRect(0, 0, this.setting.boardWidth, this.setting.boardHeight);\n    ctx.fillStyle = `rgba(0, 0, 0, 1)`;\n\n    ctx.save();\n    ctx.textAlign = \"center\";\n    ctx.textBaseline = \"middle\";\n    ctx.fillStyle = `rgba(0, 0, 0, 1)`;\n    ctx.font = \"40px NanumSquareRound, sans-serif\";\n    ctx.fillText(\n      `Gen`,\n      this.setting.boardWidth / 2,\n      this.setting.boardHeight / 2 - 23\n    );\n    ctx.fillText(\n      `${this.setting.generationNum}`,\n      this.setting.boardWidth / 2,\n      this.setting.boardHeight / 2 + 23\n    );\n    ctx.restore();\n\n    let local = 0;\n    for (let agentId in this.agentMap) {\n      let agent = this.agentMap[agentId];\n      agent.think(ctx, frameCnt);\n      agent.run(ctx, local);\n      local++;\n    }\n    ctx.restore();\n  }\n}\n","class Vector2D {\n  constructor(x = 0, y = 0) {\n    this.x = x;\n    this.y = y;\n  }\n\n  add(v) {\n    if (v instanceof Vector2D) {\n      this.x += v.x;\n      this.y += v.y;\n    } else {\n      // v is considered as scalar\n      this.x += v;\n      this.y += v;\n    }\n    return this;\n  }\n\n  sub(v) {\n    if (v instanceof Vector2D) {\n      this.x -= v.x;\n      this.y -= v.y;\n    } else {\n      // v is considered as scalar\n      this.x -= v;\n      this.y -= v;\n    }\n    return this;\n  }\n\n  mult(v) {\n    if (v instanceof Vector2D) {\n      this.x *= v.x;\n      this.y *= v.y;\n    } else {\n      // v is considered as scalar\n      this.x *= v;\n      this.y *= v;\n    }\n    return this;\n  }\n\n  div(v) {\n    if (v instanceof Vector2D) {\n      this.x /= v.x;\n      this.y /= v.y;\n    } else {\n      // v is considered as scalar\n      this.x /= v;\n      this.y /= v;\n    }\n    return this;\n  }\n\n  equals(v) {\n    return this.x === v.x && this.y === v.y;\n  }\n\n  dot(v) {\n    return this.x * v.x + this.y * v.y;\n  }\n\n  getMag() {\n    return Math.sqrt(this.x * this.x + this.y * this.y);\n  }\n\n  getMagSq() {\n    return this.x * this.x + this.y * this.y;\n  }\n\n  setMag(v) {\n    this.normalize();\n    this.mult(v);\n    return this;\n  }\n\n  normalize() {\n    let m = this.getMag();\n    if (m === 0) {\n      this.x = 1;\n      this.y = 0;\n    } else {\n      this.div(m);\n    }\n    return this;\n  }\n\n  limit(maximum) {\n    if (this.getMag() > maximum) {\n      this.setMag(maximum);\n    }\n    return this;\n  }\n\n  clone() {\n    return new Vector2D(this.x, this.y);\n  }\n\n  static add(a, b) {\n    if (b instanceof Vector2D) {\n      return new Vector2D(a.x + b.x, a.y + b.y);\n    } else {\n      return new Vector2D(a.x + b, a.y + b);\n    }\n  }\n\n  static sub(a, b) {\n    if (b instanceof Vector2D) {\n      return new Vector2D(a.x - b.x, a.y - b.y);\n    } else {\n      return new Vector2D(a.x - b, a.y - b);\n    }\n  }\n\n  static mult(a, b) {\n    if (b instanceof Vector2D) {\n      return new Vector2D(a.x * b.x, a.y * b.y);\n    } else {\n      return new Vector2D(a.x * b, a.y * b);\n    }\n  }\n\n  static div(a, b) {\n    if (b instanceof Vector2D) {\n      return new Vector2D(a.x / b.x, a.y / b.y);\n    } else {\n      return new Vector2D(a.x / b, a.y / b);\n    }\n  }\n\n  static dist(a, b) {\n    // let d = Vector2D.sub(a, b);\n    // return d.getMag();\n    let dx = a.x - b.x;\n    let dy = a.y - b.y;\n    return Math.sqrt(dx * dx + dy * dy);\n  }\n}\n\nexport default Vector2D;\n","import Vector2D from \"./Tool/Vector2D\";\n\nexport default class Particle {\n  constructor(location, angle) {\n    this.location = location.clone();\n    this.angle = angle;\n\n    let mag = 0.5;\n\n    let xVel = -1 * Math.cos(angle) * mag + (Math.random() - 0.5) * 2.0;\n    let yVel = -1 * Math.sin(angle) * mag + (Math.random() - 0.5) * 2.0;\n\n    this.velocity = new Vector2D(xVel, yVel);\n    this.acceleration = new Vector2D(0, 0);\n    this.radius = 2;\n    this.lifespan = 20;\n  }\n\n  run(ctx) {\n    this.update(ctx);\n    this.display(ctx);\n  }\n\n  update(ctx) {\n    this.velocity.add(this.acceleration);\n    this.location.add(this.velocity);\n    this.lifespan -= 1;\n  }\n\n  display(ctx) {\n    ctx.save();\n    ctx.fillStyle = `rgba(255,90,0, ${this.lifespan / 20})`;\n    ctx.beginPath();\n    ctx.arc(this.location.x, this.location.y, this.radius, 0, Math.PI * 2);\n    ctx.fill();\n    ctx.restore();\n  }\n\n  isDead() {\n    return this.lifespan < 0;\n  }\n}\n","// import Vector2D from \"../Tool/Vector2D\";\nimport Particle from \"./Particle\";\n\nexport default class Fumes {\n  constructor(origin, angle) {\n    this.origin = origin.clone();\n    this.angle = angle;\n    this.particles = [];\n  }\n\n  addParticle() {\n    this.particles.push(new Particle(this.origin, this.angle));\n  }\n\n  setLocation(x, y, angle) {\n    this.origin.x = x;\n    this.origin.y = y;\n    this.angle = angle;\n  }\n\n  run(ctx) {\n    for (let i = this.particles.length - 1; i >= 0; i--) {\n      let p = this.particles[i];\n      p.run(ctx);\n      if (p.isDead()) {\n        this.particles.splice(i, 1);\n      }\n    }\n  }\n}\n","import Vector2D from \"./Tool/Vector2D\";\nimport Fumes from \"./Fumes\";\n\nexport const AGENT_TYPE = {\n  WANDERER: \"AGENT_WANDERER\",\n  SCREEN: \"AGENT_SCREEN\",\n};\n\nexport default class Asteroid {\n  constructor(props = {}) {\n    this.setting = props.setting;\n    this.agentType = this.setting.agentType;\n    this.location = this.getRandomLocation();\n    this.velocity = new Vector2D(0, 0);\n    this.acceleration = new Vector2D(0, 0);\n\n    if (this.agentType === AGENT_TYPE.SCREEN) {\n      this.maxSpeed = 10;\n      this.maxForce = 0.5;\n    } else {\n      this.maxSpeed = 4;\n      this.maxForce = 0.2;\n    }\n\n    this.defaultAngle = -Math.PI / 2;\n    this.angle = this.defaultAngle;\n    this.angStep = 0.05;\n\n    this.seekLimit = 50;\n    this.desiredSeparation = 20;\n    this.wanderTarget = this.location.clone();\n    this.warderRelocationPct = 0.01;\n    this.wanderSpeedRatio = 0.1;\n\n    // this.separationWeight = 0.6;\n    // this.seekWeight = 0.4;\n    this.gridLocal = {};\n\n    this.isAccelerated = false;\n    this.leftFumes = new Fumes(this.location, this.angle);\n    this.rightFumes = new Fumes(this.location, this.angle);\n  }\n\n  turnLeft() {\n    this.angle -= this.angStep;\n  }\n\n  turnRight() {\n    this.angle += this.angStep;\n  }\n\n  moveForward() {\n    let mag = 0.1;\n    let x = Math.cos(this.angle) * mag;\n    let y = Math.sin(this.angle) * mag;\n    this.acceleration.x = x;\n    this.acceleration.y = y;\n  }\n\n  flock(agents, mouseObj) {\n    let separation, seek;\n\n    // exclude oneself\n    if (agents.length > 1) {\n      separation = this.separate(agents);\n      this.applyForce(separation);\n    }\n\n    if (mouseObj.isMouseOverCanvas && this.isCandyOn) {\n      seek = this.seekMouse(mouseObj);\n      this.applyForce(seek);\n    } else {\n      if (Math.random() < this.warderRelocationPct) {\n        this.wanderTarget = this.getRandomLocation();\n      }\n      seek = this.seek(this.wanderTarget);\n      seek.mult(this.wanderSpeedRatio);\n      this.applyForce(seek);\n    }\n  }\n\n  getRandomLocation() {\n    let x = Math.floor(Math.random() * this.setting.cvsWidth);\n    let y = Math.floor(Math.random() * this.setting.cvsHeight);\n    return new Vector2D(x, y);\n  }\n\n  separate(agents) {\n    let sum = new Vector2D();\n    let count = 0;\n    for (let i = 0; i < agents.length; i++) {\n      let agent = agents[i];\n      let diff = Vector2D.sub(this.location, agent.location);\n      let distance = diff.getMagSq();\n      if (\n        distance > 0 &&\n        distance < this.desiredSeparation * this.desiredSeparation\n      ) {\n        // diff.normalize();\n        // diff.div(distance);\n        diff.setMag(1 / distance);\n        sum.add(diff);\n        count++;\n      }\n    }\n\n    if (count > 0) {\n      // sum.div(count);\n      sum.setMag(this.maxSpeed);\n      sum.sub(this.velocity); // steer\n      sum.limit(this.maxSpeed);\n      return sum;\n    } else {\n      return sum;\n    }\n  }\n\n  seek(target) {\n    let desired = Vector2D.sub(target, this.location);\n    let dX = this.location.x - target.x;\n    let dY = this.location.y - target.y;\n    let angleBase = Math.atan2(dY, dX) - Math.PI;\n\n    let d = desired.getMag();\n    desired.normalize();\n    let dLimit = this.seekLimit;\n    if (d < dLimit) {\n      let m = (d / dLimit) * this.maxSpeed;\n      let dA = this.defaultAngle;\n      desired.mult(m);\n      this.angle = dA - (dA - angleBase) * (d / dLimit);\n    } else {\n      desired.mult(this.maxSpeed);\n      this.angle = angleBase;\n    }\n    desired.sub(this.velocity); // steer\n    desired.limit(this.maxForce);\n\n    return desired;\n    // this.applyForce(desired);\n  }\n\n  seekMouse(mouseObj) {\n    let target = new Vector2D(mouseObj.mouseX, mouseObj.mouseY);\n    return this.seek(target);\n  }\n\n  setGridLocal(row, col) {\n    this.gridLocal.row = row;\n    this.gridLocal.col = col;\n  }\n\n  applyForce(force) {\n    this.acceleration.add(force);\n  }\n\n  update(ctx) {\n    this.velocity.add(this.acceleration);\n    this.velocity.limit(this.maxSpeed);\n    this.velocity.mult(0.99);\n    this.location.add(this.velocity);\n    this.acceleration.mult(0);\n\n    if (this.agentType === AGENT_TYPE.WANDERER) {\n      this.checkEdges(ctx);\n    }\n    this.updateFumes(ctx);\n  }\n\n  updateFumes(ctx) {\n    let angSize = Math.PI / 5;\n    let dist = 10;\n\n    let leftAngle = this.angle + angSize;\n    let leftX = this.location.x + -1 * dist * Math.cos(leftAngle);\n    let leftY = this.location.y + -1 * dist * Math.sin(leftAngle);\n    this.leftFumes.setLocation(leftX, leftY, leftAngle);\n\n    let rightAngle = this.angle - angSize;\n    let rightX = this.location.x + -1 * dist * Math.cos(rightAngle);\n    let rightY = this.location.y + -1 * dist * Math.sin(rightAngle);\n    this.rightFumes.setLocation(rightX, rightY, rightAngle);\n  }\n\n  getColor() {\n    if (this.agentType === AGENT_TYPE.SCREEN) {\n      // return `rgba(57, 65, 86, 1)`;\n      return `rgba(210, 210, 210, 1)`;\n    } else {\n      return `rgba(255, 255, 255, 1)`;\n    }\n  }\n\n  display(ctx, mouseObj) {\n    ctx.save();\n    ctx.translate(this.location.x, this.location.y);\n    ctx.rotate(this.angle);\n\n    // triangle\n    ctx.save();\n    ctx.fillStyle = this.getColor();\n    ctx.strokeStyle = `rgba(0, 0, 0, 1)`;\n    ctx.beginPath();\n    ctx.moveTo(30, 0);\n    ctx.lineTo(-5, -15);\n    ctx.lineTo(-5, 15);\n    ctx.closePath();\n    ctx.fill();\n    ctx.stroke();\n    ctx.restore();\n\n    let { mouseX, mouseY } = mouseObj;\n    let dX = this.location.x - mouseX;\n    let dY = this.location.y - mouseY;\n    let eyeAngle = Math.atan2(dY, dX) - this.angle + Math.PI / 2;\n    let pupil = 2;\n    // console.log((this.angle * 180) / Math.PI, (eyeAngle * 180) / Math.PI);\n\n    let eyeStyle = `rgba(255, 255, 255, 1)`;\n    let pupilStyle = `rgba(0, 0, 0, 1)`;\n\n    // left eyes\n    ctx.save();\n    ctx.translate(12, -7);\n    ctx.rotate(eyeAngle);\n    ctx.beginPath();\n    ctx.arc(0, 0, 5, 0, Math.PI * 2);\n    ctx.fillStyle = eyeStyle;\n    ctx.fill();\n    ctx.stroke();\n\n    ctx.beginPath();\n    ctx.arc(0, pupil, 2, 0, Math.PI * 2);\n    ctx.fillStyle = pupilStyle;\n    ctx.fill();\n    ctx.restore();\n\n    // right eyes\n    ctx.save();\n    ctx.translate(12, 7);\n    ctx.rotate(eyeAngle);\n    ctx.beginPath();\n    ctx.arc(0, 0, 5, 0, Math.PI * 2);\n    ctx.fillStyle = eyeStyle;\n    ctx.fill();\n    ctx.stroke();\n\n    ctx.beginPath();\n    ctx.arc(0, pupil, 2, 0, Math.PI * 2);\n    ctx.fillStyle = `rgba(0, 0, 0, 1)`;\n    ctx.fill();\n    ctx.restore();\n\n    // exhaust\n    if (this.isAccelerated) {\n      ctx.fillStyle = `rgba(200, 0, 0, 1)`;\n    } else {\n      ctx.fillStyle = `rgba(255, 255, 255, 1)`;\n    }\n    ctx.strokeStyle = `rgba(0, 0, 0, 1)`;\n\n    ctx.beginPath();\n    ctx.arc(0, 0, 2, 0, Math.PI * 2);\n    ctx.fill();\n    ctx.stroke();\n\n    ctx.beginPath();\n    ctx.arc(-6, -6, 3, -Math.PI / 2, Math.PI / 2, true);\n    ctx.fill();\n    ctx.stroke();\n\n    ctx.beginPath();\n    ctx.arc(-6, 6, 3, -Math.PI / 2, Math.PI / 2, true);\n    ctx.fill();\n    ctx.stroke();\n\n    ctx.restore();\n\n    if (this.isAccelerated) {\n      this.leftFumes.addParticle();\n      this.rightFumes.addParticle();\n    }\n    this.leftFumes.run(ctx);\n    this.rightFumes.run(ctx);\n  }\n\n  checkEdges(ctx) {\n    let canvasWidth = ctx.canvas.width;\n    let canvasHeight = ctx.canvas.height;\n    let x = this.location.x;\n    let y = this.location.y;\n\n    if (x < 0) {\n      this.location.x = canvasWidth;\n    } else if (x > canvasWidth) {\n      this.location.x = 0;\n    }\n\n    if (y < 0) {\n      this.location.y = canvasHeight;\n    } else if (y > canvasHeight) {\n      this.location.y = 0;\n    }\n  }\n}\n","import Agent, { AGENT_TYPE } from \"./Asteroid\";\n\nclass Setting {\n  constructor(props = {}) {\n    this.agentType = AGENT_TYPE.WANDERER;\n    this.groupSize = 10;\n    this.updateSize(props);\n  }\n\n  updateSize(props) {\n    // console.log(\"Generation Setting\", props);\n    this.gridSize = 100;\n    this.cvsWidth = props.cvsWidth;\n    this.cvsHeight = props.cvsHeight;\n    this.gridRowCnt = Math.ceil(this.cvsHeight / this.gridSize);\n    this.gridColCnt = Math.ceil(this.cvsWidth / this.gridSize);\n  }\n}\n\nexport default class Generation {\n  constructor(props) {\n    this.setting = new Setting(props);\n    this.agents = [];\n    for (let i = 0; i < this.setting.groupSize; i++) {\n      let agent = new Agent({ setting: this.setting });\n      this.agents.push(agent);\n    }\n    this.makeGrid();\n  }\n\n  resize(props) {\n    this.setting.updateSize(props);\n  }\n\n  makeGrid() {\n    let { gridRowCnt, gridColCnt } = this.setting;\n    this.grid = [];\n    for (let i = 0; i < gridRowCnt; i++) {\n      let row = [];\n      for (let j = 0; j < gridColCnt; j++) {\n        row.push([]);\n      }\n      this.grid.push(row);\n    }\n  }\n\n  getGridRowByY(y) {\n    let row = Math.floor(y / this.setting.gridSize);\n    return Math.max(0, Math.min(row, this.setting.gridRowCnt - 1));\n  }\n\n  getGridColByX(x) {\n    let col = Math.floor(x / this.setting.gridSize);\n    return Math.max(0, Math.min(col, this.setting.gridColCnt - 1));\n  }\n\n  run(ctx, frameCnt, mouseObj) {\n    this.makeGrid();\n    // set grid\n    for (let i = 0; i < this.setting.groupSize; i++) {\n      let agent = this.agents[i];\n      let row = this.getGridRowByY(agent.location.y);\n      let col = this.getGridColByX(agent.location.x);\n      agent.setGridLocal(row, col);\n      this.grid[row][col].push(agent);\n    }\n\n    for (let i = 0; i < this.setting.groupSize; i++) {\n      let agent = this.agents[i];\n      let { row, col } = agent.gridLocal;\n      let subAgents = this.grid[row][col];\n\n      agent.flock(subAgents, mouseObj);\n      agent.update(ctx);\n      agent.display(ctx, mouseObj);\n    }\n  }\n}\n","import Agent, { AGENT_TYPE } from \"./Asteroid\";\nimport Vector2D from \"./Tool/Vector2D\";\n\nimport { getScreenRect } from \"../Constant\";\n\nclass Setting {\n  constructor(props = {}) {\n    this.agentType = AGENT_TYPE.SCREEN;\n    this.arrivedLimit = 0.01;\n    this.updateSize(props);\n  }\n\n  updateSize(props) {\n    // console.log(\"Screen Group Setting\", props);\n    this.cvsWidth = props.cvsWidth;\n    this.cvsHeight = props.cvsHeight;\n    this.currentPage = props.currentPage;\n\n    let rect = getScreenRect(this.cvsWidth, this.cvsHeight, this.currentPage);\n    this.scrW = rect.width;\n    this.scrH = rect.height;\n    this.scrL = rect.left;\n    this.scrT = rect.top;\n\n    this.onLocal = {\n      TL: new Vector2D(this.scrL, this.scrT),\n      TR: new Vector2D(this.scrL, this.scrT + this.scrH),\n      BL: new Vector2D(this.scrL + this.scrW, this.scrT),\n      BR: new Vector2D(this.scrL + this.scrW, this.scrT + this.scrH),\n    };\n    this.offLocal = {\n      TL: new Vector2D(this.cvsWidth / 2, this.cvsHeight / 2),\n      TR: new Vector2D(this.cvsWidth / 2, this.cvsHeight / 2),\n      BL: new Vector2D(this.cvsWidth / 2, this.cvsHeight / 2),\n      BR: new Vector2D(this.cvsWidth / 2, this.cvsHeight / 2),\n    };\n  }\n}\n\nexport default class ScreenGroup {\n  constructor(props) {\n    this.setting = new Setting(props);\n    this.createAgents();\n    this.isSpread = false;\n    this.isMoving = false;\n  }\n\n  resize(props) {\n    this.setting.updateSize(props);\n  }\n\n  createAgents() {\n    this.agentMap = {};\n    this.agentMap[\"TL\"] = new Agent({ setting: this.setting });\n    this.agentMap[\"TR\"] = new Agent({ setting: this.setting });\n    this.agentMap[\"BL\"] = new Agent({ setting: this.setting });\n    this.agentMap[\"BR\"] = new Agent({ setting: this.setting });\n  }\n\n  getTargetByLocal(local) {\n    if (this.isSpread) {\n      return this.setting.onLocal[local];\n    } else {\n      return this.setting.offLocal[local];\n    }\n  }\n\n  spread() {\n    this.isSpread = true;\n    this.isMoving = true;\n  }\n\n  fold() {\n    this.isSpread = false;\n    this.isMoving = true;\n  }\n\n  run(ctx, frameCnt, mouseObj) {\n    ctx.save();\n    // check for isMoving\n    if (this.isSpread) {\n      let agentTL = this.agentMap[\"TL\"];\n      let agentTR = this.agentMap[\"TR\"];\n      let agentBL = this.agentMap[\"BL\"];\n      let agentBR = this.agentMap[\"BR\"];\n      ctx.fillStyle = `rgba(255, 255, 255, 1)`;\n      ctx.strokeStyle = `rgba(0, 0, 0, 1)`;\n      ctx.beginPath();\n      ctx.moveTo(agentTL.location.x, agentTL.location.y);\n      ctx.lineTo(agentTR.location.x, agentTR.location.y);\n      ctx.lineTo(agentBR.location.x, agentBR.location.y);\n      ctx.lineTo(agentBL.location.x, agentBL.location.y);\n      ctx.closePath();\n      // ctx.fill();\n      ctx.stroke();\n    }\n    ctx.restore();\n\n    ctx.save();\n    let isMoving = false;\n    for (let local in this.agentMap) {\n      let agent = this.agentMap[local];\n      let target = this.getTargetByLocal(local);\n      let distSq = Vector2D.sub(agent.location, target).getMagSq();\n      if (distSq > this.setting.arrivedLimit) {\n        // console.log(\"Screen is moving..\");\n        isMoving = true;\n      }\n      let force = agent.seek(target);\n      agent.applyForce(force);\n      agent.update(ctx);\n      agent.display(ctx, mouseObj);\n    }\n    this.isMoving = isMoving;\n    ctx.restore();\n  }\n}\n","import Vector2D from \"./Tool/Vector2D\";\nimport { PAGES } from \"../Constant\";\n\nconst NAV_STATUS = {\n  UNFOLDED: \"NAV_UNFOLDED\",\n  FOLDED: \"NAV_FOLDED\",\n  BACK: \"NAV_BACK\",\n\n  SHRINK: \"NAV_SHRINK\",\n  EXPAND: \"NAV_EXPAND\",\n};\n\nclass Setting {\n  constructor(props = {}) {\n    this.cvsWidth = props.cvsWidth;\n    this.cvsHeight = props.cvsHeight;\n\n    this.center = new Vector2D(this.cvsWidth / 2, this.cvsHeight / 2);\n    this.updateSize(props);\n  }\n\n  updateSize(props) {\n    this.cvsWidth = props.cvsWidth;\n    this.cvsHeight = props.cvsHeight;\n\n    this.center.x = this.cvsWidth / 2;\n    this.center.y = this.cvsHeight / 2;\n\n    // todo: update radius by screen size\n    this.radiusLimit = 100;\n    this.sateRadiusLimit = 25;\n  }\n}\n\nexport default class SatelliteGroup {\n  constructor(props) {\n    this.setting = new Setting(props);\n\n    this.sates = [PAGES.WIZLAB, PAGES.MIDAS, PAGES.BIRD, PAGES.XOR];\n\n    this.satesLength = this.sates.length; // temp\n    this.sateAngleDist = (Math.PI * 2) / this.satesLength;\n\n    this.radius = this.setting.radiusLimit;\n    this.sateRadius = this.setting.sateRadiusLimit;\n\n    this.angle = 0;\n    this.angleStep = 0.005;\n    this.radiusShrinkSpeed = 3;\n    this.sateRadiusShrinkSpeed = 1;\n\n    this.status = NAV_STATUS.UNFOLDED;\n\n    this.setPage = props.setPage;\n  }\n\n  resize(props) {\n    this.setting.updateSize(props);\n  }\n\n  run(ctx, frameCnt, mouseObj) {\n    this.update(ctx, frameCnt, mouseObj);\n    this.display(ctx, frameCnt, mouseObj);\n  }\n\n  setStatus(status) {\n    this.status = status;\n  }\n\n  expand() {\n    this.setStatus(NAV_STATUS.EXPAND);\n  }\n  shrink() {\n    this.setStatus(NAV_STATUS.SHRINK);\n  }\n\n  checkClick(mouseObj) {\n    // 만약 클릭이 되었을 때, 모두 펼쳐져 있을 때만\n    if (this.status === NAV_STATUS.UNFOLDED && mouseObj.clicked) {\n      let { mouseX, mouseY } = mouseObj;\n      for (let i = 0; i < this.satesLength; i++) {\n        let page = this.sates[i];\n        if (!page) continue;\n        // polar to cartesian\n        let sateAngle = this.angle + i * this.sateAngleDist;\n        let r = this.radius;\n        let dx = r * Math.cos(sateAngle);\n        let dy = r * Math.sin(sateAngle);\n        let center = this.setting.center;\n        let x = center.x + dx;\n        let y = center.y + dy;\n        // calculate distance\n        let sateRadius = this.sateRadius;\n        let distSq = (x - mouseX) ** 2 + (y - mouseY) ** 2;\n        if (distSq < sateRadius * sateRadius) {\n          // console.log(\"clicked\", page);\n          return page;\n        }\n      }\n      return false;\n    }\n  }\n\n  update(ctx, frameCnt, mouseObj) {\n    if (this.status === NAV_STATUS.UNFOLDED) {\n      let page = this.checkClick(mouseObj);\n      if (page) {\n        this.selected = page;\n        this.setStatus(NAV_STATUS.SHRINK);\n      }\n\n      this.angle += this.angleStep;\n      this.angle = this.angle % (Math.PI * 2);\n\n      if (this.radius < this.setting.radiusLimit) {\n        this.radius++;\n      } else if (this.radius > this.setting.radiusLimit) {\n        this.radius--;\n      }\n\n      if (this.sateRadius < this.setting.sateRadiusLimit) {\n        this.sateRadius++;\n      } else if (this.sateRadius > this.setting.sateRadiusLimit) {\n        this.sateRadius--;\n      }\n    } else if (this.status === NAV_STATUS.FOLDED) {\n      this.setPage(this.selected);\n    } else if (this.status === NAV_STATUS.SHRINK) {\n      this.radius -= this.radiusShrinkSpeed;\n      this.sateRadius -= this.sateRadiusShrinkSpeed;\n      this.angle += this.angleStep * 20;\n      this.angle = this.angle % (Math.PI * 2);\n\n      let sateCheck = this.sateRadius <= 0;\n      let radiusCheck = this.radius <= 0;\n\n      if (sateCheck) this.sateRadius = 0;\n      if (radiusCheck) this.radius = 0;\n      if (sateCheck && radiusCheck) {\n        this.setStatus(NAV_STATUS.FOLDED);\n      }\n    } else if (this.status === NAV_STATUS.EXPAND) {\n      this.radius += this.radiusShrinkSpeed;\n      this.sateRadius += this.sateRadiusShrinkSpeed;\n      this.angle -= this.angleStep * 20;\n      this.angle = this.angle % (Math.PI * 2);\n\n      let sateCheck = this.sateRadius >= this.setting.sateRadiusLimit;\n      let radiusCheck = this.radius >= this.setting.radiusLimit;\n\n      if (sateCheck) this.sateRadius = this.setting.sateRadiusLimit;\n      if (radiusCheck) this.radius = this.setting.radiusLimit;\n      if (sateCheck && radiusCheck) {\n        this.setStatus(NAV_STATUS.UNFOLDED);\n      }\n    }\n  }\n\n  display(ctx, frameCnt, mouseObj) {\n    ctx.save();\n    let center = this.setting.center;\n    let radius = this.radius;\n    let sateRadius = this.sateRadius;\n    ctx.translate(center.x, center.y);\n    ctx.beginPath();\n    // ctx.arc(0, 0, 1, 0, Math.PI * 2);\n    ctx.stroke();\n\n    ctx.fillStyle = `rgba(255, 255, 255, 1)`;\n    ctx.strokeStyle = `rgba(0, 0, 0, 1)`;\n\n    for (let i = 0; i < this.satesLength; i++) {\n      let page = this.sates[i];\n      ctx.save();\n      ctx.rotate(this.angle + i * this.sateAngleDist);\n      ctx.translate(radius, 0);\n      ctx.beginPath();\n      ctx.arc(0, 0, sateRadius, 0, Math.PI * 2);\n      ctx.fillStyle = this.getColorByPage(page);\n      ctx.fill();\n      ctx.stroke();\n      ctx.restore();\n    }\n\n    ctx.restore();\n  }\n\n  getColorByPage(page) {\n    switch (page) {\n      case PAGES.WIZLAB:\n        return \"#23d8af\";\n      case PAGES.MIDAS:\n        return \"#23395d\";\n      case PAGES.BIRD:\n        return \"rgba(100, 100, 100, 1)\";\n      default:\n        return `rgba(255, 255, 255, 1)`;\n    }\n  }\n}\n","import React, { Component } from \"react\";\nimport Canvas from \"../../Component/Canvas\";\n\nimport * as tf from \"@tensorflow/tfjs\";\nimport BirdGroup from \"./FlappyBird/BirdGroup\";\nimport PipeGroup from \"./FlappyBird/PipeGroup\";\n\nimport XORGroup from \"./NEAT/Generation\";\n\nimport Generation from \"./Generation\";\nimport ScreenGroup from \"./ScreenGroup\";\nimport SatelliteGroup from \"./SatelliteGroup\";\nimport { PAGES } from \"../Constant\";\n\nexport default class Field extends Component {\n  // constructor(props) {\n  //   super(props);\n  // }\n\n  async componentDidMount() {\n    window.addEventListener(\"resize\", this.resizeEventHandler);\n    this.resizeEventHandler();\n\n    this.generation = new Generation({\n      cvsWidth: this.stageWidth,\n      cvsHeight: this.stageHeight,\n    });\n    this.sateGroup = new SatelliteGroup({\n      cvsWidth: this.stageWidth,\n      cvsHeight: this.stageHeight,\n      setPage: this.props.setPage,\n    });\n    this.screenGroup = new ScreenGroup({\n      cvsWidth: this.stageWidth,\n      cvsHeight: this.stageHeight,\n      currentPage: this.props.currentPage,\n    });\n    this.setScreenByPage();\n\n    let tfBackend = \"cpu\";\n    await tf.setBackend(tfBackend);\n    // console.log(\"Tensorflow backend is\", tfBackend);\n\n    this.birdBoardWidthRatio = 1;\n    this.birdGroup = new BirdGroup({\n      cvsWidth: this.stageWidth,\n      cvsHeight: this.stageHeight,\n      boardWidthRadio: this.birdBoardWidthRatio,\n    });\n    this.pipeGroup = new PipeGroup({\n      cvsWidth: this.stageWidth,\n      cvsHeight: this.stageHeight,\n      boardWidthRadio: this.birdBoardWidthRatio,\n    });\n\n    this.xorGroup = new XORGroup({\n      cvsWidth: this.stageWidth,\n      cvsHeight: this.stageHeight,\n    });\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"resize\", this.resizeEventHandler);\n  }\n\n  componentDidUpdate(prevProps) {\n    if (\n      prevProps.isScreenOn !== this.props.isScreenOn ||\n      prevProps.currentPage !== this.props.currentPage\n    ) {\n      this.setScreenByPage();\n    }\n  }\n\n  setScreenByPage = () => {\n    if (this.props.isScreenOn) {\n      // console.log(\"spread the screen\");\n      this.screenGroup.resize({\n        cvsWidth: this.stageWidth,\n        cvsHeight: this.stageHeight,\n        currentPage: this.props.currentPage,\n      });\n      this.screenGroup.spread();\n    } else {\n      // console.log(\"fold the screen\");\n      this.screenGroup.fold();\n    }\n\n    if (this.props.currentPage === PAGES.MAIN) {\n      this.sateGroup.expand();\n    } else {\n      this.sateGroup.shrink();\n    }\n  };\n\n  resizeEventHandler = (event) => {\n    // console.log(\"index, resizeEventHandler\");\n    // console.log(window.innerWidth, window.innerHeight);\n\n    this.stageWidth = window.innerWidth || document.body.clientWidth;\n    this.stageHeight = window.innerHeight || document.body.clientHeight;\n\n    if (this.generation !== undefined) {\n      this.generation.resize({\n        cvsWidth: this.stageWidth,\n        cvsHeight: this.stageHeight,\n      });\n    }\n    if (this.screenGroup !== undefined) {\n      this.screenGroup.resize({\n        cvsWidth: this.stageWidth,\n        cvsHeight: this.stageHeight,\n        currentPage: this.props.currentPage,\n      });\n    }\n    if (this.sateGroup !== undefined) {\n      this.sateGroup.resize({\n        cvsWidth: this.stageWidth,\n        cvsHeight: this.stageHeight,\n      });\n    }\n    if (this.birdGroup !== undefined) {\n      this.birdGroup.resize({\n        cvsWidth: this.stageWidth,\n        cvsHeight: this.stageHeight,\n        boardWidthRadio: this.birdBoardWidthRatio,\n      });\n    }\n    if (this.pipeGroup !== undefined) {\n      this.pipeGroup.resize({\n        cvsWidth: this.stageWidth,\n        cvsHeight: this.stageHeight,\n        boardWidthRadio: this.birdBoardWidthRatio,\n      });\n    }\n    if (this.xorGroup !== undefined) {\n      this.xorGroup.resize({\n        cvsWidth: this.stageWidth,\n        cvsHeight: this.stageHeight,\n      });\n    }\n  };\n\n  draw = (ctx, frameCnt, mouseObj) => {\n    let cvsWidth = ctx.canvas.width;\n    let cvsHeight = ctx.canvas.height;\n    let { currentPage, isScreenOn, isArticleOn } = this.props;\n\n    // check initiation\n    if (this.generation === undefined) return;\n    if (this.screenGroup === undefined) return;\n    if (this.sateGroup === undefined) return;\n\n    ctx.save();\n    // clear screen\n    ctx.clearRect(0, 0, cvsWidth, cvsHeight);\n\n    // draw background\n    ctx.fillStyle = `rgba(255, 255, 255, 1)`;\n    ctx.fillRect(0, 0, cvsWidth, cvsHeight);\n\n    // draw generation\n    // this.generation.run(ctx, frameCnt, mouseObj);\n\n    // draw navigation\n    if (currentPage === PAGES.MAIN) {\n      this.sateGroup.run(ctx, frameCnt, mouseObj);\n    }\n\n    // draw flappy bird\n    if (currentPage === PAGES.BIRD && isArticleOn) {\n      this.drawFlappyBird(ctx, frameCnt, mouseObj);\n    }\n\n    // draw xor\n    if (currentPage === PAGES.XOR && isArticleOn) {\n      this.drawXOR(ctx, frameCnt, mouseObj);\n    }\n\n    // draw screen\n    this.screenGroup.run(ctx, frameCnt, mouseObj);\n    if (isScreenOn && !isArticleOn && !this.screenGroup.isMoving) {\n      this.props.toggleArticle(true);\n    } else if (!isScreenOn && isArticleOn) {\n      this.props.toggleArticle(false);\n    }\n\n    ctx.restore();\n  };\n\n  drawFlappyBird = (ctx, frameCnt, mouseObj) => {\n    if (this.birdGroup === undefined) return;\n    if (this.pipeGroup === undefined) return;\n\n    ctx.save();\n\n    if (this.birdGroup.survivors.length <= 0) {\n      // console.log(\n      //   `GENERATION # ${this.birdGroup.generationNum}, maxDistance: ${this.distance}`\n      // );\n      this.pipeGroup.restart();\n      this.birdGroup.evolveNextGeneration();\n\n      // check memory loss\n      // let memo = tf.memory();\n      // console.log(\n      //   `numTensors:${memo.numTensors}, numBytes:${memo.numBytes}, numDataBuffers:${memo.numDataBuffers}`\n      // );\n    }\n\n    // pipeGroup\n    this.pipeGroup.run(ctx);\n    // birdGroup\n    this.birdGroup.run(ctx, this.pipeGroup);\n    this.birdGroup.drawDashboard(ctx);\n\n    ctx.restore();\n  };\n\n  drawXOR = (ctx, frameCnt, mouseObj) => {\n    if (this.xorGroup === undefined) return;\n\n    ctx.save();\n    this.xorGroup.run(ctx, frameCnt);\n    if (frameCnt % 5 === 0) {\n      if (\n        this.xorGroup.setting.getGenerationNum() <\n        this.xorGroup.setting.generationLimit\n      ) {\n        this.xorGroup.nextGeneration();\n      }\n    }\n    ctx.restore();\n  };\n\n  render() {\n    // console.log(\"Field\", this.props);\n\n    return <Canvas draw={this.draw} />;\n  }\n}\n","import React from \"react\";\nimport { CSSTransition } from \"react-transition-group\";\nimport SectionTransition from \"./SectionTransition.module.css\";\nimport SlowTransition from \"./SlowTransition.module.css\";\nimport QuoteTransition from \"./QuoteTransition.module.css\";\n\n// https://stackoverflow.com/questions/62187461/using-react-finddomnode-is-deprecated-in-strictmode-is-thrown-as-a-warning-when\n\nexport const CSSTransitionWrapper = ({\n  children,\n  wrapClassName,\n  classNames,\n  timeout,\n  ...props\n}) => {\n  const nodeRef = React.useRef(null);\n\n  if (timeout === undefined) {\n    timeout = {\n      enter: 700,\n      exit: 300,\n    };\n  }\n  if (classNames === undefined) {\n    classNames = SectionTransition;\n  }\n\n  return (\n    <CSSTransition\n      nodeRef={nodeRef}\n      timeout={timeout}\n      classNames={SectionTransition}\n      {...props}\n    >\n      <div ref={nodeRef} className={wrapClassName}>\n        {children}\n      </div>\n    </CSSTransition>\n  );\n};\n\nexport const SlowCSSTransitionWrapper = (props) => {\n  return (\n    <CSSTransitionWrapper\n      timeout={{ enter: 1000, exit: 1000 }}\n      classNames={SlowTransition}\n      {...props}\n    />\n  );\n};\n\nexport const QuoteCSSTransitionWrapper = (props) => {\n  return (\n    <CSSTransitionWrapper\n      timeout={{ enter: 5000, exit: 1000 }}\n      classNames={QuoteTransition}\n      {...props}\n    />\n  );\n};\n","import React, { Component } from \"react\";\nimport { PAGES } from \"../Constant\";\nimport { TransitionGroup } from \"react-transition-group\";\nimport {\n  CSSTransitionWrapper,\n  SlowCSSTransitionWrapper,\n} from \"../../Component/Transition\";\n\nimport styles from \"./index.module.css\";\n\nexport default class Navigation extends Component {\n  state = {\n    sectionIndex: -1,\n    isGuideOn: false,\n    isBackBtnOn: false,\n  };\n\n  componentDidMount() {\n    if (this.props.currentPage === PAGES.MAIN) {\n      this.startGuide();\n    } else {\n      this.startBackBtn();\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.currentPage !== this.props.currentPage) {\n      if (this.props.currentPage === PAGES.MAIN) {\n        this.setState({ isBackBtnOn: false });\n      } else {\n        this.setState({ isGuideOn: false });\n      }\n    }\n  }\n\n  startGuide = () => {\n    this.setState({\n      isGuideOn: true,\n      // isBackBtnOn: false,\n      sectionIndex: 0,\n    });\n  };\n\n  startBackBtn = () => {\n    this.setState({\n      // isGuideOn: false,\n      isBackBtnOn: true,\n      sectionIndex: -1,\n    });\n  };\n\n  addSectionIndex = () => {\n    this.setState(({ sectionIndex }) => ({ sectionIndex: sectionIndex + 1 }));\n  };\n  subtractSectionIndex = () => {\n    this.setState(({ sectionIndex }) => ({ sectionIndex: sectionIndex - 1 }));\n  };\n\n  handleBackBtn = () => {\n    this.props.setPage(PAGES.MAIN);\n  };\n\n  render() {\n    let { isBackBtnOn, isGuideOn, sectionIndex } = this.state;\n    // console.log(this.state);\n\n    return (\n      <nav className={styles.body}>\n        <TransitionGroup component={null}>\n          {isGuideOn && sectionIndex >= 0 && (\n            <SlowCSSTransitionWrapper\n              key={0}\n              appear={true}\n              onEntered={this.addSectionIndex}\n              onExited={this.startBackBtn}\n              wrapClassName={styles.secText}\n            >\n              <p className={styles.greeting}>안녕하세요!</p>\n            </SlowCSSTransitionWrapper>\n          )}\n          {isGuideOn && sectionIndex >= 1 && (\n            <CSSTransitionWrapper\n              key={1}\n              appear={true}\n              // onEntered={this.addSectionIndex}\n              onExited={this.subtractSectionIndex}\n              wrapClassName={styles.secText}\n            >\n              <p className={styles.guide}>아래 위성 중 하나를 선택해주세요.</p>\n            </CSSTransitionWrapper>\n          )}\n          {isBackBtnOn && (\n            <SlowCSSTransitionWrapper\n              key={2}\n              appear={true}\n              onExited={this.startGuide}\n              wrapClassName={styles.secText}\n            >\n              <div className={styles.btn} onClick={this.handleBackBtn} />\n            </SlowCSSTransitionWrapper>\n          )}\n        </TransitionGroup>\n      </nav>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport styles from \"./index.module.css\";\nimport { TransitionGroup } from \"react-transition-group\";\nimport { CSSTransitionWrapper } from \"../../../Component/Transition\";\n\nexport default class Quiz extends Component {\n  state = {\n    sectionIndex: 0,\n  };\n\n  addSectionIndex = () => {\n    this.setState(({ sectionIndex }) => ({ sectionIndex: sectionIndex + 1 }));\n  };\n  subtractSectionIndex = () => {\n    this.setState(({ sectionIndex }) => ({ sectionIndex: sectionIndex - 1 }));\n  };\n\n  render() {\n    let { sectionIndex } = this.state;\n\n    return (\n      <div className={styles.body}>\n        <div className={styles.inner}>\n          <TransitionGroup component={null}>\n            {sectionIndex >= 0 && (\n              <CSSTransitionWrapper\n                key={0}\n                appear={true}\n                onEntered={this.addSectionIndex}\n                onExited={() => {}}\n                wrapClassName={styles.secTitle}\n              >\n                <h2 className={styles.title}>QUIZ</h2>\n              </CSSTransitionWrapper>\n            )}\n\n            {sectionIndex >= 1 && (\n              <CSSTransitionWrapper\n                key={1}\n                appear={true}\n                // onEntered={this.addSectionIndex}\n                onExited={this.subtractSectionIndex}\n                wrapClassName={styles.secDesc}\n              >\n                <p className={styles.desc}>준비중!</p>\n              </CSSTransitionWrapper>\n            )}\n          </TransitionGroup>\n        </div>\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport styles from \"./index.module.css\";\nimport { TransitionGroup } from \"react-transition-group\";\nimport {\n  CSSTransitionWrapper,\n  QuoteCSSTransitionWrapper,\n} from \"../../../Component/Transition\";\n\nexport default class Bird extends Component {\n  state = {\n    sectionIndex: 0,\n  };\n\n  sentences = [\n    // `저는 자바스크립트를 무척 좋아합니다!`,\n    // `저는 상상을 구현하는 사람이 되고 싶습니다!`,\n    `이 화면은 간단한 NEAT 알고리즘과\\ntensorflow.js을 활용해 구현되었습니다.`,\n    // `Fly with the eagles not the sparrows.`,\n    `길은 스스로 찾아야 한다\\n스스로 걸어야 한다\\n모르는 곳으로\\n먼 길이다\\n\\n- 울라브 하우게 -`,\n    `어딘가에서 누군가가\\n너를 향해 전속력으로 달려오고 있다\\n믿을 수 없는 속도로\\n낮과 밤을 여행해\\n눈보라와 사막의 열기를 뚫고\\n급류를 건너고\\n좁은 길들을 지나\\n\\n- 존 애쉬베리 -`,\n    `가장 훌륭한 시는 아직 씌여지지 않았다\\n가장 아름다운 노래는 아직 불려지지 않았다\\n최고의 날들은 아직 살지 않은 날들\\n...\\n어느 길로 가야 할지 더 이상 알 수 없을 때\\n그때가 비로소 진정한 여행의 시작이다\\n\\n- 나짐 히크메트 -`,\n    `넒은 원을 그리며 나는 살아가네\\n그 원은 세상 속에서 점점 넓어져 가네\\n나는 아마도 마지막 원을 완성하지 못할 것이지만\\n그 일에 내 온 존재를 바친다네\\n\\n- 라이너 마리아 릴케 -`,\n    `해답은 없다\\n앞으로도 해답은 없을 것이고\\n지금까지도 해답이 없었다\\n이것이 인생의 유일한 해답이다\\n\\n- 거투르드 스타인 -`,\n    `당신이 하는 일이 문제가 아니다\\n당신이 하지 않고 남겨 두는 일이 문제다\\n해 질 무렵\\n당신의 마음을 아프게 하는 일이 그것이다\\n잊어버린 부드러운 말\\n쓰지 않은 편지\\n보내지 않은 꽃\\n밤에 당신을 따라다니는 환영들이 그것이다\\n\\n- 마거릿 생스터 -`,\n    `철새 떼가, 남쪽에서\\n날아오며\\n도나우강을 건널 때면, 나는 기다린다\\n뒤처진 새를\\n그게 어떤 건지, 내가 안다\\n남들과 발맞출 수 없다는 것\\n어릴 적부터 내가 안다\\n뒤처진 새가 머리 위로 날아 떠나면\\n나는 그에게 내 힘을 보낸다\\n\\n- 라이너 쿤체 -`,\n    `당신의 나이는 당신이 아니다\\n당신이 입는 옷의 크기도\\n몸무게와\\n머리 색깔도 당신이 아니다\\n\\n당신은 아침의 잠긴 목소리이고\\n당신이 미처 감추지 못한 미소이다\\n당신은 당신의 웃음 속 사랑스러움이고\\n당신이 흘린 모든 눈물이다\\n\\n- 에린 핸슨 -`,\n    `모든 것은 지나간다\\n일출의 장엄함이 아침 내내 계속되진 않으며\\n비가 영원히 내리지도 않는다\\n\\n당신이 살아 있는 동안\\n당신에게 일어나는 일들을 받아들이라\\n모든 것은 지나가 버린다\\n\\n- 세실 프란시스 알렉산더 -`,\n    `자기 인생의 의미를 볼 수 없다면\\n지금 여기, 이 순간, 삶의 현재 위치로 오기까지\\n많은 빗나간 길들을 걸어 왔음을 알아야 한다\\n그리고 오랜 세월 동안\\n자신의 영혼이 절벽을 올라왔음도 알아야 한다\\n그 상처, 그 방황, 그 두려움을\\n그 삶의 불모지를 잊지 말아야 한다\\n\\n- 마르타 스목 -`,\n    `아무리 어둔 길이라도\\n나 이전에\\n누군가는 이 길을 지나갔을 것이고,\\n아무리 가파른 길이라도\\n나 이전에\\n누군가는 이 길을 통과했을 것이다\\n아무도 걸어가 본 적이 없는\\n그런 길은 없다\\n\\n- 베드로시안 -`,\n    `함께 있되 거리를 두라\\n그래서 하늘 바람이 너희 사이에서 춤추게 하라\\n\\n- 칼릴 지브란 -`,\n  ];\n\n  addSectionIndex = () => {\n    this.setState(({ sectionIndex }) => ({ sectionIndex: sectionIndex + 1 }));\n  };\n  subtractSectionIndex = () => {\n    this.setState(({ sectionIndex }) => ({ sectionIndex: sectionIndex - 1 }));\n  };\n\n  render() {\n    let { sectionIndex } = this.state;\n    let sentenceIndex = Math.floor(Math.random() * this.sentences.length);\n    let sentence = this.sentences[sentenceIndex];\n\n    return (\n      <div className={styles.body}>\n        <div className={styles.inner}>\n          <TransitionGroup component={null}>\n            {sectionIndex >= 0 && (\n              <CSSTransitionWrapper\n                key={0}\n                appear={true}\n                onEntered={this.addSectionIndex}\n                onExited={() => {}}\n                wrapClassName={styles.secTitle}\n              >\n                <h2 className={styles.title}>\n                  A JOURNEY TO<br></br> JAVASCRIPT\n                </h2>\n              </CSSTransitionWrapper>\n            )}\n            {sectionIndex >= 1 && (\n              <QuoteCSSTransitionWrapper\n                key={1}\n                appear={true}\n                onEntered={this.subtractSectionIndex}\n                onExited={this.addSectionIndex}\n                wrapClassName={styles.secDesc}\n              >\n                <p className={styles.sentence}>{sentence} </p>\n              </QuoteCSSTransitionWrapper>\n            )}\n          </TransitionGroup>\n        </div>\n      </div>\n    );\n  }\n}\n","export default __webpack_public_path__ + \"static/media/johnny_jobs.f829efae.jpg\";","import React, { Component } from \"react\";\nimport styles from \"./index.module.css\";\nimport { TransitionGroup } from \"react-transition-group\";\nimport { CSSTransitionWrapper } from \"../../../Component/Transition\";\n\nimport JobsImage from \"../../../Asset/Image/johnny_jobs.jpg\";\n\nexport default class Midas extends Component {\n  state = {\n    sectionIndex: 0,\n  };\n\n  addSectionIndex = () => {\n    this.setState(({ sectionIndex }) => ({ sectionIndex: sectionIndex + 1 }));\n  };\n  subtractSectionIndex = () => {\n    this.setState(({ sectionIndex }) => ({ sectionIndex: sectionIndex - 1 }));\n  };\n\n  render() {\n    let { sectionIndex } = this.state;\n\n    return (\n      <div className={styles.body}>\n        <div className={styles.inner}>\n          <TransitionGroup component={null}>\n            {sectionIndex >= 0 && (\n              <CSSTransitionWrapper\n                key={0}\n                appear={true}\n                onEntered={this.addSectionIndex}\n                onExited={() => {}}\n                wrapClassName={styles.secTitle}\n              >\n                <h2 className={styles.title}>PSYCHOMETRIC</h2>\n              </CSSTransitionWrapper>\n            )}\n            {sectionIndex >= 1 && (\n              <CSSTransitionWrapper\n                key={1}\n                appear={true}\n                onEntered={this.addSectionIndex}\n                onExited={this.subtractSectionIndex}\n                wrapClassName={styles.secDesc}\n              >\n                <img className={styles.image} src={JobsImage} alt=\"jobs\" />\n                <p className={styles.imageGuide}>\n                  (주의! 당신의 눈은 소중합니다!)\n                </p>\n              </CSSTransitionWrapper>\n            )}\n            {sectionIndex >= 2 && (\n              <CSSTransitionWrapper\n                key={2}\n                appear={true}\n                onEntered={this.addSectionIndex}\n                onExited={this.subtractSectionIndex}\n                wrapClassName={styles.secDesc}\n              >\n                <p className={styles.desc}>\n                  저는 2019년 8월부터 현재까지\n                  <br />\n                  판교의 마이다스아이티라는 회사에서\n                  <br />\n                  <b>'AI역량검사'</b>를 기획/개발하고 있습니다.\n                </p>\n              </CSSTransitionWrapper>\n            )}\n            {sectionIndex >= 3 && (\n              <CSSTransitionWrapper\n                key={3}\n                appear={true}\n                onEntered={this.addSectionIndex}\n                onExited={this.subtractSectionIndex}\n                wrapClassName={styles.secDesc}\n              >\n                <p className={styles.desc}>\n                  AI역량검사는 <b>뇌신경과학 기반으로</b>\n                  <br />\n                  <b>개인의 역량을 측정하는 인재선발도구</b> 입니다.\n                </p>\n              </CSSTransitionWrapper>\n            )}\n            {sectionIndex >= 4 && (\n              <CSSTransitionWrapper\n                key={4}\n                appear={true}\n                onEntered={this.addSectionIndex}\n                onExited={this.subtractSectionIndex}\n                wrapClassName={styles.secDesc}\n              >\n                <p className={styles.desc}>\n                  새로운 측정 도구를 기획하고 개발하는 일은\n                  <br />\n                  무척 도전적이고 흥미로운 과제입니다!\n                </p>\n              </CSSTransitionWrapper>\n            )}\n            {sectionIndex >= 5 && (\n              <CSSTransitionWrapper\n                key={5}\n                appear={true}\n                // onEntered={this.addSectionIndex}\n                onExited={this.subtractSectionIndex}\n                wrapClassName={styles.secDesc}\n              >\n                <p className={styles.btnGuide}>\n                  혹시 위 사진의 출처가 궁금하시다면\n                </p>\n                <a\n                  className={styles.playBtn}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  href={\"https://magazine.hankyung.com/job-joy/article/380291\"}\n                  // onClick={this.subtractSectionIndex}\n                >\n                  기사 보러 가기\n                </a>\n              </CSSTransitionWrapper>\n            )}\n          </TransitionGroup>\n        </div>\n      </div>\n    );\n  }\n}\n","export default __webpack_public_path__ + \"static/media/johnny_wizlab_demo.8019798a.mp4\";","import React, { Component } from \"react\";\nimport styles from \"./index.module.css\";\nimport { TransitionGroup } from \"react-transition-group\";\nimport { CSSTransitionWrapper } from \"../../../Component/Transition\";\n\nimport wizlabVideo from \"../../../Asset/Video/johnny_wizlab_demo.mp4\";\nimport classNames from \"classnames/bind\";\nconst cx = classNames.bind(styles);\n\nexport default class Wizlab extends Component {\n  constructor(props) {\n    super(props);\n    this.videoRef = null;\n    this.setVideoRef = (element) => {\n      if (!element) return;\n      this.videoRef = element;\n      //   this.videoRef.addEventListener(\"ended\", this.handleVideoEnded);\n      //   this.videoRef.addEventListener(\"play\", this.handleVideoPlay);\n    };\n    this.state = {\n      sectionIndex: 0,\n      isVideoMuted: false,\n      isVideoZoom: true,\n    };\n  }\n\n  componentWillUnmount() {\n    // this.videoRef.removeEventListener(\"ended\", this.handleVideoEnded);\n    // this.videoRef.removeEventListener(\"play\", this.handleVideoPlay);\n  }\n\n  addSectionIndex = () => {\n    this.setState(({ sectionIndex }) => ({ sectionIndex: sectionIndex + 1 }));\n  };\n  subtractSectionIndex = () => {\n    this.setState(({ sectionIndex }) => ({ sectionIndex: sectionIndex - 1 }));\n  };\n\n  toggleVideoZoom = () => {\n    this.setState((state) => ({\n      isVideoZoom: !state.isVideoZoom,\n    }));\n  };\n\n  toggleVideoMuted = () => {\n    this.setState((state) => ({\n      isVideoMuted: !state.isVideoMuted,\n    }));\n  };\n\n  render() {\n    let { sectionIndex, isVideoMuted, isVideoZoom } = this.state;\n\n    return (\n      <div className={styles.body}>\n        <div className={cx(\"inner\", { \"inner--blockScroll\": isVideoZoom })}>\n          <TransitionGroup component={null}>\n            {sectionIndex >= 0 && (\n              <CSSTransitionWrapper\n                key={0}\n                appear={true}\n                onEntered={this.addSectionIndex}\n                onExited={() => {}}\n                wrapClassName={styles.secTitle}\n              >\n                <h2 className={styles.title}>DEVELOPER JOHNNY !</h2>\n              </CSSTransitionWrapper>\n            )}\n\n            {sectionIndex >= 1 && (\n              <CSSTransitionWrapper\n                key={1}\n                appear={true}\n                onEntered={this.addSectionIndex}\n                onExited={this.subtractSectionIndex}\n                wrapClassName={cx(\"secVideo\", {\n                  \"secVideo--zoom\": isVideoZoom,\n                })}\n              >\n                <video\n                  className={styles.video}\n                  ref={this.setVideoRef}\n                  controls\n                  playsInline\n                  autoPlay={true}\n                  muted={isVideoMuted}\n                  controlsList=\"nodownload\"\n                  onContextMenu={(e) => {\n                    e.preventDefault();\n                    return false;\n                  }}\n                >\n                  <source src={wizlabVideo} />\n                </video>\n                {/* <div className={cx(\"btnRow\")}>\n                  <div\n                    className={cx(\"videoBtn\", {\n                      \"videoBtn--off\": isVideoZoom,\n                      \"videoBtn--on\": !isVideoZoom,\n                    })}\n                    onClick={this.toggleVideoZoom}\n                  >\n                    {isVideoZoom ? \"작게 보기\" : \"크게 보기\"}\n                  </div>\n                  <div\n                    className={cx(\"videoBtn\", {\n                      \"videoBtn--on\": isVideoMuted,\n                      \"videoBtn--off\": !isVideoMuted,\n                    })}\n                    onClick={this.toggleVideoMuted}\n                  >\n                    {isVideoMuted ? \"소리 켜기\" : \"소리 끄기\"}\n                  </div>\n                </div> */}\n              </CSSTransitionWrapper>\n            )}\n            {sectionIndex >= 2 && (\n              <CSSTransitionWrapper\n                key={2}\n                appear={true}\n                onEntered={this.addSectionIndex}\n                onExited={this.subtractSectionIndex}\n                wrapClassName={styles.secDesc}\n              >\n                <p className={styles.desc}>\n                  저는 2018년 6월부터 2019년 7월까지\n                  <br />\n                  <b>위즈스쿨</b>이라는 스타트업에서\n                  <br />\n                  프로그래밍 교육 플랫폼을 기획/개발했습니다.\n                </p>\n              </CSSTransitionWrapper>\n            )}\n            {sectionIndex >= 3 && (\n              <CSSTransitionWrapper\n                key={3}\n                appear={true}\n                onEntered={this.addSectionIndex}\n                onExited={this.subtractSectionIndex}\n                wrapClassName={styles.secDesc}\n              >\n                <p className={styles.desc}>\n                  <b>누구든 쉽게 상상을 구현할 수 있는 공간</b>을\n                  <br />\n                  목표로 무척 몰입하여 작업했던 프로젝트입니다!\n                </p>\n              </CSSTransitionWrapper>\n            )}\n          </TransitionGroup>\n        </div>\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport styles from \"./index.module.css\";\nimport { TransitionGroup } from \"react-transition-group\";\nimport {\n  CSSTransitionWrapper,\n  SlowCSSTransitionWrapper,\n  QuoteCSSTransitionWrapper,\n} from \"../../../Component/Transition\";\n\nexport default class XOR extends Component {\n  state = {\n    sectionIndex: 0,\n    sentenceIndex: -1,\n  };\n\n  sentences = [\n    `화면 속 개체들은 세대를 거듭하며 XOR 문제를 풀고 있습니다.\\nStanley의 2002년 논문을 바탕으로 구현했습니다.`,\n    `단층 모형으로는 비선형 영역을 분리할 수 없으므로\\n개체들은 새로운 node를 더하는 방향으로 진화해야 합니다.`,\n    `각 개체 좌측 상단 첫 번째 줄은 종 번호,\\n두 번째 줄은 문제 풀이 점수입니다.\\n점수는 4점이 되어야 합니다.`,\n    `진화는 2,000세대까지 이루어집니다.\\n개체 수가 적어 넉넉하게 잡아보았습니다.`,\n    `후속 논문들을 학습하며 계속 개선 중입니다.\\n무척 즐겁게 작업하고 있습니다!`,\n    `몇 번째 세대부터\\n목표 점수가 등장하는지 확인해보세요!`,\n  ];\n\n  addSectionIndex = () => {\n    let { sectionIndex, sentenceIndex } = this.state;\n    if (sectionIndex >= 1 && sentenceIndex < this.sentences.length) {\n      this.setState({\n        sectionIndex: sectionIndex + 1,\n        sentenceIndex: sentenceIndex + 1,\n      });\n    } else {\n      this.setState({ sectionIndex: sectionIndex + 1 });\n    }\n  };\n  subtractSectionIndex = () => {\n    this.setState(({ sectionIndex }) => ({ sectionIndex: sectionIndex - 1 }));\n  };\n\n  render() {\n    let { sectionIndex, sentenceIndex } = this.state;\n    let sentence = this.sentences[sentenceIndex];\n\n    return (\n      <div className={styles.body}>\n        <div className={styles.inner}>\n          <TransitionGroup component={null}>\n            {sectionIndex >= 0 && (\n              <CSSTransitionWrapper\n                key={0}\n                appear={true}\n                onEntered={this.addSectionIndex}\n                onExited={() => {}}\n                wrapClassName={styles.secTitle}\n              >\n                <h2 className={styles.title}>XOR</h2>\n              </CSSTransitionWrapper>\n            )}\n            {sectionIndex >= 1 && (\n              <SlowCSSTransitionWrapper\n                key={1}\n                appear={true}\n                onEntered={this.addSectionIndex}\n                onExited={this.subtractSectionIndex}\n                wrapClassName={styles.secDesc}\n              >\n                <p className={styles.desc}>\n                  {`\"Neuroevolution of augmenting topologies\"`}\n                </p>\n              </SlowCSSTransitionWrapper>\n            )}\n            {sectionIndex >= 2 && !!sentence && (\n              <QuoteCSSTransitionWrapper\n                key={2}\n                appear={true}\n                onEntered={this.subtractSectionIndex}\n                onExited={this.addSectionIndex}\n                wrapClassName={styles.secDesc}\n              >\n                <p className={styles.desc}>{sentence}</p>\n              </QuoteCSSTransitionWrapper>\n            )}\n          </TransitionGroup>\n        </div>\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport { withRouter } from \"react-router\";\nimport { Switch, Route, Redirect } from \"react-router-dom\";\n\nimport Field from \"./Field\";\nimport Navigation from \"./Navigation\";\n\nimport ArticleQuiz from \"./Articles/Quiz\";\nimport ArticleBird from \"./Articles/Bird\";\nimport ArticleMidas from \"./Articles/Midas\";\nimport ArticleWizlab from \"./Articles/Wizlab\";\nimport ArticleXOR from \"./Articles/XOR\";\n\nimport styles from \"./index.module.css\";\nimport { PAGES, getScreenRect } from \"./Constant\";\n\nclass Page extends Component {\n  state = {\n    isScreenOn: false,\n    isArticleOn: false,\n  };\n\n  componentDidMount() {\n    window.addEventListener(\"resize\", this.resizeEventHandler);\n    this.resizeEventHandler();\n    // // DEBUG // //\n    // this.setPage(PAGES.XOR);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"resize\", this.resizeEventHandler);\n  }\n\n  resizeEventHandler = (event) => {\n    this.stageWidth = window.innerWidth || document.body.clientWidth;\n    this.stageHeight = window.innerHeight || document.body.clientHeight;\n\n    let { params } = this.props.match;\n    let currentPage = params && params.id;\n    let scrRect = getScreenRect(this.stageWidth, this.stageHeight, currentPage);\n    this.setState({ scrRect });\n  };\n\n  setPage = (nextPage) => {\n    // set url\n    if (nextPage === PAGES.MAIN && this.canGoBack) {\n      // console.log(\"go back\");\n      this.props.history.goBack();\n    } else {\n      // console.log(\"push\");\n      this.canGoBack = true;\n      this.props.history.push(`/${nextPage}`);\n    }\n\n    // set screenSize and turn off article\n    let scrRect = getScreenRect(this.stageWidth, this.stageHeight, nextPage);\n    this.setState({\n      scrRect,\n      isArticleOn: false,\n    });\n  };\n\n  toggleArticle = (isArticleOn) => {\n    this.setState({\n      isArticleOn,\n    });\n  };\n\n  getPageInfo = () => {\n    let { params } = this.props.match;\n    let currentPage = params && params.id;\n    let isScreenOn = false;\n    if (\n      currentPage === PAGES.QUIZ ||\n      currentPage === PAGES.XOR ||\n      currentPage === PAGES.BIRD ||\n      currentPage === PAGES.MIDAS ||\n      currentPage === PAGES.WIZLAB\n    ) {\n      isScreenOn = true;\n    }\n\n    return {\n      currentPage,\n      isScreenOn,\n    };\n  };\n\n  render() {\n    let { currentPage, isScreenOn } = this.getPageInfo();\n    let { isArticleOn, scrRect } = this.state;\n\n    let redirectNeeded = true;\n    for (let key in PAGES) {\n      if (currentPage === PAGES[key]) redirectNeeded = false;\n    }\n\n    if (redirectNeeded) {\n      return <Redirect to={`/${PAGES.MAIN}`} />;\n    }\n\n    return (\n      <div className={styles.body}>\n        <div className={styles.NavContainer}>\n          <Navigation currentPage={currentPage} setPage={this.setPage} />\n        </div>\n        <div className={styles.FieldContainer}>\n          <Field\n            currentPage={currentPage}\n            isScreenOn={isScreenOn}\n            isArticleOn={isArticleOn}\n            setPage={this.setPage}\n            toggleArticle={this.toggleArticle}\n          />\n        </div>\n        {isArticleOn && (\n          <div\n            style={{ width: scrRect.width, height: scrRect.height }}\n            className={styles.ArticleContainer}\n          >\n            <Switch>\n              <Route path={`/${PAGES.XOR}`}>\n                <ArticleXOR />\n              </Route>\n              <Route path={`/${PAGES.MIDAS}`}>\n                <ArticleMidas />\n              </Route>\n              <Route path={`/${PAGES.BIRD}`}>\n                <ArticleBird />\n              </Route>\n              <Route path={`/${PAGES.WIZLAB}`}>\n                <ArticleWizlab />\n              </Route>\n              <Route path={`/${PAGES.QUIZ}`}>\n                <ArticleQuiz />\n              </Route>\n            </Switch>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default withRouter(Page);\n","import React from \"react\";\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Redirect,\n} from \"react-router-dom\";\nimport Page from \"./Page\";\nimport { PAGES } from \"./Page/Constant\";\n\nexport default function App() {\n  return (\n    <Router>\n      <Switch>\n        <Route exact path=\"/:id\">\n          <Page />\n        </Route>\n        <Route path=\"*\">\n          <Redirect to={`/${PAGES.MAIN}`}></Redirect>\n        </Route>\n      </Switch>\n    </Router>\n  );\n}\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"body\":\"Midas_body__3zOvn\",\"inner\":\"Midas_inner__1nqit\",\"secTitle\":\"Midas_secTitle__3UCCG\",\"title\":\"Midas_title__2O89b\",\"secDesc\":\"Midas_secDesc__2M2GL\",\"image\":\"Midas_image__7slcn\",\"scaleUp\":\"Midas_scaleUp__3xuBs\",\"imageGuide\":\"Midas_imageGuide__3FnNG\",\"desc\":\"Midas_desc__3TAo8\",\"btnGuide\":\"Midas_btnGuide__3EONG\",\"playBtn\":\"Midas_playBtn__2k6Ig\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"body\":\"Wizlab_body__1dYNT\",\"inner\":\"Wizlab_inner__3JJ59\",\"inner--blockScroll\":\"Wizlab_inner--blockScroll__1bGb-\",\"secTitle\":\"Wizlab_secTitle__1Ju9q\",\"title\":\"Wizlab_title__dtmzU\",\"secVideo\":\"Wizlab_secVideo__1iWRd\",\"secVideo--zoom\":\"Wizlab_secVideo--zoom__2Q9py\",\"video\":\"Wizlab_video__1s8Wn\",\"secDesc\":\"Wizlab_secDesc__21-2G\",\"desc\":\"Wizlab_desc__3g0DN\",\"btnRow\":\"Wizlab_btnRow__38OVs\",\"videoBtn\":\"Wizlab_videoBtn__10lQ4\",\"videoBtn--on\":\"Wizlab_videoBtn--on__au_dF\",\"videoBtn--off\":\"Wizlab_videoBtn--off__1h0jf\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"body\":\"XOR_body__1kyOB\",\"inner\":\"XOR_inner__2QEbF\",\"secTitle\":\"XOR_secTitle__2mjqK\",\"title\":\"XOR_title__3XBPL\",\"secDesc\":\"XOR_secDesc__XlWS_\",\"desc\":\"XOR_desc__japUY\"};"],"sourceRoot":""}